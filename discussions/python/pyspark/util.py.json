[
  {
    "id" : "03b661e5-341f-4c2e-9c7e-54f6e9538a61",
    "prId" : 32989,
    "prUrl" : "https://github.com/apache/spark/pull/32989#pullrequestreview-687966889",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e1da6e55-a498-4926-81a0-e99b30a66b01",
        "parentId" : null,
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "Because the removal on the deque on the specific thread local will only happen in the same thread.",
        "createdAt" : "2021-06-21T01:19:33Z",
        "updatedAt" : "2021-06-21T01:19:33Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "2101e669-9255-42a8-81ba-e8ff574640d4",
        "parentId" : "e1da6e55-a498-4926-81a0-e99b30a66b01",
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "This logic was just copied from Py4J to be extra safe.",
        "createdAt" : "2021-06-21T01:19:52Z",
        "updatedAt" : "2021-06-21T01:19:53Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      }
    ],
    "commit" : "8b08f162e9ccf3c765851bf0a71fa9bd9944b05f",
    "line" : 25,
    "diffHunk" : "@@ -1,1 +387,391 @@                jvm._gateway_client.deque.remove(thread_connection)\n            except ValueError:\n                # Should never reach this point\n                return\n            finally:"
  },
  {
    "id" : "87812dc0-8a5d-4d66-a494-9d601d278c5e",
    "prId" : 32962,
    "prUrl" : "https://github.com/apache/spark/pull/32962#pullrequestreview-687782885",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e8756e4c-1e71-40c9-945e-7cabc1ec815a",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "This seems to be the change of default value when `PYSPARK_PIN_THREAD` is not set. Do we need to mention this in the PR description?",
        "createdAt" : "2021-06-19T01:08:08Z",
        "updatedAt" : "2021-06-19T01:08:08Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "d774e6a5-c22e-4d46-8053-05fc68ad944e",
        "parentId" : "e8756e4c-1e71-40c9-945e-7cabc1ec815a",
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "Oh yeah, it was a mistake from #32429, and actually I meant it by:\r\n\r\n> #32429 missed one place at inheritable_thread_target (https://github.com/apache/spark/blob/master/python/pyspark/util.py#L308).\r\n\r\nLet me me more explicit on that",
        "createdAt" : "2021-06-19T01:09:31Z",
        "updatedAt" : "2021-06-19T01:09:31Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      }
    ],
    "commit" : "be9dd5ecc3eaa9a21958d50d7d469c40fa569c6a",
    "line" : 27,
    "diffHunk" : "@@ -1,1 +309,313 @@    from pyspark import SparkContext\n\n    if os.environ.get(\"PYSPARK_PIN_THREAD\", \"true\").lower() == \"true\":\n        # NOTICE the internal difference vs `InheritableThread`. `InheritableThread`\n        # copies local properties when the thread starts but `inheritable_thread_target`"
  }
]