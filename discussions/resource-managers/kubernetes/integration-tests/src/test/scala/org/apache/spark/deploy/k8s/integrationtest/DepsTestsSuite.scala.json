[
  {
    "id" : "edf16f67-5026-4fd3-8992-99735829d7a5",
    "prId" : 31604,
    "prUrl" : "https://github.com/apache/spark/pull/31604#pullrequestreview-594822130",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ef5548c2-2443-457a-bccb-a29ab5546514",
        "parentId" : null,
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "I am reading https://github.com/apache/spark/commit/5e74570c8f5e7dfc1ca1c53c177827c5cea57bf1 and wonder if we can replace `2.7.6` -> `VersionInfo.getVersion` too.\r\n",
        "createdAt" : "2021-02-21T09:20:51Z",
        "updatedAt" : "2021-02-21T09:20:52Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      }
    ],
    "commit" : "a8ecb70f7675296e155058e69393811a1d690d48",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +298,302 @@      s\"org.apache.hadoop:hadoop-aws:${VersionInfo.getVersion}\"\n    } else {\n      \"com.amazonaws:aws-java-sdk:1.7.4,org.apache.hadoop:hadoop-aws:2.7.6\"\n    }\n    conf.set(\"spark.hadoop.fs.s3a.access.key\", ACCESS_KEY)"
  },
  {
    "id" : "07f554ef-bc99-4643-8a1b-30d7bc9b0c5c",
    "prId" : 28015,
    "prUrl" : "https://github.com/apache/spark/pull/28015#pullrequestreview-380882811",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ec288262-5803-4e9a-a493-34cdcf2c9356",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "This came from the official usage example of `minio`.\r\n```\r\n$ docker run -it --rm minio/minio server\r\nNAME:\r\n  minio server - start object storage server\r\n\r\n...\r\n  2. Start distributed minio server on an 32 node setup with 32 drives each, run following command on all the nodes\r\n     $ export MINIO_ACCESS_KEY=minio\r\n     $ export MINIO_SECRET_KEY=miniostorage\r\n...\r\n```",
        "createdAt" : "2020-03-25T06:25:15Z",
        "updatedAt" : "2020-03-25T06:25:15Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "e2348aaea77df987219b27a01272085e0513ade3",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +40,44 @@  val BUCKET = \"spark\"\n  val ACCESS_KEY = \"minio\"\n  val SECRET_KEY = \"miniostorage\"\n\n  private def getMinioContainer(): Container = {"
  },
  {
    "id" : "182bd951-6cc5-4355-ba6f-631ec9471beb",
    "prId" : 28015,
    "prUrl" : "https://github.com/apache/spark/pull/28015#pullrequestreview-381475494",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "feb18fba-34c8-478e-b1ee-eb6d9a72b018",
        "parentId" : null,
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "Is this an argument passed to minio server?",
        "createdAt" : "2020-03-25T18:45:56Z",
        "updatedAt" : "2020-03-25T18:45:56Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      },
      {
        "id" : "f4e8b474-d940-4f64-b2bd-5617e1bd8cc4",
        "parentId" : "feb18fba-34c8-478e-b1ee-eb6d9a72b018",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Yes, right! `minio` docker image needs these argument.",
        "createdAt" : "2020-03-25T19:37:25Z",
        "updatedAt" : "2020-03-25T19:37:25Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "e2348aaea77df987219b27a01272085e0513ade3",
    "line" : 35,
    "diffHunk" : "@@ -1,1 +62,66 @@      .withImagePullPolicy(\"Always\")\n      .withName(cName)\n      .withArgs(\"server\", \"/data\")\n      .withPorts(new ContainerPortBuilder()\n          .withName(svcName)"
  },
  {
    "id" : "d76c67c1-f686-4551-84c1-e225cec06a36",
    "prId" : 25870,
    "prUrl" : "https://github.com/apache/spark/pull/25870#pullrequestreview-302573604",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "944b7dc5-a5a9-42a4-a210-423a7fe6b2fb",
        "parentId" : null,
        "authorId" : "63281e91-e961-4e6e-b0bb-6855587910d1",
        "body" : "instead of watching for deletion make sure we are able to create the resources if some previous resource is still being deleted. ",
        "createdAt" : "2019-09-20T15:33:39Z",
        "updatedAt" : "2020-11-18T13:53:18Z",
        "lastEditedBy" : "63281e91-e961-4e6e-b0bb-6855587910d1",
        "tags" : [
        ]
      },
      {
        "id" : "17f91978-8248-40f6-97f6-de87f389c01b",
        "parentId" : "944b7dc5-a5a9-42a4-a210-423a7fe6b2fb",
        "authorId" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "body" : "Maybe make that as a comment since most people won't go back to the PR to understand what is going.",
        "createdAt" : "2019-10-01T01:24:58Z",
        "updatedAt" : "2020-11-18T13:53:18Z",
        "lastEditedBy" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "tags" : [
        ]
      },
      {
        "id" : "b0da1986-2765-4802-9a84-7a302426885e",
        "parentId" : "944b7dc5-a5a9-42a4-a210-423a7fe6b2fb",
        "authorId" : "63281e91-e961-4e6e-b0bb-6855587910d1",
        "body" : "I added a comment above of each statement to clarify this.",
        "createdAt" : "2019-10-16T13:28:28Z",
        "updatedAt" : "2020-11-18T13:53:18Z",
        "lastEditedBy" : "63281e91-e961-4e6e-b0bb-6855587910d1",
        "tags" : [
        ]
      }
    ],
    "commit" : "0145183265a1a27c38cd853c3bba53df0b8552e6",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +129,133 @@\n    // try until the stateful set of a previous test is deleted\n    Eventually.eventually(TIMEOUT, INTERVAL) (kubernetesTestComponents\n      .kubernetesClient\n      .apps()"
  },
  {
    "id" : "c708f9c1-0490-458f-9d43-7bc1925078c7",
    "prId" : 25870,
    "prUrl" : "https://github.com/apache/spark/pull/25870#pullrequestreview-314437843",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "16b72bc1-47dc-4137-90c1-ba61e7404f50",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Is this relevant to this PR? If this aims to the flakiness of the existing test suite, we should make another PR before this one.",
        "createdAt" : "2019-10-28T02:51:21Z",
        "updatedAt" : "2020-11-18T13:53:18Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "9bd1aca3-097c-4a56-b06e-10ba62311bfb",
        "parentId" : "16b72bc1-47dc-4137-90c1-ba61e7404f50",
        "authorId" : "63281e91-e961-4e6e-b0bb-6855587910d1",
        "body" : "Nope this is to address waiting for the elimination of the running service from a previous test. In this suite I have two tests that use Ceph-nano and for each test I start the service from scratch so all tests start from a clean state.\r\n`Eventually` provides an easy retry mechanism until the previous service is removed and the new can succeed. If I remove `eventually` the new service may fail due to the previous one being terminated. The alternative is to block and wait for the old service to be removed when a tests finished and deletes its resources.. I found `eventually` being an easy way not to block and succeed. Check next:\r\n```\r\nTest1 {\r\nAllocate resources\r\nDelete resources // <- K8s client delete calls dont block\r\n}\r\n\r\nTest2 {\r\nAllocate resources\r\nDelete resources\r\n}\r\n```\r\nSetting ```eventually(Allocate resources)``` solves this.",
        "createdAt" : "2019-11-08T20:18:36Z",
        "updatedAt" : "2020-11-18T13:53:18Z",
        "lastEditedBy" : "63281e91-e961-4e6e-b0bb-6855587910d1",
        "tags" : [
        ]
      }
    ],
    "commit" : "0145183265a1a27c38cd853c3bba53df0b8552e6",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +123,127 @@\n    // try until the service from a previous test is deleted\n    Eventually.eventually(TIMEOUT, INTERVAL) (kubernetesTestComponents\n      .kubernetesClient\n      .services()"
  },
  {
    "id" : "1d1ac615-966e-4f1f-bea4-f1b3d3f75159",
    "prId" : 25870,
    "prUrl" : "https://github.com/apache/spark/pull/25870#pullrequestreview-307623920",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "301a4b8e-7ef5-441e-8ad2-3fc75255872c",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "ditto.",
        "createdAt" : "2019-10-28T02:51:57Z",
        "updatedAt" : "2020-11-18T13:53:18Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "0145183265a1a27c38cd853c3bba53df0b8552e6",
    "line" : 21,
    "diffHunk" : "@@ -1,1 +128,132 @@      .create(minioService))\n\n    // try until the stateful set of a previous test is deleted\n    Eventually.eventually(TIMEOUT, INTERVAL) (kubernetesTestComponents\n      .kubernetesClient"
  },
  {
    "id" : "4239b467-16f1-4c60-b498-6dc5e492bd00",
    "prId" : 25870,
    "prUrl" : "https://github.com/apache/spark/pull/25870#pullrequestreview-314446722",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0c988985-1e7f-4b96-9d98-226f3a3fee1b",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "ditto for the above two `.withGracePeriod(0)`s.",
        "createdAt" : "2019-10-28T02:52:34Z",
        "updatedAt" : "2020-11-18T13:53:18Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "90961372-b4e8-46e9-b83b-dbb4d7838df2",
        "parentId" : "0c988985-1e7f-4b96-9d98-226f3a3fee1b",
        "authorId" : "63281e91-e961-4e6e-b0bb-6855587910d1",
        "body" : "We want to remove resources asap so grace period forces it, we dont want that?",
        "createdAt" : "2019-11-08T20:38:27Z",
        "updatedAt" : "2020-11-18T13:53:18Z",
        "lastEditedBy" : "63281e91-e961-4e6e-b0bb-6855587910d1",
        "tags" : [
        ]
      }
    ],
    "commit" : "0145183265a1a27c38cd853c3bba53df0b8552e6",
    "line" : 42,
    "diffHunk" : "@@ -1,1 +149,153 @@      .services()\n      .withName(svcName)\n      .withGracePeriod(0)\n      .delete()\n  }"
  },
  {
    "id" : "ab442ad2-9dd3-4e56-8e71-cf26351ce65f",
    "prId" : 25599,
    "prUrl" : "https://github.com/apache/spark/pull/25599#pullrequestreview-285608413",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f3353dc5-08e4-4753-a28a-54b19a4fb958",
        "parentId" : null,
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "One question -- did this ever work before? meaning, would we ever get a response that doesn't match the regex legitimately? If so should it be a warning? Or is it that this doesn't work at all right now?",
        "createdAt" : "2019-08-28T13:37:43Z",
        "updatedAt" : "2019-08-28T13:37:44Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      },
      {
        "id" : "6932abc6-8e7c-4263-a2a3-e74a9a33de19",
        "parentId" : "f3353dc5-08e4-4753-a28a-54b19a4fb958",
        "authorId" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "body" : "So I've only tested on OSX and just incase someone elses setup doesn't match the regex (which I'm not sure would work) I figured a fall-through with a warning was a good approach. I also considered just throwing here.",
        "createdAt" : "2019-08-28T16:37:44Z",
        "updatedAt" : "2019-08-28T16:37:44Z",
        "lastEditedBy" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "tags" : [
        ]
      },
      {
        "id" : "613e55e6-ad35-455f-8bfb-d55e4ede0b64",
        "parentId" : "f3353dc5-08e4-4753-a28a-54b19a4fb958",
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "Out of curiosity what does the minikube command return for you? wondering if it's something that varies by version or we have a problem with the command outputting extra stuff. Seems like it intends to only return a URL.",
        "createdAt" : "2019-08-28T20:48:03Z",
        "updatedAt" : "2019-08-28T20:48:03Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      },
      {
        "id" : "ce316eb9-ffea-4de1-84ef-e63060fc9565",
        "parentId" : "f3353dc5-08e4-4753-a28a-54b19a4fb958",
        "authorId" : "4c995a1a-1668-4460-9df8-b8244472ae24",
        "body" : "Talking with Stavros, this was not happening on previous version of minikube, so if we strip it, we just need to be careful it also works with earlier revs. ",
        "createdAt" : "2019-09-04T17:40:46Z",
        "updatedAt" : "2019-09-04T17:40:46Z",
        "lastEditedBy" : "4c995a1a-1668-4460-9df8-b8244472ae24",
        "tags" : [
        ]
      },
      {
        "id" : "4fdbe052-2653-4804-86ac-cd538c90402d",
        "parentId" : "f3353dc5-08e4-4753-a28a-54b19a4fb958",
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "If the problem is that it's `* some://url:port[whitespace]` then this looks like a fine fix. Would it help unblock other PRs?",
        "createdAt" : "2019-09-04T17:44:16Z",
        "updatedAt" : "2019-09-04T17:44:17Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      },
      {
        "id" : "283d871e-0105-43c4-978a-889327162444",
        "parentId" : "f3353dc5-08e4-4753-a28a-54b19a4fb958",
        "authorId" : "4c995a1a-1668-4460-9df8-b8244472ae24",
        "body" : "It should be backward compatible. No junk prefix, then that subexpression is empty.",
        "createdAt" : "2019-09-04T17:51:52Z",
        "updatedAt" : "2019-09-04T17:51:52Z",
        "lastEditedBy" : "4c995a1a-1668-4460-9df8-b8244472ae24",
        "tags" : [
        ]
      },
      {
        "id" : "5244f066-2465-4f1f-ba6c-3efc7234ac4b",
        "parentId" : "f3353dc5-08e4-4753-a28a-54b19a4fb958",
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "@holdenk OK to merge? seems like a decent fix",
        "createdAt" : "2019-09-06T14:10:57Z",
        "updatedAt" : "2019-09-06T14:10:57Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      },
      {
        "id" : "c9610ee7-9f3d-4bef-a3af-44a4e528d83e",
        "parentId" : "f3353dc5-08e4-4753-a28a-54b19a4fb958",
        "authorId" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "body" : "My bad for not responding sooner, yeah it's fine :)",
        "createdAt" : "2019-09-09T15:51:16Z",
        "updatedAt" : "2019-09-09T15:51:17Z",
        "lastEditedBy" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "tags" : [
        ]
      }
    ],
    "commit" : "3cdea4f9a1c0be5150779d445cf24f806fb4df5e",
    "line" : 16,
    "diffHunk" : "@@ -1,1 +236,240 @@        case _ =>\n          logWarning(s\"Response from minikube ${rawUrl} did not match URL regex\")\n          rawUrl\n      }\n      url"
  },
  {
    "id" : "8251da53-597e-46f0-9584-0382df55fa31",
    "prId" : 25222,
    "prUrl" : "https://github.com/apache/spark/pull/25222#pullrequestreview-266308059",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "59fa9ae4-35ba-4759-9598-ae7812a360fc",
        "parentId" : null,
        "authorId" : "99156419-7ce7-4671-b858-d0b5c4711f88",
        "body" : "this might break in a future (or future major) version of ceph/daemon? we are sure this will be always compatible?",
        "createdAt" : "2019-07-22T05:45:09Z",
        "updatedAt" : "2019-07-22T05:45:12Z",
        "lastEditedBy" : "99156419-7ce7-4671-b858-d0b5c4711f88",
        "tags" : [
        ]
      },
      {
        "id" : "b5d6fdd2-1342-4044-893e-cc8175058fce",
        "parentId" : "59fa9ae4-35ba-4759-9598-ae7812a360fc",
        "authorId" : "63281e91-e961-4e6e-b0bb-6855587910d1",
        "body" : "@felixcheung Nope but if it does I can ping the guys on ceph-nano to help. The safest way to do this (like the way I tried but they deleted the image), is to push an image somewhere and use that. Is there a dockerhub repo which we can use?",
        "createdAt" : "2019-07-22T08:36:54Z",
        "updatedAt" : "2019-07-22T08:38:01Z",
        "lastEditedBy" : "63281e91-e961-4e6e-b0bb-6855587910d1",
        "tags" : [
        ]
      },
      {
        "id" : "fc81a03b-9b33-4bd7-9d75-0ba45a692dc1",
        "parentId" : "59fa9ae4-35ba-4759-9598-ae7812a360fc",
        "authorId" : "0b3111e2-9584-4813-8cb5-8f40e119f71c",
        "body" : "Unless Shane sets up a docker registry that we can use for the integration tests, I guess this is the best we can do for now. I'll merge this to get tests going, we can look at alternatives separately.",
        "createdAt" : "2019-07-24T21:57:11Z",
        "updatedAt" : "2019-07-24T21:57:11Z",
        "lastEditedBy" : "0b3111e2-9584-4813-8cb5-8f40e119f71c",
        "tags" : [
        ]
      }
    ],
    "commit" : "b7c330604eb7640efa820412cf22a81d9f2a0813",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +64,68 @@\n    new ContainerBuilder()\n      .withImage(\"ceph/daemon:latest\")\n      .withImagePullPolicy(\"Always\")\n      .withName(cName)"
  }
]