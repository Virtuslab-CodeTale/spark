[
  {
    "id" : "1fc546d5-31c9-4d59-b3e2-76e0e21ccf33",
    "prId" : 31829,
    "prUrl" : "https://github.com/apache/spark/pull/31829#pullrequestreview-612412872",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e77ef3a6-309c-4451-a6bf-2381d0069ae3",
        "parentId" : null,
        "authorId" : "2387f9ea-340a-498e-8e4b-4356faa38c74",
        "body" : "If we're now enforcing that the name of the context must be `minikube` this should be included in the apache/spark-website#321 PR",
        "createdAt" : "2021-03-15T11:04:44Z",
        "updatedAt" : "2021-04-17T07:57:12Z",
        "lastEditedBy" : "2387f9ea-340a-498e-8e4b-4356faa38c74",
        "tags" : [
        ]
      },
      {
        "id" : "d0ea7417-001c-4389-b406-4d5342220b7a",
        "parentId" : "e77ef3a6-309c-4451-a6bf-2381d0069ae3",
        "authorId" : "123cc67f-f678-49be-8742-95bc35d8c5c4",
        "body" : "I think that is the default context for minikube. Although I have not found this in documentation so I asked this in the Minikube user's list:\r\n\r\n```\r\nHi!\r\n\r\nAs I see the default context for the started cluster is `minikube` but I have not found this in documentation.\r\n- Am I right? \r\n- Can I rely on this?\r\n- Could you please show me the documentation about this (or the relevant code part)?\r\n\r\nThanks in advance,\r\nAttila\r\n```\r\n\r\nI hope we get an answer soon. ",
        "createdAt" : "2021-03-15T15:11:53Z",
        "updatedAt" : "2021-04-17T07:57:12Z",
        "lastEditedBy" : "123cc67f-f678-49be-8742-95bc35d8c5c4",
        "tags" : [
        ]
      },
      {
        "id" : "fd475605-a8d3-424c-a222-956f3b6c1ab2",
        "parentId" : "e77ef3a6-309c-4451-a6bf-2381d0069ae3",
        "authorId" : "2387f9ea-340a-498e-8e4b-4356faa38c74",
        "body" : "I'm sure it's probably is the default (though their community will be best placed to confirm).  The scenario I was thinking of was more the one where users have renamed their contexts to their own preference.  I have access to a lot of R&D clusters in my $dayjob and at times I've had as many as 10+ different contexts in my `KUBECONFIG` so I would rename contexts appropriately as some tools (GKE I'm looking at you) produce rather user unfriendly names by default.  Not sure I've ever renamed the `minikube` context itself but it's a thing that users can and might do.\r\n\r\nTL;DR If there's a naming assumption present in the code, particularly where it pertains to user managed configuration files outside of Spark's control, it should be documented as such.",
        "createdAt" : "2021-03-15T15:24:05Z",
        "updatedAt" : "2021-04-17T07:57:12Z",
        "lastEditedBy" : "2387f9ea-340a-498e-8e4b-4356faa38c74",
        "tags" : [
        ]
      },
      {
        "id" : "2030f9f9-8cdf-4980-8f01-d123e54c3b32",
        "parentId" : "e77ef3a6-309c-4451-a6bf-2381d0069ae3",
        "authorId" : "123cc67f-f678-49be-8742-95bc35d8c5c4",
        "body" : "I have tested this case and when after minikube is started and the context is switched to another one even that makes the test fail. \r\n\r\nSo the best probably is mentioning that fact too:\r\n```\r\n- the current kubernetes context must be minikube's default context (called 'minikube'). This can be selected by `minikube kubectl -- config use-context minikube`. This is only needed when after minikube is started another kubernetes context is selected.\r\n```\r\n\r\n",
        "createdAt" : "2021-03-15T16:41:47Z",
        "updatedAt" : "2021-04-17T07:57:12Z",
        "lastEditedBy" : "123cc67f-f678-49be-8742-95bc35d8c5c4",
        "tags" : [
        ]
      }
    ],
    "commit" : "855273a67e7e6a62130c707439d15ac25d4cb1f2",
    "line" : 103,
    "diffHunk" : "@@ -1,1 +59,63 @@    }\n\n    new DefaultKubernetesClient(Config.autoConfigure(\"minikube\"))\n  }\n"
  },
  {
    "id" : "e4ff8500-f1b9-48a5-99d9-633b308dbf09",
    "prId" : 31829,
    "prUrl" : "https://github.com/apache/spark/pull/31829#pullrequestreview-655096601",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9fbbb6d7-244f-446b-b473-f67e4cb066b3",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Most of changes are only related to these spacing changes. I'm wondering if these changes are inevitable for the purpose of this PR.",
        "createdAt" : "2021-05-09T05:23:59Z",
        "updatedAt" : "2021-05-09T05:24:00Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "41affa65-dee0-4b05-a8f2-86ded191bd97",
        "parentId" : "9fbbb6d7-244f-446b-b473-f67e4cb066b3",
        "authorId" : "123cc67f-f678-49be-8742-95bc35d8c5c4",
        "body" : "I can revert them but I think this is more clean than polluting each usage with the extra space. In addition we can use the `split` method (and getting the second part) instead of the `replace_first` which express our intention a bit better.",
        "createdAt" : "2021-05-09T08:15:45Z",
        "updatedAt" : "2021-05-09T08:15:46Z",
        "lastEditedBy" : "123cc67f-f678-49be-8742-95bc35d8c5c4",
        "tags" : [
        ]
      },
      {
        "id" : "dc93e334-12d0-4379-83ae-3a6cbdeddc3e",
        "parentId" : "9fbbb6d7-244f-446b-b473-f67e4cb066b3",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Then, if you don't mind, shall you split that refactoring contribution into another PR? Each PR had better have one theme and minimal.",
        "createdAt" : "2021-05-09T14:33:17Z",
        "updatedAt" : "2021-05-09T14:33:17Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "d2b1b014-2774-4666-8f47-3d496d3b70ba",
        "parentId" : "9fbbb6d7-244f-446b-b473-f67e4cb066b3",
        "authorId" : "123cc67f-f678-49be-8742-95bc35d8c5c4",
        "body" : "Fine for me.",
        "createdAt" : "2021-05-09T17:09:58Z",
        "updatedAt" : "2021-05-09T17:09:58Z",
        "lastEditedBy" : "123cc67f-f678-49be-8742-95bc35d8c5c4",
        "tags" : [
        ]
      }
    ],
    "commit" : "855273a67e7e6a62130c707439d15ac25d4cb1f2",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +31,35 @@  private val APISERVER_PREFIX = \"apiserver: \"\n  private val KUBECTL_PREFIX = \"kubectl: \"\n  private val KUBECONFIG_PREFIX = \"kubeconfig: \"\n  private val MINIKUBE_VM_PREFIX = \"minikubeVM: \"\n  private val MINIKUBE_PREFIX = \"minikube: \""
  },
  {
    "id" : "5cf4cee7-bbcb-4957-9ff0-942f7a5f6534",
    "prId" : 30751,
    "prUrl" : "https://github.com/apache/spark/pull/30751#pullrequestreview-550892409",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b468d029-e307-41e5-b7dc-14673e31ae06",
        "parentId" : null,
        "authorId" : "123cc67f-f678-49be-8742-95bc35d8c5c4",
        "body" : "Because of the lexicographical ordering this could be used for comparing versions: \r\n```\r\n\r\nscala> Ordering.Tuple3[Int,Int,Int].gteq((1, 0, 1), (1, 1, 0))\r\nres0: Boolean = false\r\n\r\nscala> Ordering.Tuple3[Int,Int,Int].gteq((1, 1, 0), (1, 1, 0))\r\nres1: Boolean = true\r\n\r\n```   ",
        "createdAt" : "2020-12-13T07:24:39Z",
        "updatedAt" : "2021-02-24T09:23:30Z",
        "lastEditedBy" : "123cc67f-f678-49be-8742-95bc35d8c5c4",
        "tags" : [
        ]
      }
    ],
    "commit" : "a1fccb9cacf90d7430efc28f695216172cc7832c",
    "line" : 81,
    "diffHunk" : "@@ -1,1 +91,95 @@        // comparing the versions as the kubectl command is only introduced in version v1.1.0:\n        // https://github.com/kubernetes/minikube/blob/v1.1.0/CHANGELOG.md\n        if (Ordering.Tuple3[Int, Int, Int].gteq((x, y, z), (1, 1, 0))) {\n          kubectlBasedKubernetesClientConf\n        } else {"
  },
  {
    "id" : "426025d2-4f58-46e1-83c7-14eb2d336d6e",
    "prId" : 30751,
    "prUrl" : "https://github.com/apache/spark/pull/30751#pullrequestreview-555745636",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "efe3d28f-2b2b-4985-baf0-039526bc91da",
        "parentId" : null,
        "authorId" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "body" : "Just for the next reviewer or code reader maybe add a comment about how the minikube version string sometimes containers a non-numeric suffix and this is intentionally being dropped by this regex.",
        "createdAt" : "2020-12-18T19:09:13Z",
        "updatedAt" : "2021-02-24T09:23:30Z",
        "lastEditedBy" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "tags" : [
        ]
      }
    ],
    "commit" : "a1fccb9cacf90d7430efc28f695216172cc7832c",
    "line" : 68,
    "diffHunk" : "@@ -1,1 +78,82 @@  def getKubernetesClient: DefaultKubernetesClient = {\n    // only the three-part version number is matched (the optional suffix like \"-beta.0\" is dropped)\n    val versionArrayOpt = \"\\\\d+\\\\.\\\\d+\\\\.\\\\d+\".r\n      .findFirstIn(minikubeVersionString.split(VERSION_PREFIX)(1))\n      .map(_.split('.').map(_.toInt))"
  },
  {
    "id" : "0fd27248-8bc1-4909-baea-72962449b81a",
    "prId" : 30751,
    "prUrl" : "https://github.com/apache/spark/pull/30751#pullrequestreview-599164440",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "612c365c-06cc-4acb-9f0c-481f9e555333",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Well, this logic seems to assume `kubectl config view` prints out only a single config. We should not assume that.\r\nTechnically, there are multiple configurations and `minikube` is just specified as the current context via `current-context: minikube`.",
        "createdAt" : "2021-02-26T00:42:47Z",
        "updatedAt" : "2021-02-26T00:43:53Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "a1fccb9cacf90d7430efc28f695216172cc7832c",
    "line" : 124,
    "diffHunk" : "@@ -1,1 +117,121 @@    val caString = outputs.find(_.contains(CA_PREFIX))\n    val clientCertString = outputs.find(_.contains(CLIENTCERT_PREFIX))\n    val clientKeyString = outputs.find(_.contains(CLIENTKEY_PREFIX))\n\n    assert(!apiVersionString.isEmpty && !serverString.isEmpty && !caString.isEmpty &&"
  },
  {
    "id" : "93a0dc83-178f-40d5-9537-1a6e630c8f26",
    "prId" : 30700,
    "prUrl" : "https://github.com/apache/spark/pull/30700#pullrequestreview-548812461",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e3f52fb0-d22e-46ed-8c3a-3837f9beba5d",
        "parentId" : null,
        "authorId" : "3a227965-84e0-47cf-9974-11293764f028",
        "body" : "For reviewers: Without this change,  the output of `minikube profile` is with the prefix `* ` .\r\n(e.g. `* minikube` rather than `minikube`) in case stderr is not tty.",
        "createdAt" : "2020-12-10T04:36:24Z",
        "updatedAt" : "2020-12-10T05:04:29Z",
        "lastEditedBy" : "3a227965-84e0-47cf-9974-11293764f028",
        "tags" : [
        ]
      }
    ],
    "commit" : "7231cbf8e9bd7a4b35aadd6faf84972fda3ea9e7",
    "line" : 42,
    "diffHunk" : "@@ -1,1 +129,133 @@  def executeMinikube(action: String, args: String*): Seq[String] = {\n    ProcessUtils.executeProcess(\n      Array(\"bash\", \"-c\", s\"MINIKUBE_IN_STYLE=true minikube $action ${args.mkString(\" \")}\"),\n      MINIKUBE_STARTUP_TIMEOUT_SECONDS).filter{x =>\n      !x.contains(\"There is a newer version of minikube\") &&"
  }
]