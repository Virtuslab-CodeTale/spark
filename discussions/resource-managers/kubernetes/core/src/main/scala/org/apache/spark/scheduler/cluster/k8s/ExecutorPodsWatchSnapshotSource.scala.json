[
  {
    "id" : "1d5bac32-4d76-48ab-bb6b-0f542fd30889",
    "prId" : 32221,
    "prUrl" : "https://github.com/apache/spark/pull/32221#pullrequestreview-638625330",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0dbd578a-ab4a-4bda-8420-8257b3d993ee",
        "parentId" : null,
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "> As I see the current log message is misleading. If this method with the exception is called then \"(this is expected if the application is shutting down.)\" part is not true. So I think we should at least change that.\r\n\r\nI guess @attilapiros comment is we are better to revise this log message? As this is exception case, it may not \"this is expected\".",
        "createdAt" : "2021-04-18T19:55:46Z",
        "updatedAt" : "2021-04-18T19:55:47Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      },
      {
        "id" : "480f2247-3efb-49cc-80ed-e1b6f7b15bee",
        "parentId" : "0dbd578a-ab4a-4bda-8420-8257b3d993ee",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Actually, that's what @attilapiros meant, but it's not in reality. As of now, it's frequently possible to observe K8s side exceptions, especially HTTP-related ones, during application termination after `SparkContext.close()` starts to doing several clean-ups.",
        "createdAt" : "2021-04-18T20:46:30Z",
        "updatedAt" : "2021-04-18T20:46:30Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "45dcc80f-124b-47fc-a13b-8fdefc9fdf8f",
        "parentId" : "0dbd578a-ab4a-4bda-8420-8257b3d993ee",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Although `expected` was there, the message doesn't mean that `Exception will happen always`. Instead, it means you may see `Exception` some cases. In this context of `onClose`, `WatcherException` already happened. So, `logWarning` says the users that this exception is not **unexpected** one.",
        "createdAt" : "2021-04-18T20:49:35Z",
        "updatedAt" : "2021-04-18T20:49:35Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "0c878cb9-2e0e-45bc-864f-528c6b682126",
        "parentId" : "0dbd578a-ab4a-4bda-8420-8257b3d993ee",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "BTW, @attilapiros and @viirya . If that is still your concern, I'd suggest to handle it in a separate PR. That looks pretty much orthogonal to `K8s client 5.3.0`. WDYT?",
        "createdAt" : "2021-04-18T20:50:47Z",
        "updatedAt" : "2021-04-18T22:21:50Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "a2f44ff1-4aa8-4557-b04b-6048ac61e839",
        "parentId" : "0dbd578a-ab4a-4bda-8420-8257b3d993ee",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "BTW, in this PR, the warning message of `onClose()` (without exception args) doesn't have `(this is expected if the application is...)` part.",
        "createdAt" : "2021-04-18T23:55:11Z",
        "updatedAt" : "2021-04-18T23:55:12Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "f02b1e7b-4066-4dab-899a-86883bfcfc7e",
        "parentId" : "0dbd578a-ab4a-4bda-8420-8257b3d993ee",
        "authorId" : "123cc67f-f678-49be-8742-95bc35d8c5c4",
        "body" : "> Actually, that's what @attilapiros meant, but it's not in reality. As of now, it's frequently possible to observe K8s side exceptions, especially HTTP-related ones, during application termination after `SparkContext.close()` starts to doing several clean-ups.\r\n\r\nIn this case I am fine to keep it as it is.",
        "createdAt" : "2021-04-19T08:59:58Z",
        "updatedAt" : "2021-04-19T09:00:13Z",
        "lastEditedBy" : "123cc67f-f678-49be-8742-95bc35d8c5c4",
        "tags" : [
        ]
      }
    ],
    "commit" : "e1c8707001abae1150d672f2fba34ef270769dba",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +60,64 @@\n    override def onClose(e: WatcherException): Unit = {\n      logWarning(\"Kubernetes client has been closed (this is expected if the application is\" +\n        \" shutting down.)\", e)\n    }"
  }
]