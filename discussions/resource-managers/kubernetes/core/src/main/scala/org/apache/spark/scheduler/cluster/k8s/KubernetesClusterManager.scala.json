[
  {
    "id" : "ca3ea671-3deb-418f-9ebb-11e6abbabcd7",
    "prId" : 24601,
    "prUrl" : "https://github.com/apache/spark/pull/24601#pullrequestreview-239301060",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "85fee66d-f38c-479b-8b98-37e3e166e9de",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "@Udbhav30 . Could you add a test case this your PR?",
        "createdAt" : "2019-05-20T05:42:42Z",
        "updatedAt" : "2020-01-20T09:41:18Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "3c9e2d82664aa0bd43b31977e65cacc385de6992",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +58,62 @@        sc.conf.get(KUBERNETES_DRIVER_MASTER_URL),\n        serviceAccountToken,\n        serviceAccountCaCrt)\n    } else {\n      (KUBERNETES_AUTH_CLIENT_MODE_PREFIX,"
  },
  {
    "id" : "4995d64c-0f83-4da4-a4c9-923984e654a5",
    "prId" : 24601,
    "prUrl" : "https://github.com/apache/spark/pull/24601#pullrequestreview-351984455",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "59760c78-b90a-41ef-87e8-ed5a9b4ea6cd",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "The current logic looks like this.\r\n1. The difference of this logic is returning `None` when the file doesn't exist.\r\n2. However, `None` is not used when the given `oauthTokenFileConf` points a valid file because it's called as `orElse`.\r\n```scala\r\n    val oauthTokenFile = sparkConf.getOption(oauthTokenFileConf)\r\n      .map(new File(_))\r\n      .orElse(defaultServiceAccountToken)\r\n```\r\n\r\nIs the above correct?",
        "createdAt" : "2020-01-24T07:39:22Z",
        "updatedAt" : "2020-01-24T07:39:22Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "5d2b8d44-5a4a-41de-b2ea-064b47746c81",
        "parentId" : "59760c78-b90a-41ef-87e8-ed5a9b4ea6cd",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "The existing code already tries to use the given file first. Where did you check the following?\r\n> If it does not exist, other configurations are allowed to use, such as spark.kubernetes.authenticate.driver.mounted.oauthTokenFile.",
        "createdAt" : "2020-01-24T07:46:46Z",
        "updatedAt" : "2020-01-24T07:50:36Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "ecbc9643-bad6-4f9d-8d19-74229e60ada4",
        "parentId" : "59760c78-b90a-41ef-87e8-ed5a9b4ea6cd",
        "authorId" : "a88f50e2-6440-4a6c-8883-3130888d05bc",
        "body" : "> The existing code already tries to use the given file first. Where did you check the following?\r\n> \r\n> > If it does not exist, other configurations are allowed to use, such as spark.kubernetes.authenticate.driver.mounted.oauthTokenFile.\r\n\r\nYes but still as we are passing 'KUBERNETES_SERVICE_ACCOUNT_TOKEN_PATH' to create the kubernetesClient , the kubernetes fabric client will use that service account path and will throw error as @wackxu mentioned.",
        "createdAt" : "2020-01-24T10:51:33Z",
        "updatedAt" : "2020-01-24T10:51:34Z",
        "lastEditedBy" : "a88f50e2-6440-4a6c-8883-3130888d05bc",
        "tags" : [
        ]
      },
      {
        "id" : "813c58b2-d5ef-4eae-950d-1542fc1baa2c",
        "parentId" : "59760c78-b90a-41ef-87e8-ed5a9b4ea6cd",
        "authorId" : "05133b68-6f4b-44cb-8545-1686d248ee24",
        "body" : " @Udbhav30 @dongjoon-hyun That is  what I means. Let's merge this as soon as possible",
        "createdAt" : "2020-02-03T01:07:34Z",
        "updatedAt" : "2020-02-03T01:07:34Z",
        "lastEditedBy" : "05133b68-6f4b-44cb-8545-1686d248ee24",
        "tags" : [
        ]
      }
    ],
    "commit" : "3c9e2d82664aa0bd43b31977e65cacc385de6992",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +54,58 @@        Some(new File(Config.KUBERNETES_SERVICE_ACCOUNT_TOKEN_PATH)).filter(_.exists)\n      val serviceAccountCaCrt =\n        Some(new File(Config.KUBERNETES_SERVICE_ACCOUNT_CA_CRT_PATH)).filter(_.exists)\n      (KUBERNETES_AUTH_DRIVER_MOUNTED_CONF_PREFIX,\n        sc.conf.get(KUBERNETES_DRIVER_MASTER_URL),"
  }
]