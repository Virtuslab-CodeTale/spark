[
  {
    "id" : "3c0a8ff2-f9c6-45f9-a5f6-bf1a1435215f",
    "prId" : 29354,
    "prUrl" : "https://github.com/apache/spark/pull/29354#pullrequestreview-462008715",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8b548c3b-31ef-4af4-a293-bb4c321346ba",
        "parentId" : null,
        "authorId" : "6e35521d-0def-4310-bc41-de4685fba931",
        "body" : "This commit moves to using native writer for avro files. Previously we had AvroSerializer => GenericAvroDatumWriter => Encoder. Now SparkAvroDatumWriter writes directly to the Encoder. Eg, previously we would first fill up a HashMap in AvroSerializer and then GenericAvroDatumWriter (ReflectAvroDatumWriter before the first commit in this PR) will write it out to the Encoder. With this change, we write it out directly to the Encoder. Similarly resolving unions does not need to happen twice anymore.\r\n\r\nWrite time improvements can be found in the attached [pdf](https://github.com/apache/spark/files/5025167/AvroBenchmarks.pdf) on pg 3 under column D.",
        "createdAt" : "2020-08-05T20:42:50Z",
        "updatedAt" : "2020-08-06T19:18:51Z",
        "lastEditedBy" : "6e35521d-0def-4310-bc41-de4685fba931",
        "tags" : [
        ]
      }
    ],
    "commit" : "054d60229e7a6eb31da1be3f23ac1f2b59a95261",
    "line" : 50,
    "diffHunk" : "@@ -1,1 +48,52 @@ * @tparam D\n */\nclass SparkAvroDatumWriter[D](rootAvroType: Schema, rootCatalystType: DataType, nullable: Boolean)\n    extends GenericDatumWriter[D](rootAvroType) with Logging {\n  def this(rootAvroType: Schema, rootCatalystType: DataType) {"
  }
]