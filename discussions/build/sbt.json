[
  {
    "id" : "5ad1841d-d8fb-4757-9053-35a6d6170adf",
    "prId" : 26757,
    "prUrl" : "https://github.com/apache/spark/pull/26757#pullrequestreview-327653590",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "961d0432-0e83-4e22-9ab9-bf05b0afc540",
        "parentId" : null,
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "Some of this is copied from the main sbt script. I'd rather not customize it further unless needed. \r\nLooks like this is already set in sbt-launch-lib.bash ... _if_ memory settings were specified. I agree that it doesn't then show up here. Honestly, just write in \"2048\" here in place of `$sbt_mem`",
        "createdAt" : "2019-12-04T18:56:54Z",
        "updatedAt" : "2019-12-04T18:56:54Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      },
      {
        "id" : "776d2aab-efb3-4eca-824a-687fd814d4d6",
        "parentId" : "961d0432-0e83-4e22-9ab9-bf05b0afc540",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "+1 for @srowen 's advice.",
        "createdAt" : "2019-12-04T19:11:26Z",
        "updatedAt" : "2019-12-04T19:11:26Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "d01eb34e-3048-4f68-a89b-3af1cfc0234b",
        "parentId" : "961d0432-0e83-4e22-9ab9-bf05b0afc540",
        "authorId" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "body" : "I also copied this from the latest stable sbt script",
        "createdAt" : "2019-12-05T00:43:16Z",
        "updatedAt" : "2019-12-05T00:43:16Z",
        "lastEditedBy" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "tags" : [
        ]
      },
      {
        "id" : "e9b93459-7bfb-4106-b486-3640455ab910",
        "parentId" : "961d0432-0e83-4e22-9ab9-bf05b0afc540",
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "OK, it's not a big deal to reference the declaration in the other file. But what are the other changes from?",
        "createdAt" : "2019-12-05T00:45:01Z",
        "updatedAt" : "2019-12-05T00:45:02Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      },
      {
        "id" : "55b6e2b3-34e4-4fb9-8768-4105d08a2273",
        "parentId" : "961d0432-0e83-4e22-9ab9-bf05b0afc540",
        "authorId" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "body" : "they also from the new sbt script",
        "createdAt" : "2019-12-05T00:47:34Z",
        "updatedAt" : "2019-12-05T00:47:34Z",
        "lastEditedBy" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "tags" : [
        ]
      },
      {
        "id" : "c8041384-6c4e-40fa-923e-fa1fdc3a92b9",
        "parentId" : "961d0432-0e83-4e22-9ab9-bf05b0afc540",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "If this PR aims to resync with `SBT 1.3.4`, shall we remove `, which is $(get_mem_opts $sbt_default_mem)`  part completely.\r\n\r\n**SBT 0.13.18**\r\n```\r\n$ ./sbt -h | grep mem\r\n  -mem    <integer>  set memory options (default: 1024, which is -Xms1024m -Xmx1024m -XX:ReservedCodeCacheSize=128m -XX:MaxMetaspaceSize=256m)\r\n```\r\n\r\n**SBT 1.3.4**\r\n```\r\n$ bin/sbt -h | grep mem\r\n  --mem    <integer>  set memory options (default: 1024)\r\n```\r\n\r\nSBT 1.3.4 doesn't have `get_mem_opts` at all, but it seems that we need still `get_mem_opts`.",
        "createdAt" : "2019-12-05T04:35:04Z",
        "updatedAt" : "2019-12-05T04:37:28Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "bb5ae762-9435-4a08-99d0-faacef86472f",
        "parentId" : "961d0432-0e83-4e22-9ab9-bf05b0afc540",
        "authorId" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "body" : "Not really aiming to resync, `declare sbt_default_mem=1024` is exists in the script `sbt-launch-lib.bash` of `sbt 0.13.18`,  we might have not copied it before. metioned `sbt 1.3.4` here, just to keep up to date.",
        "createdAt" : "2019-12-05T08:58:37Z",
        "updatedAt" : "2019-12-05T09:00:24Z",
        "lastEditedBy" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "tags" : [
        ]
      },
      {
        "id" : "01dda385-7b6a-4b10-a0e3-7b44c9bc3adb",
        "parentId" : "961d0432-0e83-4e22-9ab9-bf05b0afc540",
        "authorId" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "body" : "```\r\ndeclare init_sbt_version=\"0.13.18\"\r\ndeclare sbt_default_mem=1024\r\n```",
        "createdAt" : "2019-12-05T08:59:23Z",
        "updatedAt" : "2019-12-05T08:59:23Z",
        "lastEditedBy" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "tags" : [
        ]
      },
      {
        "id" : "52dfab28-4d65-4961-b6f9-0a8e828cef3a",
        "parentId" : "961d0432-0e83-4e22-9ab9-bf05b0afc540",
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "This doesn't update to 1.3.4 at all, no. (Moving to sbt 1.x is a fairly significant change; I couldn't get it to work a year ago) The script here is bits and pieces of an old sbt 0.x script. This is just fixing the mem message, and happens to mimic some lines from a newer sbt script.\r\n\r\nIncidentally, I kind of would like to remove the build/mvn and build/sbt scripts anyway. It works fine with recent mvn and I don't think build tools are hard to install for developers. Although installing sbt locally installs a new version, it still does understand the 0.13-based build. I don't know how much people are attached to this 'built in' wrapper, and I don't feel strongly about.\r\n\r\nOf course I'd also like to stop supporting 2 builds and would remove sbt. But that may wait until we face problems keeping the current one working with Scala 2.13.x or something.\r\n\r\nThese are both quite separate issues.",
        "createdAt" : "2019-12-05T11:37:03Z",
        "updatedAt" : "2019-12-05T11:37:03Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      },
      {
        "id" : "01cf2ca2-7d5f-4786-8586-f165d56b8c09",
        "parentId" : "961d0432-0e83-4e22-9ab9-bf05b0afc540",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "What I meant was the updated code came the upstream~ I know this is not 1.3.8.\r\nI'm also +1 for removing these wrappers. That's the reason to be reluctant to invest(make a commit on this) here.",
        "createdAt" : "2019-12-05T15:50:18Z",
        "updatedAt" : "2019-12-05T15:50:18Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "1818758b2d7e0b2b89dfbacf69a12f7494fb6780",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +67,71 @@  -sbt-boot  <path>  path to shared boot directory (default: ~/.sbt/boot in 0.11 series)\n  -ivy       <path>  path to local Ivy repository (default: ~/.ivy2)\n  -mem    <integer>  set memory options (default: $sbt_default_mem, which is $(get_mem_opts $sbt_default_mem))\n  -no-share          use all local caches; no sharing\n  -no-global         uses global caches, but does not use global ~/.sbt directory."
  }
]