[
  {
    "id" : "4c435f7d-52a4-4c55-b1fc-2663b7b92ddc",
    "prId" : 28196,
    "prUrl" : "https://github.com/apache/spark/pull/28196#pullrequestreview-391974688",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "384d2fe3-700f-4499-a268-34fccd152b8d",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "How about adding one more CTE example in `CREATE VIEW`?",
        "createdAt" : "2020-04-13T05:46:44Z",
        "updatedAt" : "2020-04-13T15:47:17Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "18308971-9be8-4e2a-9485-20432360bc3d",
        "parentId" : "384d2fe3-700f-4499-a268-34fccd152b8d",
        "authorId" : "99765afe-8dbe-4d5f-9ad3-d5bc40f0462b",
        "body" : "Will do",
        "createdAt" : "2020-04-13T06:10:14Z",
        "updatedAt" : "2020-04-13T15:47:17Z",
        "lastEditedBy" : "99765afe-8dbe-4d5f-9ad3-d5bc40f0462b",
        "tags" : [
        ]
      }
    ],
    "commit" : "4cf986b4ebbf60217ed138555693f8ffb20ebe24",
    "line" : 109,
    "diffHunk" : "@@ -1,1 +124,128 @@  +---+\n{% endhighlight %}\n\n### Related Statements\n"
  },
  {
    "id" : "cbab88ea-b4ca-4573-b43f-dd445274ee62",
    "prId" : 28196,
    "prUrl" : "https://github.com/apache/spark/pull/28196#pullrequestreview-392625125",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d5c3c67e-b79a-41c2-a409-29b1f44f3176",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "We still need to describe this? I personally think users can see the migration guide for these kinds of legacy behaviours.",
        "createdAt" : "2020-04-13T23:53:34Z",
        "updatedAt" : "2020-04-13T23:53:34Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "a7472111-f143-4c4e-b920-d615f7c28da2",
        "parentId" : "d5c3c67e-b79a-41c2-a409-29b1f44f3176",
        "authorId" : "99765afe-8dbe-4d5f-9ad3-d5bc40f0462b",
        "body" : "Thanks for your comment.\r\nI prefer to document the default behavior. I actually thought the default behavior is \"inner CTE definitions take precedence over outer definitions\". When I tried the example, I was surprised to see the Exception, then I looked the code and found out I need to set spark.sql.legacy.ctePrecedencePolicy to make it work. So I guess it is worth mentioning the default here. ",
        "createdAt" : "2020-04-14T06:04:26Z",
        "updatedAt" : "2020-04-14T06:04:26Z",
        "lastEditedBy" : "99765afe-8dbe-4d5f-9ad3-d5bc40f0462b",
        "tags" : [
        ]
      }
    ],
    "commit" : "4cf986b4ebbf60217ed138555693f8ffb20ebe24",
    "line" : 92,
    "diffHunk" : "@@ -1,1 +107,111 @@  +---+---+---+---+\n\n-- If name conflict is detected in nested CTE, then AnalysisException is thrown by default.\n-- SET spark.sql.legacy.ctePrecedencePolicy = CORRECTED (which is recommended),\n-- inner CTE definitions take precedence over outer definitions."
  }
]