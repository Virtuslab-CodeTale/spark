[
  {
    "id" : "a42869dd-ca31-4c81-a6cf-e9e35c64549b",
    "prId" : 33691,
    "prUrl" : "https://github.com/apache/spark/pull/33691#pullrequestreview-727794453",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d27c5ab8-f4de-4013-b941-e30298588164",
        "parentId" : null,
        "authorId" : "0c28e5da-df9b-4076-bb67-3b6878f1f4ce",
        "body" : "Does it work? We check the type of gapDuration and expect str type here.\r\n\r\nhttps://github.com/apache/spark/blob/f7c85b855ba99757c750dd0a2f7aced788c89374/python/pyspark/sql/functions.py#L2336-L2368\r\n\r\nhttps://github.com/apache/spark/blob/bbf988bd73b00d18dd1d443f225b3915a2c4433f/python/pyspark/sql/functions.pyi#L139\r\n",
        "createdAt" : "2021-08-11T10:30:44Z",
        "updatedAt" : "2021-08-11T10:50:47Z",
        "lastEditedBy" : "0c28e5da-df9b-4076-bb67-3b6878f1f4ce",
        "tags" : [
        ]
      },
      {
        "id" : "535bc6f9-7ed7-44b3-9ec8-8d3724edb710",
        "parentId" : "d27c5ab8-f4de-4013-b941-e30298588164",
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "Oh, I don't realize python `session_window` doesn't accept an expression...",
        "createdAt" : "2021-08-11T18:11:06Z",
        "updatedAt" : "2021-08-11T18:11:07Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      }
    ],
    "commit" : "51e49ca63a812f2c220f32cdd284e6f46e863fe7",
    "line" : 70,
    "diffHunk" : "@@ -1,1 +1190,1194 @@events = ...  # streaming DataFrame of schema { timestamp: Timestamp, userId: String }\n\nsession_window = session_window(events.timestamp, \\\n    F.when(events.userId == \"user1\", \"5 seconds\") \\\n    .when(events.userId == \"user2\", \"20 seconds\").otherwise(\"5 minutes\"))"
  },
  {
    "id" : "383c6465-26e3-43a9-88c7-92bc1d97b6c1",
    "prId" : 33433,
    "prUrl" : "https://github.com/apache/spark/pull/33433#pullrequestreview-710615504",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c0de3fa9-4dd2-4254-a40a-cb9d242aba39",
        "parentId" : null,
        "authorId" : "cd38bd5a-0fae-4d8e-8acd-36dc13753759",
        "body" : "Do we need to mention that the `session_window` function should be a grouping key and should not be the only grouping key?",
        "createdAt" : "2021-07-20T13:36:30Z",
        "updatedAt" : "2021-07-20T13:36:31Z",
        "lastEditedBy" : "cd38bd5a-0fae-4d8e-8acd-36dc13753759",
        "tags" : [
        ]
      },
      {
        "id" : "470124e9-dcbd-46d6-a636-a489d60b5384",
        "parentId" : "c0de3fa9-4dd2-4254-a40a-cb9d242aba39",
        "authorId" : "0c28e5da-df9b-4076-bb67-3b6878f1f4ce",
        "body" : "Actually there's no such restriction, like we have no such restriction for `window` function. You can use `session_window` anywhere we expect expression. We just don't calculate any windowing aggregation if the function is not used in groping key, same as we do for `window` function.\r\n\r\nIt should not be the only grouping key <= this restriction is only applied to the streaming query. In batch query we allow global window.",
        "createdAt" : "2021-07-20T13:49:56Z",
        "updatedAt" : "2021-07-20T13:49:56Z",
        "lastEditedBy" : "0c28e5da-df9b-4076-bb67-3b6878f1f4ce",
        "tags" : [
        ]
      },
      {
        "id" : "5b4d0765-724e-4ba9-9725-65f15e32770b",
        "parentId" : "c0de3fa9-4dd2-4254-a40a-cb9d242aba39",
        "authorId" : "cd38bd5a-0fae-4d8e-8acd-36dc13753759",
        "body" : "Ah yea make sense, I only considered the SS scenario. ",
        "createdAt" : "2021-07-20T14:00:05Z",
        "updatedAt" : "2021-07-20T14:00:05Z",
        "lastEditedBy" : "cd38bd5a-0fae-4d8e-8acd-36dc13753759",
        "tags" : [
        ]
      }
    ],
    "commit" : "5f625ebde16678fe3c90859436e8c05063427f50",
    "line" : 24,
    "diffHunk" : "@@ -1,1 +1084,1088 @@received within gap duration after receiving the latest input.\n\nSession window uses `session_window` function. The usage of the function is similar to the `window` function.\n\n<div class=\"codetabs\">"
  }
]