[
  {
    "id" : "1fd122bd-7689-4863-aa65-c5cc9ca5e3e8",
    "prId" : 30725,
    "prUrl" : "https://github.com/apache/spark/pull/30725#pullrequestreview-556128709",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2c517ef4-88b4-4068-8c36-cde526633a8c",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "is it better to put a size limitation for this cache? then soft reference should also be fine.",
        "createdAt" : "2020-12-16T08:34:07Z",
        "updatedAt" : "2020-12-16T08:34:25Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "34cc4d6d-ba7a-4c2c-979f-a822dec74ebf",
        "parentId" : "2c517ef4-88b4-4068-8c36-cde526633a8c",
        "authorId" : "8de20372-3c43-4f6b-838b-45ccb852019b",
        "body" : "Use limited size, soft-reference cache can reduce the number of YGC than weak-reference.\r\nBut what size should it be limited to?\r\nIn fact, the driver rarely has the opportunity to reuse the jobconf of the cache, and it makes sense to share the jobconf in the executor.",
        "createdAt" : "2020-12-16T09:29:20Z",
        "updatedAt" : "2020-12-16T09:29:20Z",
        "lastEditedBy" : "8de20372-3c43-4f6b-838b-45ccb852019b",
        "tags" : [
        ]
      },
      {
        "id" : "a8603d02-4920-4f0d-b9bd-a2de138a065d",
        "parentId" : "2c517ef4-88b4-4068-8c36-cde526633a8c",
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "Whether or not a limit is in place (which could also be a good back-stop to prevent a huge cache), this could be fine - I think the only risk is that weak references are quite readily reclaimed, so this risks losing most of the caching.",
        "createdAt" : "2020-12-21T04:55:17Z",
        "updatedAt" : "2020-12-21T04:55:17Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      }
    ],
    "commit" : "5c125cdd2af39d8de5187d11f4172c0cf8fdd6f9",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +78,82 @@  // (e.g., HadoopRDD uses this to cache JobConfs).\n  private[spark] val hadoopJobMetadata =\n    CacheBuilder.newBuilder().weakValues().build[String, AnyRef]().asMap()\n\n  private[spark] var driverTmpDir: Option[String] = None"
  }
]