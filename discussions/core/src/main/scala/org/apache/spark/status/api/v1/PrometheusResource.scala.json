[
  {
    "id" : "36f01e6f-7225-4478-828c-b98d55775129",
    "prId" : 28510,
    "prUrl" : "https://github.com/apache/spark/pull/28510#pullrequestreview-409699309",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "13d24ade-dba0-4c4c-953c-743f240da312",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Since these are newly added metrics, the key name is adjusted slightly according to the Prometheus style.",
        "createdAt" : "2020-05-12T05:00:45Z",
        "updatedAt" : "2020-05-12T05:00:46Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "719ca238fbb3c06b0fc8d7fc14c2eb7ca9059546",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +51,55 @@        \"executor_id\" -> executor.id\n      ).map { case (k, v) => s\"\"\"$k=\"$v\"\"\"\" }.mkString(\"{\", \", \", \"}\")\n      sb.append(s\"${prefix}rddBlocks$labels ${executor.rddBlocks}\\n\")\n      sb.append(s\"${prefix}memoryUsed_bytes$labels ${executor.memoryUsed}\\n\")\n      sb.append(s\"${prefix}diskUsed_bytes$labels ${executor.diskUsed}\\n\")"
  },
  {
    "id" : "5e82f052-ee9f-46c0-a325-d55d4cee9744",
    "prId" : 26060,
    "prUrl" : "https://github.com/apache/spark/pull/26060#pullrequestreview-299154441",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3ec7c592-45bc-4596-9a04-e9e5b0abf55e",
        "parentId" : null,
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "Not related to this PR. But why they all end with `_Count`? For `rddBlocks`, it is ok, but some seems not suitable, like `memoryUsed_Count`.",
        "createdAt" : "2019-10-09T03:25:46Z",
        "updatedAt" : "2019-10-09T03:27:03Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      },
      {
        "id" : "739d4ea6-1dd5-4bc6-9bfa-cf1b0327bd8e",
        "parentId" : "3ec7c592-45bc-4596-9a04-e9e5b0abf55e",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Thank you for review, @viirya . Yes. Of course, we rename it freely because we start to support them natively.",
        "createdAt" : "2019-10-09T03:32:35Z",
        "updatedAt" : "2019-10-09T03:32:35Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "907692275c3c560dc04f7305dc26c664828ed9b5",
    "line" : 29,
    "diffHunk" : "@@ -1,1 +49,53 @@      ).map { case (k, v) => s\"\"\"$k=\"$v\"\"\"\" }.mkString(\"{\", \", \", \"}\")\n      sb.append(s\"${prefix}rddBlocks_Count$labels ${executor.rddBlocks}\\n\")\n      sb.append(s\"${prefix}memoryUsed_Count$labels ${executor.memoryUsed}\\n\")\n      sb.append(s\"${prefix}diskUsed_Count$labels ${executor.diskUsed}\\n\")\n      sb.append(s\"${prefix}totalCores_Count$labels ${executor.totalCores}\\n\")"
  },
  {
    "id" : "6b1c60e5-2bda-4e67-86b3-441f6df59524",
    "prId" : 26060,
    "prUrl" : "https://github.com/apache/spark/pull/26060#pullrequestreview-299745225",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d91310b7-b453-4462-b205-1b3fb92aca8b",
        "parentId" : null,
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "I am not sure if application name is needed, because you have application id already.",
        "createdAt" : "2019-10-09T22:25:49Z",
        "updatedAt" : "2019-10-09T22:32:54Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      },
      {
        "id" : "5fdcfc5f-57ab-4cd8-b3c4-505b39b290cd",
        "parentId" : "d91310b7-b453-4462-b205-1b3fb92aca8b",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "This is the only field *human-readable* to distinguish the jobs.",
        "createdAt" : "2019-10-09T23:05:35Z",
        "updatedAt" : "2019-10-09T23:05:35Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "907692275c3c560dc04f7305dc26c664828ed9b5",
    "line" : 25,
    "diffHunk" : "@@ -1,1 +45,49 @@      val labels = Seq(\n        \"application_id\" -> store.applicationInfo.id,\n        \"application_name\" -> store.applicationInfo.name,\n        \"executor_id\" -> executor.id\n      ).map { case (k, v) => s\"\"\"$k=\"$v\"\"\"\" }.mkString(\"{\", \", \", \"}\")"
  },
  {
    "id" : "a58ad051-8850-4363-b930-cdc411cf8ddd",
    "prId" : 26060,
    "prUrl" : "https://github.com/apache/spark/pull/26060#pullrequestreview-299761778",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "eb76a6f8-3eb3-42cc-97d8-4bbf0a53538c",
        "parentId" : null,
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "Actually `prefix` is fixed? So they are now the same metrics. And application id, executor id now are labels on them?\r\n\r\nDoes it have bad impact on the metrics usage later? Because now all applications are recorded under the same metrics. I am not sure how Prometheus processes, but naturally I'd think Prometheus needs to search specified application id in the metrics of all applications.\r\n\r\nPreviously you have appId and executor id in metric name.",
        "createdAt" : "2019-10-09T22:32:46Z",
        "updatedAt" : "2019-10-09T22:33:25Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      },
      {
        "id" : "044081d8-49ac-448e-882e-cd874c9df925",
        "parentId" : "eb76a6f8-3eb3-42cc-97d8-4bbf0a53538c",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Right. The redundant information is moved to labels.\r\n> Actually prefix is fixed? So they are now the same metrics. And application id, executor id now are labels on them?\r\n\r\nNo. Prometheus query language support to handle them individually.\r\n> Does it have bad impact on the metrics usage later? Because now all applications are recorded under the same metrics.",
        "createdAt" : "2019-10-09T23:08:05Z",
        "updatedAt" : "2019-10-09T23:08:05Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "b049091e-25e2-4f6c-b6b4-99e797c02c55",
        "parentId" : "eb76a6f8-3eb3-42cc-97d8-4bbf0a53538c",
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "> No. Prometheus query language support to handle them individually.\r\n\r\nYes. But I am wondering is, now all numbers from all applications are recorded under same metric. To retrieve number for specified application, does not Prometheus need to search it among all applications' metric numbers?",
        "createdAt" : "2019-10-09T23:56:59Z",
        "updatedAt" : "2019-10-09T23:56:59Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      },
      {
        "id" : "38877d6c-99bc-43bb-8542-b10f2ace2dad",
        "parentId" : "eb76a6f8-3eb3-42cc-97d8-4bbf0a53538c",
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "I may misunderstand Prometheus's approach. If so, then this might not be a problem.",
        "createdAt" : "2019-10-09T23:57:40Z",
        "updatedAt" : "2019-10-09T23:57:40Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      },
      {
        "id" : "7e297079-6c6e-48a4-90ae-cdf0ac22f418",
        "parentId" : "eb76a6f8-3eb3-42cc-97d8-4bbf0a53538c",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "For that `Prometheus` question, different labels mean different time-series in `Prometheus`.\r\n> Prometheus fundamentally stores all data as time series: streams of timestamped values belonging to the same metric and the same set of labeled dimensions.\r\n\r\nHere are the reference for the details~\r\n- https://prometheus.io/docs/concepts/data_model/\r\n- https://prometheus.io/docs/practices/naming/#labels",
        "createdAt" : "2019-10-10T00:08:56Z",
        "updatedAt" : "2019-10-10T00:08:56Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "907692275c3c560dc04f7305dc26c664828ed9b5",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +48,52 @@        \"executor_id\" -> executor.id\n      ).map { case (k, v) => s\"\"\"$k=\"$v\"\"\"\" }.mkString(\"{\", \", \", \"}\")\n      sb.append(s\"${prefix}rddBlocks_Count$labels ${executor.rddBlocks}\\n\")\n      sb.append(s\"${prefix}memoryUsed_Count$labels ${executor.memoryUsed}\\n\")\n      sb.append(s\"${prefix}diskUsed_Count$labels ${executor.diskUsed}\\n\")"
  }
]