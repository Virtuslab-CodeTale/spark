[
  {
    "id" : "22cc1e9e-fc63-4400-bf70-41b337436698",
    "prId" : 31256,
    "prUrl" : "https://github.com/apache/spark/pull/31256#pullrequestreview-571905313",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "217fea12-d33c-4486-9088-6daeabdcd131",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "When `cachedBlocks.empty == true`, this will be `Long.MaxValue`. That's wrong, isn't it, @hanyucui ?",
        "createdAt" : "2021-01-20T06:08:18Z",
        "updatedAt" : "2021-01-20T06:08:18Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "7d933d98-a1a0-4def-943f-35e388e2024c",
        "parentId" : "217fea12-d33c-4486-9088-6daeabdcd131",
        "authorId" : "b4586f54-4dcf-4d45-99ee-e2fb177c113c",
        "body" : "@dongjoon-hyun Yeah, you are right. This is not a solution but only an illustration. I wish there was a way to prevent this from bothering admins.\r\n\r\nIn my case, I enable dynamic allocation on K8s. I set `spark.dynamicAllocation.shuffleTracking.timeout` to a small number so that I can kill the executors earlier but set `spark.dynamicAllocation.cachedExecutorIdleTimeout` to a larger value since some users would like to keep their cached data around for longer. I expected the executors to be killed when the larger timeout is hit, not the smaller one, but the current behavior is the opposite. I understand different users have different requirements and this might totally make sense for them. No action is needed on your side -- I will think it through first.",
        "createdAt" : "2021-01-20T06:21:13Z",
        "updatedAt" : "2021-01-20T06:21:14Z",
        "lastEditedBy" : "b4586f54-4dcf-4d45-99ee-e2fb177c113c",
        "tags" : [
        ]
      },
      {
        "id" : "b9d8e558-7b13-4e68-a3da-30387216721f",
        "parentId" : "217fea12-d33c-4486-9088-6daeabdcd131",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "I understand your opinion, but this feature is not designed like that originally.",
        "createdAt" : "2021-01-20T06:30:54Z",
        "updatedAt" : "2021-01-20T06:30:54Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "b78d8d6f196b9f5a194acf87f0e2386366d0f712",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +547,551 @@            Long.MaxValue\n          }\n          math.max(_cacheTimeout, _shuffleTimeout)\n        } else {\n          idleTimeoutNs"
  },
  {
    "id" : "85ec08f2-28a7-4ab7-8550-210e2a238a95",
    "prId" : 31125,
    "prUrl" : "https://github.com/apache/spark/pull/31125#pullrequestreview-567155380",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "27773f60-a2b1-4d5c-9752-9217941034a4",
        "parentId" : null,
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "Just double checking you're sure these work in 2.13? b/c I added a lot of calls like this that will be redundant in 2.12 but not 2.13. (Not saying this one is necessary, particularly.)",
        "createdAt" : "2021-01-11T19:47:33Z",
        "updatedAt" : "2021-01-11T19:47:33Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      },
      {
        "id" : "0db03fc1-c7a5-4f3d-a6f5-9cd0849de42b",
        "parentId" : "27773f60-a2b1-4d5c-9752-9217941034a4",
        "authorId" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "body" : "Yes, I'm sure this conversion is redundant, the type of `shuffleStages` is `Seq[(Int, Int)]` in Scala 2.13, and I run \r\n`mvn clean install -Pscala-2.13 -pl core -am` locally, all test passed in core module\r\n\r\n```\r\nRun completed in 36 minutes, 54 seconds.\r\nTotal number of tests run: 2710\r\nSuites: completed 270, aborted 0\r\nTests: succeeded 2710, failed 0, canceled 4, ignored 7, pending 0\r\nAll tests passed.\r\n```\r\nI will do more local tests to verify other changes today",
        "createdAt" : "2021-01-12T02:30:31Z",
        "updatedAt" : "2021-01-12T02:38:18Z",
        "lastEditedBy" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "tags" : [
        ]
      },
      {
        "id" : "bca6eccc-dfc8-45e9-a87a-87c54d7dcb01",
        "parentId" : "27773f60-a2b1-4d5c-9752-9217941034a4",
        "authorId" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "body" : "`mvn clean install -Phadoop-3.2 -Phive-2.3 -Phadoop-cloud -Pmesos -Pyarn -Pkinesis-asl -Phive-thriftserver -Pspark-ganglia-lgpl -Pkubernetes -Phive -Pscala-2.13 -pl graphx`\r\n\r\nall test passed\r\n\r\n```\r\nRun completed in 2 minutes, 24 seconds.\r\nTotal number of tests run: 108\r\nSuites: completed 19, aborted 0\r\nTests: succeeded 108, failed 0, canceled 0, ignored 0, pending 0\r\nAll tests passed.\r\n```",
        "createdAt" : "2021-01-12T04:07:41Z",
        "updatedAt" : "2021-01-12T04:07:42Z",
        "lastEditedBy" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "tags" : [
        ]
      },
      {
        "id" : "f524be35-ca85-4a33-aeb0-07cbd7eb94ba",
        "parentId" : "27773f60-a2b1-4d5c-9752-9217941034a4",
        "authorId" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "body" : "`mvn clean install -Phadoop-3.2 -Phive-2.3 -Phadoop-cloud -Pmesos -Pyarn -Pkinesis-asl -Phive-thriftserver -Pspark-ganglia-lgpl -Pkubernetes -Phive -Pscala-2.13 -pl mllib\r\n`\r\nall test passed\r\n```\r\nRun completed in 28 minutes, 39 seconds.\r\nTotal number of tests run: 1627\r\nSuites: completed 206, aborted 0\r\nTests: succeeded 1627, failed 0, canceled 0, ignored 7, pending 0\r\nAll tests passed.\r\n```",
        "createdAt" : "2021-01-12T05:54:12Z",
        "updatedAt" : "2021-01-12T05:54:12Z",
        "lastEditedBy" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "tags" : [
        ]
      },
      {
        "id" : "1a253447-b0f9-45d3-901f-c981d82a7c14",
        "parentId" : "27773f60-a2b1-4d5c-9752-9217941034a4",
        "authorId" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "body" : "`mvn clean install -Phadoop-3.2 -Phive-2.3 -Phadoop-cloud -Pmesos -Pyarn -Pkinesis-asl -Phive-thriftserver -Pspark-ganglia-lgpl -Pkubernetes -Phive -Pscala-2.13 -pl mllib-local`\r\n\r\nall test passed.\r\n\r\n```\r\nRun completed in 2 seconds, 18 milliseconds.\r\nTotal number of tests run: 95\r\nSuites: completed 9, aborted 0\r\nTests: succeeded 95, failed 0, canceled 0, ignored 0, pending 0\r\nAll tests passed.\r\n```\r\n",
        "createdAt" : "2021-01-12T06:31:47Z",
        "updatedAt" : "2021-01-12T06:31:47Z",
        "lastEditedBy" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "tags" : [
        ]
      },
      {
        "id" : "86d44aee-4fb9-43ab-97d3-675a68cd226e",
        "parentId" : "27773f60-a2b1-4d5c-9752-9217941034a4",
        "authorId" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "body" : "`mvn clean install -Phadoop-3.2 -Phive-2.3 -Phadoop-cloud -Pmesos -Pyarn -Pkinesis-asl -Phive-thriftserver -Pspark-ganglia-lgpl -Pkubernetes -Phive -Pscala-2.13 -pl sql/catalyst`\r\n\r\nall test passed.\r\n\r\n```\r\nRun completed in 12 minutes, 27 seconds.\r\nTotal number of tests run: 4718\r\nSuites: completed 261, aborted 0\r\nTests: succeeded 4718, failed 0, canceled 0, ignored 5, pending 0\r\nAll tests passed.\r\n```",
        "createdAt" : "2021-01-12T07:01:03Z",
        "updatedAt" : "2021-01-12T07:01:03Z",
        "lastEditedBy" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "tags" : [
        ]
      },
      {
        "id" : "30aa76f6-a393-4206-a567-a1419d33cc2c",
        "parentId" : "27773f60-a2b1-4d5c-9752-9217941034a4",
        "authorId" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "body" : "`mvn clean install -Phadoop-3.2 -Phive-2.3 -Phadoop-cloud -Pmesos -Pyarn -Pkinesis-asl -Phive-thriftserver -Pspark-ganglia-lgpl -Pkubernetes -Phive -Pscala-2.13 -pl sql/core`\r\n\r\nall test passed.\r\n\r\n```\r\nRun completed in 1 hour, 38 minutes, 11 seconds.\r\nTotal number of tests run: 9185\r\nSuites: completed 406, aborted 0\r\nTests: succeeded 9185, failed 0, canceled 1, ignored 51, pending 0\r\nAll tests passed.\r\n```",
        "createdAt" : "2021-01-12T08:54:33Z",
        "updatedAt" : "2021-01-12T08:54:55Z",
        "lastEditedBy" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "tags" : [
        ]
      },
      {
        "id" : "63513e98-4a90-4839-a877-c5b06839dc65",
        "parentId" : "27773f60-a2b1-4d5c-9752-9217941034a4",
        "authorId" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "body" : "some related modules that have not been verified today : `hive`, `hive-thriftserver` and `yarn`",
        "createdAt" : "2021-01-12T12:45:23Z",
        "updatedAt" : "2021-01-12T12:45:23Z",
        "lastEditedBy" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "tags" : [
        ]
      },
      {
        "id" : "c44708dc-ac92-4eb4-984b-09371b839da6",
        "parentId" : "27773f60-a2b1-4d5c-9752-9217941034a4",
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "Do you want to check out the other modules first and do this all at once?",
        "createdAt" : "2021-01-12T14:51:22Z",
        "updatedAt" : "2021-01-12T14:51:23Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      },
      {
        "id" : "50bb3272-b612-4d43-9126-5f99f9d42d8c",
        "parentId" : "27773f60-a2b1-4d5c-9752-9217941034a4",
        "authorId" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "body" : "Yes, I'll check these today",
        "createdAt" : "2021-01-13T02:37:11Z",
        "updatedAt" : "2021-01-13T02:37:11Z",
        "lastEditedBy" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "tags" : [
        ]
      },
      {
        "id" : "1702fbf9-0290-489d-942d-566594203e03",
        "parentId" : "27773f60-a2b1-4d5c-9752-9217941034a4",
        "authorId" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "body" : "@srowen All modules are verified and add new Jira SPARK-34098",
        "createdAt" : "2021-01-13T12:03:29Z",
        "updatedAt" : "2021-01-13T12:08:55Z",
        "lastEditedBy" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "tags" : [
        ]
      }
    ],
    "commit" : "a4e44c21657de5c36c3a6fe18eb0ce2f6c6c3749",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +228,232 @@\n    if (updateExecutors) {\n      val activeShuffleIds = shuffleStages.map(_._2)\n      var needTimeoutUpdate = false\n      val activatedExecs = new ExecutorIdCollector()"
  },
  {
    "id" : "1a344104-811a-4328-8c3a-d4d4efe7a0c7",
    "prId" : 30795,
    "prUrl" : "https://github.com/apache/spark/pull/30795#pullrequestreview-555580173",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "df1f35fe-a91b-4c62-9a0c-ed4e17831115",
        "parentId" : null,
        "authorId" : "bea80117-7be3-4703-8d54-02b7bf73632c",
        "body" : "we should expand this to state excluded for entire application (I realize HealthTracker implies this but would like to be more explicit), does not include excluded within the stage level.",
        "createdAt" : "2020-12-18T15:28:24Z",
        "updatedAt" : "2020-12-18T16:06:17Z",
        "lastEditedBy" : "bea80117-7be3-4703-8d54-02b7bf73632c",
        "tags" : [
        ]
      }
    ],
    "commit" : "75cdd1e334c15c8af89c9b0d283bedf12d0f33ee",
    "line" : 165,
    "diffHunk" : "@@ -1,1 +574,578 @@    var decommissioning: Boolean = false\n    var hasActiveShuffle: Boolean = false\n    // whether the executor is temporarily excluded by the `HealthTracker`\n    var excluded: Boolean = false\n"
  }
]