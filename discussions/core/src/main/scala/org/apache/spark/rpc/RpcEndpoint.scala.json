[
  {
    "id" : "330061a1-230a-4a33-a6a5-1338408dd1db",
    "prId" : 26059,
    "prUrl" : "https://github.com/apache/spark/pull/26059#pullrequestreview-303358480",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8a6cee66-0d86-440e-b1af-ebcb27083765",
        "parentId" : null,
        "authorId" : "e913f9af-103d-40d4-976e-9aa8e12e7211",
        "body" : "I'm trying to wrap my head around what happens if you create an `IsolatedRpcEndpoint` with threadCount() > 1, given the code in `Inbox` which checks for inheritance from `ThreadSafeRpcEndpoint`: https://github.com/apache/spark/blob/2b3c3793c97dc0e48f1e098c6f1038f51607b716/core/src/main/scala/org/apache/spark/rpc/netty/Inbox.scala#L123\r\n\r\nI guess if you expect one endpoint to be served by multiple threads, it makes sense you'd want `Inbox.enableConcurrent = false` and you'd have to make your endpoint safe for that -- but worth a comment here at least.",
        "createdAt" : "2019-10-10T18:55:24Z",
        "updatedAt" : "2019-10-10T22:10:36Z",
        "lastEditedBy" : "e913f9af-103d-40d4-976e-9aa8e12e7211",
        "tags" : [
        ]
      },
      {
        "id" : "bd8747b0-8e41-4e59-a058-dc1e6a787c04",
        "parentId" : "8a6cee66-0d86-440e-b1af-ebcb27083765",
        "authorId" : "171fe41b-96df-4362-a600-2d1f030de577",
        "body" : "I have the same question with @squito . How do you deal with `ThreadSafeRpcEndpoint` ?\r\n\r\nThough we could set `Inbox.enableConcurrent = false` with `threadCount() > 0`, but multiple threads would be wasted.",
        "createdAt" : "2019-10-17T13:15:04Z",
        "updatedAt" : "2019-10-17T13:23:43Z",
        "lastEditedBy" : "171fe41b-96df-4362-a600-2d1f030de577",
        "tags" : [
        ]
      },
      {
        "id" : "94964705-c833-4731-b422-e3e829e3effc",
        "parentId" : "8a6cee66-0d86-440e-b1af-ebcb27083765",
        "authorId" : "0b3111e2-9584-4813-8cb5-8f40e119f71c",
        "body" : "I already updated the comment. `ThreadSafeRpcEndpoint` is irrelevant here. You may even extend both if you want; but if you do that, either it does nothing (because the thread pool has a single thread), or you're doing it wrong (because the thread pool has multiple thread but you just want one).\r\n\r\nSo it's pointless to mix in both traits.",
        "createdAt" : "2019-10-17T15:42:56Z",
        "updatedAt" : "2019-10-17T15:42:56Z",
        "lastEditedBy" : "0b3111e2-9584-4813-8cb5-8f40e119f71c",
        "tags" : [
        ]
      }
    ],
    "commit" : "b674b4c251ecc897e50504bf999257dc0e6d8354",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +160,164 @@   * messages being delivered to the endpoint out of order).\n   */\n  def threadCount(): Int = 1\n\n}"
  }
]