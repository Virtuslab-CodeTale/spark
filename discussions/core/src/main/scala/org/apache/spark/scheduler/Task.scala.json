[
  {
    "id" : "825852b4-a109-4765-9c26-8d778bae6358",
    "prId" : 29977,
    "prUrl" : "https://github.com/apache/spark/pull/29977#pullrequestreview-509042878",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1dc37627-9998-4bcd-b6be-b9ae3a77a382",
        "parentId" : null,
        "authorId" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "body" : "What is the expectation in case `onTaskStart` fails - do we want to invoke succeeded/failed ?",
        "createdAt" : "2020-10-08T17:49:50Z",
        "updatedAt" : "2020-10-15T10:29:34Z",
        "lastEditedBy" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "tags" : [
        ]
      },
      {
        "id" : "d85cb936-6d87-4cf0-b78a-9a238f17cd37",
        "parentId" : "1dc37627-9998-4bcd-b6be-b9ae3a77a382",
        "authorId" : "1d28ddb6-2a88-457f-a2f8-89524b5bc7ab",
        "body" : "That's what I documented on https://github.com/apache/spark/pull/29977/files#diff-6a99ec9983962323b4e0c1899134b5d6R76-R78 -- argument that came to mind is that it's easy for a plugin dev to track some state in a thread-local and clean decide if it wants to perform the succeeded/failed action or not.\r\n\r\nHappy to change it if we prefer not to put this burden on the plugin owner though.",
        "createdAt" : "2020-10-09T14:33:12Z",
        "updatedAt" : "2020-10-15T10:29:34Z",
        "lastEditedBy" : "1d28ddb6-2a88-457f-a2f8-89524b5bc7ab",
        "tags" : [
        ]
      },
      {
        "id" : "f6281944-4120-4ed6-9496-a4a98b5d195b",
        "parentId" : "1dc37627-9998-4bcd-b6be-b9ae3a77a382",
        "authorId" : "bea80117-7be3-4703-8d54-02b7bf73632c",
        "body" : "maybe I'm misunderstanding but the documentation states \"Exceptions thrown from this method do not propagate\", there is nothing here preventing that. I think perhaps you meant to say the user needs to make sure they don't propagate?",
        "createdAt" : "2020-10-12T13:58:06Z",
        "updatedAt" : "2020-10-15T10:29:34Z",
        "lastEditedBy" : "bea80117-7be3-4703-8d54-02b7bf73632c",
        "tags" : [
        ]
      },
      {
        "id" : "08b2d0ce-3dba-4f68-b510-040196dc7b41",
        "parentId" : "1dc37627-9998-4bcd-b6be-b9ae3a77a382",
        "authorId" : "1d28ddb6-2a88-457f-a2f8-89524b5bc7ab",
        "body" : "We catch Throwable on `ExecutorPluginContainer#onTaskStart` and siblings (see https://github.com/apache/spark/pull/29977/files#diff-5e4d939e9bb53b4be2c48d4eb53b885c162c729b9adc874f918f7701a352cdbbR157), so that's what I meant by \"not propagate\". I.e. if a plugin's `onTaskStart` throws, Spark will log, but won't fail the associated spark task.",
        "createdAt" : "2020-10-14T15:24:51Z",
        "updatedAt" : "2020-10-15T10:29:34Z",
        "lastEditedBy" : "1d28ddb6-2a88-457f-a2f8-89524b5bc7ab",
        "tags" : [
        ]
      },
      {
        "id" : "2243881c-8493-43ed-873c-8498b0c744ca",
        "parentId" : "1dc37627-9998-4bcd-b6be-b9ae3a77a382",
        "authorId" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "body" : "Perhaps reword it to say exceptions are ignored ?",
        "createdAt" : "2020-10-15T06:32:18Z",
        "updatedAt" : "2020-10-15T10:29:34Z",
        "lastEditedBy" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "tags" : [
        ]
      }
    ],
    "commit" : "8a5e43671b3ffc16a6d3630886027cde97380558",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +126,130 @@      Option(attemptNumber)).setCurrentContext()\n\n    plugins.foreach(_.onTaskStart())\n\n    try {"
  }
]