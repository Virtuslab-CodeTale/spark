[
  {
    "id" : "e187b627-256d-433a-a3ab-1d5b307f5c17",
    "prId" : 30389,
    "prUrl" : "https://github.com/apache/spark/pull/30389#pullrequestreview-536169178",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f40b3708-fdd3-4341-b185-68b1095ac1a1",
        "parentId" : null,
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "Okay, actually the test in `PythonRDDSuite` was related.\r\n\r\nIn `python server error handling` test we don't initialize `SparkEnv`  because we don't create `SparkContext` or executor there by default, but `SparkEnv.get` was used in the previous change which ended up with NPE.\r\n\r\nNow, I made a change to work around by using `SparkConf` directly here.",
        "createdAt" : "2020-11-23T02:38:00Z",
        "updatedAt" : "2020-11-23T02:38:01Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "5684646e-15c6-49c9-93b5-f942354f476f",
        "parentId" : "f40b3708-fdd3-4341-b185-68b1095ac1a1",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Got it~",
        "createdAt" : "2020-11-23T04:13:10Z",
        "updatedAt" : "2020-11-23T04:13:10Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "363f3bb07ccd34cf3d70303a5512595cc59b603b",
    "line" : 32,
    "diffHunk" : "@@ -1,1 +52,56 @@    val serverSocket = new ServerSocket(0, 1, InetAddress.getByAddress(Array(127, 0, 0, 1)))\n    // Close the socket if no connection in the configured seconds\n    val timeout = authHelper.conf.get(PYTHON_AUTH_SOCKET_TIMEOUT).toInt\n    logTrace(s\"Setting timeout to $timeout sec\")\n    serverSocket.setSoTimeout(timeout * 1000)"
  },
  {
    "id" : "da54430b-0700-4089-949e-cc224bbff94e",
    "prId" : 24834,
    "prUrl" : "https://github.com/apache/spark/pull/24834#pullrequestreview-252536615",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3ad445ec-41c8-441c-b581-53479bc820d5",
        "parentId" : null,
        "authorId" : "0c293c45-22a6-4358-8a40-adbf7c470575",
        "body" : "I don't think we need `SockAuthServer.setupOneConnectionServer` if we have this also, so it could be cleaned up",
        "createdAt" : "2019-06-10T22:54:15Z",
        "updatedAt" : "2019-06-24T17:59:28Z",
        "lastEditedBy" : "0c293c45-22a6-4358-8a40-adbf7c470575",
        "tags" : [
        ]
      },
      {
        "id" : "2ecb25ae-d7e5-4bfd-ad7a-997f1ade5a36",
        "parentId" : "3ad445ec-41c8-441c-b581-53479bc820d5",
        "authorId" : "0c293c45-22a6-4358-8a40-adbf7c470575",
        "body" : "I removed `SockAuthServer.setupOneConnectionServer` and replaced usage with SocketFuncServer",
        "createdAt" : "2019-06-20T21:00:01Z",
        "updatedAt" : "2019-06-24T17:59:28Z",
        "lastEditedBy" : "0c293c45-22a6-4358-8a40-adbf7c470575",
        "tags" : [
        ]
      }
    ],
    "commit" : "20eb7487962a49c928003167a8d7e3cfaff54dbc",
    "line" : 70,
    "diffHunk" : "@@ -1,1 +99,103 @@    authHelper: SocketAuthHelper,\n    threadName: String,\n    func: Socket => Unit) extends SocketAuthServer[Unit](authHelper, threadName) {\n\n  override def handleConnection(sock: Socket): Unit = {"
  },
  {
    "id" : "7894ccc0-7997-4643-836a-277349e75d6a",
    "prId" : 24834,
    "prUrl" : "https://github.com/apache/spark/pull/24834#pullrequestreview-252534546",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "dd705e93-4de1-41e2-abe4-096a7b73b1ff",
        "parentId" : null,
        "authorId" : "0c293c45-22a6-4358-8a40-adbf7c470575",
        "body" : "Moved this from `SocketAuthHelper` because it seemed more fitting to be here",
        "createdAt" : "2019-06-20T20:55:19Z",
        "updatedAt" : "2019-06-24T17:59:28Z",
        "lastEditedBy" : "0c293c45-22a6-4358-8a40-adbf7c470575",
        "tags" : [
        ]
      }
    ],
    "commit" : "20eb7487962a49c928003167a8d7e3cfaff54dbc",
    "line" : 119,
    "diffHunk" : "@@ -1,1 +122,126 @@   *         server object that can be used to join the JVM serving thread in Python.\n   */\n  def serveToStream(\n      threadName: String,\n      authHelper: SocketAuthHelper)(writeFunc: OutputStream => Unit): Array[Any] = {"
  }
]