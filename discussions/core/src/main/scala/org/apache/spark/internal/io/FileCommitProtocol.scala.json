[
  {
    "id" : "d0daa3cc-fa2e-4ca3-b23e-d4676b449451",
    "prId" : 33012,
    "prUrl" : "https://github.com/apache/spark/pull/33012#pullrequestreview-690711965",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e1b237b9-503a-4242-a312-40913c252719",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "This is not true, commit protocol needs to guarantee name uniqueness, as caller side only gives prefix and suffix",
        "createdAt" : "2021-06-22T10:35:57Z",
        "updatedAt" : "2021-06-22T10:35:58Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "2d71cadd-6428-4537-9de3-0c27f59d3322",
        "parentId" : "e1b237b9-503a-4242-a312-40913c252719",
        "authorId" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "body" : "The whole sentence is:\r\n\r\n```\r\nit is the caller's responsibility to add uniquely identifying content to \"spec\"\r\nif a task is going to write out multiple files to the same dir.\r\n```\r\n\r\nI think this refers to the case when in one task, caller calls newTaskTempFile() multiple times with same `spec`, the caller should not expect commit protocol returning unique different file path every time. The current implementation of `HadoopMapReduceCommitProtocol` would return same path if `ext` being same. This is a copy-paste from original comment of `newTaskTempFile`.",
        "createdAt" : "2021-06-23T01:26:35Z",
        "updatedAt" : "2021-06-23T06:46:23Z",
        "lastEditedBy" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "tags" : [
        ]
      },
      {
        "id" : "7612e5c6-6a44-4277-aa84-3fe00439cda8",
        "parentId" : "e1b237b9-503a-4242-a312-40913c252719",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "I see!",
        "createdAt" : "2021-06-23T14:10:51Z",
        "updatedAt" : "2021-06-23T14:10:51Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      }
    ],
    "commit" : "2ec6fc61c561999aa7680d6dfa4441b1a6cf7ff5",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +104,108 @@   * protocol implementation to decide.\n   *\n   * Important: it is the caller's responsibility to add uniquely identifying content to \"spec\"\n   * if a task is going to write out multiple files to the same dir. The file commit protocol only\n   * guarantees that files written by different tasks will not conflict."
  },
  {
    "id" : "cf1ce544-6df8-40f0-b0da-c897b1de1358",
    "prId" : 33012,
    "prUrl" : "https://github.com/apache/spark/pull/33012#pullrequestreview-695675333",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4ca34ff7-d6f5-42fc-b4e7-41aabd24f5c7",
        "parentId" : null,
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "I think we should mark this as an API (e.g., `@Unstable`) ... this is currently internal.",
        "createdAt" : "2021-06-28T02:59:29Z",
        "updatedAt" : "2021-06-28T02:59:30Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "5f7cf6c5-1c1e-4210-9bec-756c6851e74c",
        "parentId" : "4ca34ff7-d6f5-42fc-b4e7-41aabd24f5c7",
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "It's a bit weird to say about \"backward compatible\" here. If this isn't an API, we should explicitly mention that this isn't an API at least here to avoid giving a false impression to dev.",
        "createdAt" : "2021-06-28T03:00:48Z",
        "updatedAt" : "2021-06-28T03:00:49Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "9def6b7c-d84f-4e9a-b6a1-4414e0d8c360",
        "parentId" : "4ca34ff7-d6f5-42fc-b4e7-41aabd24f5c7",
        "authorId" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "body" : "@HyukjinKwon - will it look better as below?\r\n\r\n```\r\nThis method should be implemented and called, instead of \r\n[[newTaskTempFile(taskContest, dir, ext)]]. Provide a default implementation here to be \r\ncompatible with custom [[FileCommitProtocol]] implementations before Spark 3.2.0.\r\n```",
        "createdAt" : "2021-06-28T20:08:50Z",
        "updatedAt" : "2021-06-28T20:08:50Z",
        "lastEditedBy" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "tags" : [
        ]
      },
      {
        "id" : "6a87ab89-39c0-44e3-add2-4c60d03cbcff",
        "parentId" : "4ca34ff7-d6f5-42fc-b4e7-41aabd24f5c7",
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "Shall we mark it as `@Unstable` for now with explaining the context a bit? e.g.) this class is exposed as an API considering the usage of many downstream custom implementations but will be subject to be changed and/or moved.",
        "createdAt" : "2021-06-30T02:16:29Z",
        "updatedAt" : "2021-06-30T02:16:29Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "0915cca1-e267-446a-bc17-6b396a85bf6a",
        "parentId" : "4ca34ff7-d6f5-42fc-b4e7-41aabd24f5c7",
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "cc @cloud-fan to get more feedback ",
        "createdAt" : "2021-06-30T02:16:40Z",
        "updatedAt" : "2021-06-30T02:16:40Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "5af92773-415b-4f12-a039-4b9870a92651",
        "parentId" : "4ca34ff7-d6f5-42fc-b4e7-41aabd24f5c7",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "I'm fine to mark it `Unstable`. It doesn't hurt anyway.",
        "createdAt" : "2021-06-30T03:41:36Z",
        "updatedAt" : "2021-06-30T03:41:36Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "1409a6dc-b740-4d13-a8b0-c6b395d134de",
        "parentId" : "4ca34ff7-d6f5-42fc-b4e7-41aabd24f5c7",
        "authorId" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "body" : "Sounds good. Let me create a PR now.",
        "createdAt" : "2021-06-30T04:00:14Z",
        "updatedAt" : "2021-06-30T04:00:15Z",
        "lastEditedBy" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "tags" : [
        ]
      }
    ],
    "commit" : "2ec6fc61c561999aa7680d6dfa4441b1a6cf7ff5",
    "line" : 21,
    "diffHunk" : "@@ -1,1 +110,114 @@   * This API should be implemented and called, instead of\n   * [[newTaskTempFile(taskContest, dir, ext)]]. Provide a default implementation here to be\n   * backward compatible with custom [[FileCommitProtocol]] implementations before Spark 3.2.0.\n   */\n  def newTaskTempFile("
  }
]