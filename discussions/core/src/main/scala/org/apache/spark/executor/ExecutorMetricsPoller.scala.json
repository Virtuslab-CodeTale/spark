[
  {
    "id" : "e217f07f-1709-4ba5-b64a-3a7255c1dfc1",
    "prId" : 31871,
    "prUrl" : "https://github.com/apache/spark/pull/31871#pullrequestreview-618901590",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "007252ae-b77e-4dc7-a604-cb372b6f0cc4",
        "parentId" : null,
        "authorId" : "171fe41b-96df-4362-a600-2d1f030de577",
        "body" : "Shall we add `assert(countValue >= 0)` here to ensure the task count doesn't go wrong? And then in `removeIfInactive`, we could use `v.count.get == 0`.",
        "createdAt" : "2021-03-23T01:44:24Z",
        "updatedAt" : "2021-03-24T15:52:35Z",
        "lastEditedBy" : "171fe41b-96df-4362-a600-2d1f030de577",
        "tags" : [
        ]
      },
      {
        "id" : "df96dee7-50bf-4178-b003-9ee479794036",
        "parentId" : "007252ae-b77e-4dc7-a604-cb372b6f0cc4",
        "authorId" : "788d6907-ae49-42f5-95b7-ef69c1460937",
        "body" : "Yeah that sounds good, I added it.",
        "createdAt" : "2021-03-23T17:51:54Z",
        "updatedAt" : "2021-03-24T15:52:35Z",
        "lastEditedBy" : "788d6907-ae49-42f5-95b7-ef69c1460937",
        "tags" : [
        ]
      }
    ],
    "commit" : "2751c75f594429a0d90c27d784c030a5fa847eed",
    "line" : 20,
    "diffHunk" : "@@ -1,1 +127,131 @@\n    def decrementCount(stage: StageKey, countAndPeaks: TCMP): TCMP = {\n      val countValue = countAndPeaks.count.decrementAndGet()\n      assert(countValue >= 0, \"task count shouldn't below 0\")\n      logDebug(s\"stageTCMP: (${stage._1}, ${stage._2}) -> \" + countValue)"
  },
  {
    "id" : "9c80779b-b58c-43c5-b79d-c31d4651e4bd",
    "prId" : 28034,
    "prUrl" : "https://github.com/apache/spark/pull/28034#pullrequestreview-393491633",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a25533f0-126b-48fe-808a-d671772007cd",
        "parentId" : null,
        "authorId" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "body" : "@jiangxb1987  poll() at here when task finish or error will get latest metrics peak.\r\n\r\nExecutorMtericPoller.onTaskComplet() just remove taskId corresponding  entry in Map",
        "createdAt" : "2020-04-15T06:38:11Z",
        "updatedAt" : "2020-04-15T06:38:11Z",
        "lastEditedBy" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "tags" : [
        ]
      }
    ],
    "commit" : "304d4a159b61605d10beb249962b101e132724aa",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +151,155 @@    // call poll() update to latest metrics\n    poll()\n\n    // If this is called with an invalid taskId or a valid taskId but the task was killed and\n    // onTaskStart was therefore not called, then we return an array of zeros."
  }
]