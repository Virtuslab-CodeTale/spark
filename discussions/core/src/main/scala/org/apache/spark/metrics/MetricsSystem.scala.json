[
  {
    "id" : "dadc4b2b-762e-4ba1-976e-35f83f5a8d74",
    "prId" : 26984,
    "prUrl" : "https://github.com/apache/spark/pull/26984#pullrequestreview-357956173",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d68db324-98fa-4a10-97cb-f90307bb5e48",
        "parentId" : null,
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "Do you just want to check if `sources.contains` the source?",
        "createdAt" : "2020-01-18T15:39:15Z",
        "updatedAt" : "2020-02-13T04:53:40Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      },
      {
        "id" : "829f6259-7fc2-4a62-b3bf-30a9cb77fb8e",
        "parentId" : "d68db324-98fa-4a10-97cb-f90307bb5e48",
        "authorId" : "146483e5-762f-43ed-9f08-2486098c0f55",
        "body" : "`sources` is an ArrayBuffer.  if  `sources` really contains the checking one,the index can avoid traversing array twice.",
        "createdAt" : "2020-02-13T05:04:47Z",
        "updatedAt" : "2020-02-13T05:04:47Z",
        "lastEditedBy" : "146483e5-762f-43ed-9f08-2486098c0f55",
        "tags" : [
        ]
      }
    ],
    "commit" : "b0b751a60b635c3998fb0395a37008e56e7e13d3",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +177,181 @@\n  def removeSource(source: Source): Unit = {\n    val index = sources.indexOf(source)\n    if (index != -1) {\n      sources.remove(index)"
  },
  {
    "id" : "8b761329-9495-4234-a76f-bb4f25bb79e3",
    "prId" : 26427,
    "prUrl" : "https://github.com/apache/spark/pull/26427#pullrequestreview-313508874",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "adf0ccc9-2a6a-42e2-9566-777c86586b0f",
        "parentId" : null,
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "Note that in Spark 2.4, this had to be:\r\n```\r\nregistry.removeMatching(new MetricFilter {\r\n  override def matches(name: String, metric: Metric): Boolean = true\r\n})\r\n```",
        "createdAt" : "2019-11-07T17:27:08Z",
        "updatedAt" : "2019-11-07T17:27:25Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      }
    ],
    "commit" : "08fcf06cdade7e8f07503242eee05e02149fcd35",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +111,115 @@    if (running) {\n      sinks.foreach(_.stop)\n      registry.removeMatching((_: String, _: Metric) => true)\n    } else {\n      logWarning(\"Stopping a MetricsSystem that is not running\")"
  },
  {
    "id" : "69346af4-82b7-4329-bdc0-04b84d0e44c0",
    "prId" : 25769,
    "prUrl" : "https://github.com/apache/spark/pull/25769#pullrequestreview-287185517",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ce358266-d65c-41e1-b0b5-d15d858d0adc",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "For this, I'll keep the current form instead of `case`, @srowen ~",
        "createdAt" : "2019-09-12T04:20:50Z",
        "updatedAt" : "2019-09-12T18:17:19Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "0fda09667478b5010e53d614be4655fd01b845a7",
    "line" : 30,
    "diffHunk" : "@@ -1,1 +204,208 @@              .newInstance(kv._2, registry, securityMgr)\n            metricsServlet = Some(servlet)\n          } else if (kv._1 == \"prometheusServlet\") {\n            val servlet = Utils.classForName[PrometheusServlet](classPath)\n              .getConstructor("
  },
  {
    "id" : "97f926e7-8d44-4370-a8be-83b85b6f7d1a",
    "prId" : 25741,
    "prUrl" : "https://github.com/apache/spark/pull/25741#pullrequestreview-286252072",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "72a69f35-bc68-43de-9363-66fc39242907",
        "parentId" : null,
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "Can you just write `(metricsServlet ++ prometheusServlet).map...`?",
        "createdAt" : "2019-09-10T13:51:54Z",
        "updatedAt" : "2019-09-11T23:18:06Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      },
      {
        "id" : "f5e12160-e65a-4918-a1af-c4b5dcc6a815",
        "parentId" : "72a69f35-bc68-43de-9363-66fc39242907",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Ur, for now, the first one is `MetricsServlet` and the other is `PrometheusServlet`. `getHandlers` is not inherited from `Sink`.",
        "createdAt" : "2019-09-10T15:30:20Z",
        "updatedAt" : "2019-09-11T23:18:06Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "a5ae268c-1b2e-48c3-8933-68794a171b9a",
        "parentId" : "72a69f35-bc68-43de-9363-66fc39242907",
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "Oh I see. ",
        "createdAt" : "2019-09-10T15:42:13Z",
        "updatedAt" : "2019-09-11T23:18:06Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      }
    ],
    "commit" : "8f063cf01a59533b0e9a8f73e7361f56c2bcde6d",
    "line" : 21,
    "diffHunk" : "@@ -1,1 +91,95 @@  def getServletHandlers: Array[ServletContextHandler] = {\n    require(running, \"Can only call getServletHandlers on a running MetricsSystem\")\n    metricsServlet.map(_.getHandlers(conf)).getOrElse(Array()) ++\n      prometheusServlet.map(_.getHandlers(conf)).getOrElse(Array())\n  }"
  },
  {
    "id" : "fcd62f52-682d-46ca-9303-595204c3168b",
    "prId" : 25741,
    "prUrl" : "https://github.com/apache/spark/pull/25741#pullrequestreview-286167326",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "65525115-8a84-4e63-b8f2-ec4634640e22",
        "parentId" : null,
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "If you want you can make `kv` into `case (key, value)` here for clarity, but not necessary",
        "createdAt" : "2019-09-10T13:52:51Z",
        "updatedAt" : "2019-09-11T23:18:06Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      }
    ],
    "commit" : "8f063cf01a59533b0e9a8f73e7361f56c2bcde6d",
    "line" : 30,
    "diffHunk" : "@@ -1,1 +204,208 @@              .newInstance(kv._2, registry, securityMgr)\n            metricsServlet = Some(servlet)\n          } else if (kv._1 == \"prometheusServlet\") {\n            val servlet = Utils.classForName[PrometheusServlet](classPath)\n              .getConstructor("
  },
  {
    "id" : "0afd7736-1592-431e-aec8-bbefd7daef65",
    "prId" : 24556,
    "prUrl" : "https://github.com/apache/spark/pull/24556#pullrequestreview-238151149",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1e708001-0d84-4d80-b2dd-63b6117e8330",
        "parentId" : null,
        "authorId" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "body" : "If there use `sources.contains(source)`, it looks more graceful.",
        "createdAt" : "2019-05-13T11:16:25Z",
        "updatedAt" : "2019-12-21T14:02:29Z",
        "lastEditedBy" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "tags" : [
        ]
      },
      {
        "id" : "0265a3c7-0278-4b7c-a4cf-9f439732ca97",
        "parentId" : "1e708001-0d84-4d80-b2dd-63b6117e8330",
        "authorId" : "146483e5-762f-43ed-9f08-2486098c0f55",
        "body" : "use index can avoid navigating sources twice.",
        "createdAt" : "2019-05-14T11:04:27Z",
        "updatedAt" : "2019-12-21T14:02:29Z",
        "lastEditedBy" : "146483e5-762f-43ed-9f08-2486098c0f55",
        "tags" : [
        ]
      },
      {
        "id" : "2b2e0f72-efd6-4bb9-8963-9a89e2505fb5",
        "parentId" : "1e708001-0d84-4d80-b2dd-63b6117e8330",
        "authorId" : "146483e5-762f-43ed-9f08-2486098c0f55",
        "body" : "using index can avoid navigating sources twice.",
        "createdAt" : "2019-05-14T11:04:44Z",
        "updatedAt" : "2019-12-21T14:02:29Z",
        "lastEditedBy" : "146483e5-762f-43ed-9f08-2486098c0f55",
        "tags" : [
        ]
      },
      {
        "id" : "0a6eee30-e68a-4e12-8a2c-4f1d92c46ab9",
        "parentId" : "1e708001-0d84-4d80-b2dd-63b6117e8330",
        "authorId" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "body" : "I know it, now.",
        "createdAt" : "2019-05-16T02:16:05Z",
        "updatedAt" : "2019-12-21T14:02:29Z",
        "lastEditedBy" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "tags" : [
        ]
      }
    ],
    "commit" : "71eee02175e751830de3fe47f6c800daf0c9e93f",
    "line" : 35,
    "diffHunk" : "@@ -1,1 +178,182 @@  def removeSource(source: Source) {\n    val index = sources.indexOf(source)\n    if (index != -1) {\n      sources.remove(index)\n      val regNames = getRegisteredNames(source)"
  }
]