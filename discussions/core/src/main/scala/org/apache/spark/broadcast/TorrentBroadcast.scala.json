[
  {
    "id" : "d67170d7-cea1-403b-9d73-391185fe09ab",
    "prId" : 29558,
    "prUrl" : "https://github.com/apache/spark/pull/29558#pullrequestreview-486057597",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8979a3d0-ba3f-40ff-afdb-e437d1abeae3",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Is this correct? What happens if this is thrown at line 135, @LantaoJin ?",
        "createdAt" : "2020-09-01T02:58:31Z",
        "updatedAt" : "2020-09-14T12:23:08Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "a19d911c-8ace-4767-b3e9-f4fe703a42f1",
        "parentId" : "8979a3d0-ba3f-40ff-afdb-e437d1abeae3",
        "authorId" : "0223d15f-93d2-46b2-bee2-7f40fcd0335a",
        "body" : "We can begin to Try..Catch from L137 if the L134 is atomic. But I think `L157: blockManager.removeBroadcast(id, tellMaster = true)` is no harmful even exception throws from L135. Please correct me if I understand incorrectly.",
        "createdAt" : "2020-09-01T03:08:22Z",
        "updatedAt" : "2020-09-14T12:23:08Z",
        "lastEditedBy" : "0223d15f-93d2-46b2-bee2-7f40fcd0335a",
        "tags" : [
        ]
      },
      {
        "id" : "bafc9d00-75e8-488e-96e6-8377fd69c149",
        "parentId" : "8979a3d0-ba3f-40ff-afdb-e437d1abeae3",
        "authorId" : "171fe41b-96df-4362-a600-2d1f030de577",
        "body" : "Would it has the thread-safe issue since `blockManager` is an `IsolatedRpcEndpoint`?",
        "createdAt" : "2020-09-03T11:45:43Z",
        "updatedAt" : "2020-09-14T12:23:08Z",
        "lastEditedBy" : "171fe41b-96df-4362-a600-2d1f030de577",
        "tags" : [
        ]
      },
      {
        "id" : "8811c736-3ed8-4f15-bcff-21553ed0d99a",
        "parentId" : "8979a3d0-ba3f-40ff-afdb-e437d1abeae3",
        "authorId" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "body" : "I agree with @dongjoon-hyun - `blockManager.putSingle` for broadcastid should be outside try/catch. Rest look fine.",
        "createdAt" : "2020-09-10T15:29:43Z",
        "updatedAt" : "2020-09-14T12:23:08Z",
        "lastEditedBy" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "tags" : [
        ]
      }
    ],
    "commit" : "b565c338390b9c54404bf55572b13e6a9c656e7d",
    "line" : 36,
    "diffHunk" : "@@ -1,1 +155,159 @@      case t: Throwable =>\n        logError(s\"Store broadcast $broadcastId fail, remove all pieces of the broadcast\")\n        blockManager.removeBroadcast(id, tellMaster = true)\n        throw t\n    }"
  },
  {
    "id" : "c17d31ef-a011-482e-a06a-d0131dccbd07",
    "prId" : 27604,
    "prUrl" : "https://github.com/apache/spark/pull/27604#pullrequestreview-379923547",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "05e88580-74b9-463f-b459-5c7ef0e3a5e7",
        "parentId" : null,
        "authorId" : "bc001dd4-5224-4ca1-afdd-49d69783d7f2",
        "body" : "Is it still possible to include the `broadcastId` in the error msg? I feel it's still important information to help debuggability.",
        "createdAt" : "2020-03-17T17:40:26Z",
        "updatedAt" : "2020-06-15T02:58:51Z",
        "lastEditedBy" : "bc001dd4-5224-4ca1-afdd-49d69783d7f2",
        "tags" : [
        ]
      },
      {
        "id" : "152363a2-2023-4e4b-8911-854c169483f9",
        "parentId" : "05e88580-74b9-463f-b459-5c7ef0e3a5e7",
        "authorId" : "2e5e2a86-4faf-484a-9251-577e584e1564",
        "body" : "@jiangxb1987 Actually this is included in the pieceId. \r\n`val pieceId = BroadcastBlockId(id, \"piece\" + pid)`",
        "createdAt" : "2020-03-20T09:39:40Z",
        "updatedAt" : "2020-06-15T02:58:51Z",
        "lastEditedBy" : "2e5e2a86-4faf-484a-9251-577e584e1564",
        "tags" : [
        ]
      },
      {
        "id" : "106b8839-7592-4e59-9ef0-1aaac907400f",
        "parentId" : "05e88580-74b9-463f-b459-5c7ef0e3a5e7",
        "authorId" : "bc001dd4-5224-4ca1-afdd-49d69783d7f2",
        "body" : "okay, should be fine.",
        "createdAt" : "2020-03-24T00:29:51Z",
        "updatedAt" : "2020-06-15T02:58:51Z",
        "lastEditedBy" : "bc001dd4-5224-4ca1-afdd-49d69783d7f2",
        "tags" : [
        ]
      }
    ],
    "commit" : "2e11d1bedf15b59c89b1f686ea716a575802f1e6",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +187,191 @@              blocks(pid) = new ByteBufferBlockData(b, true)\n            case None =>\n              throw new BlockNotFoundException(pieceId.toString)\n          }\n      }"
  },
  {
    "id" : "f1d6c76e-4e77-48a8-9acb-ede1bb34ac3a",
    "prId" : 25612,
    "prUrl" : "https://github.com/apache/spark/pull/25612#pullrequestreview-281006420",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a108dc9f-d035-4337-960f-984cd077ce58",
        "parentId" : null,
        "authorId" : "2d6b46ba-4100-4c4d-9341-fff5e39647ec",
        "body" : "Rename this method to avoid confusing.",
        "createdAt" : "2019-08-28T18:02:37Z",
        "updatedAt" : "2019-09-03T18:18:55Z",
        "lastEditedBy" : "2d6b46ba-4100-4c4d-9341-fff5e39647ec",
        "tags" : [
        ]
      }
    ],
    "commit" : "9b59ca2074f4b90a115b668a6b2c0a043e3475af",
    "line" : 45,
    "diffHunk" : "@@ -1,1 +273,277 @@   * Otherwise, if not running in a task then immediately release the lock.\n   */\n  private def releaseBlockManagerLock(blockId: BlockId): Unit = {\n    val blockManager = SparkEnv.get.blockManager\n    Option(TaskContext.get()) match {"
  }
]