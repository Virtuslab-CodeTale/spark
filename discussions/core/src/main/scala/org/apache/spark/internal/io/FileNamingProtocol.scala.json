[
  {
    "id" : "772a546f-54f7-4b8b-9fe0-8707c99afc42",
    "prId" : 32881,
    "prUrl" : "https://github.com/apache/spark/pull/32881#pullrequestreview-688601873",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ad00a336-f3bb-4f40-a93a-ea68b43f1037",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "I'm not very sure about it. It seems more clear to me to let `FileNamingProtocol` only generate filename, and the caller side should construct the proper relative path w.r.t. the partition dir.",
        "createdAt" : "2021-06-21T08:38:32Z",
        "updatedAt" : "2021-06-21T08:38:33Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "c9e31b99-02b6-448d-8faa-314f5ed9769f",
        "parentId" : "ad00a336-f3bb-4f40-a93a-ea68b43f1037",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "same to `ext` and `prefix`: can we let the caller side to pretend/append `ext`/`prefix` to the generated file name?",
        "createdAt" : "2021-06-21T08:41:52Z",
        "updatedAt" : "2021-06-21T08:41:52Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "a8c1c14c-a3ab-46d9-b43b-89f65ef37020",
        "parentId" : "ad00a336-f3bb-4f40-a93a-ea68b43f1037",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "All the information in `FileContext` is not something that the impl can customize: the generated file name must have `ext` and the end, `prefix` at the beginning, and `relativeDir` as the parent dir. Then it's better to let the caller side to guarantee it.",
        "createdAt" : "2021-06-21T08:44:44Z",
        "updatedAt" : "2021-06-21T08:44:44Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "a62d7154-ecaa-4f7e-b13c-8af480e038ca",
        "parentId" : "ad00a336-f3bb-4f40-a93a-ea68b43f1037",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "And the API can be simply named `getTaskFileName`.",
        "createdAt" : "2021-06-21T09:01:44Z",
        "updatedAt" : "2021-06-21T09:01:45Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "3118b413-a92f-4c27-b33b-1da07d3bd949",
        "parentId" : "ad00a336-f3bb-4f40-a93a-ea68b43f1037",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "This API is only to abstract the naming differences between batch and streaming file writing. If that's not necessary, maybe we can remove this abstraction entirely.",
        "createdAt" : "2021-06-21T09:03:28Z",
        "updatedAt" : "2021-06-21T09:03:28Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "99e9a86d-a3bf-4e02-ab41-e4a02cb2bb45",
        "parentId" : "ad00a336-f3bb-4f40-a93a-ea68b43f1037",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "`jobId` is generated with UUID as well, I don't see why streaming write needs to generate a new UUID per file, instead of using job id.",
        "createdAt" : "2021-06-21T09:06:10Z",
        "updatedAt" : "2021-06-21T09:06:11Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "9a7fc7b7-6275-4fa1-b86d-3376c2a86fb6",
        "parentId" : "ad00a336-f3bb-4f40-a93a-ea68b43f1037",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "I'm cleaning this up in https://github.com/apache/spark/pull/33002",
        "createdAt" : "2021-06-21T15:50:34Z",
        "updatedAt" : "2021-06-21T15:50:34Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      }
    ],
    "commit" : "0f3df0f45dc12768c7b9843e84e28a50b279443e",
    "line" : 56,
    "diffHunk" : "@@ -1,1 +54,58 @@final case class FileContext(\n  ext: String,\n  relativeDir: Option[String],\n  prefix: Option[String])"
  }
]