[
  {
    "id" : "96dcc2f1-6083-4112-b44d-386dda2cd20c",
    "prId" : 28462,
    "prUrl" : "https://github.com/apache/spark/pull/28462#pullrequestreview-406460278",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0c43a838-113b-42e3-ba2a-1d86a5d167dc",
        "parentId" : null,
        "authorId" : "171fe41b-96df-4362-a600-2d1f030de577",
        "body" : "I intentionally ignored barrier epoch here because it (`-1`) becomes meaningless after `clear`. But we can update the logic of `clear` if any of you think it's necessary here.",
        "createdAt" : "2020-05-06T09:51:30Z",
        "updatedAt" : "2020-05-07T12:13:44Z",
        "lastEditedBy" : "171fe41b-96df-4362-a600-2d1f030de577",
        "tags" : [
        ]
      }
    ],
    "commit" : "8b192f12d765f9d94ebca73a4e7faa634bce8245",
    "line" : 42,
    "diffHunk" : "@@ -1,1 +147,151 @@      if (requestMethods.size > 1) {\n        val error = new SparkException(s\"Different barrier sync types found for the \" +\n          s\"sync $barrierId: ${requestMethods.mkString(\", \")}. Please use the \" +\n          s\"same barrier sync type within a single sync.\")\n        (requesters :+ requester).foreach(_.sendFailure(error))"
  },
  {
    "id" : "a0414437-40e3-49de-9d2d-3180f6ae3805",
    "prId" : 28117,
    "prUrl" : "https://github.com/apache/spark/pull/28117#pullrequestreview-388804527",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "06ff6406-604c-462b-9603-fbf8e7d71680",
        "parentId" : null,
        "authorId" : "bc001dd4-5224-4ca1-afdd-49d69783d7f2",
        "body" : "nit: add comment to this variable",
        "createdAt" : "2020-04-07T05:59:42Z",
        "updatedAt" : "2020-04-07T08:01:57Z",
        "lastEditedBy" : "bc001dd4-5224-4ca1-afdd-49d69783d7f2",
        "tags" : [
        ]
      }
    ],
    "commit" : "e8d774b73c60a10cc9a554eca1e18e106366bced",
    "line" : 32,
    "diffHunk" : "@@ -1,1 +109,113 @@    // The request method which is called inside this barrier sync. All tasks should make sure\n    // that they're calling the same method within the same barrier sync phase.\n    private var requestMethod: RequestMethod.Value = _\n\n    // A timer task that ensures we may timeout for a barrier() call."
  },
  {
    "id" : "a39aac92-3c0d-4fd4-bc02-db19c290d365",
    "prId" : 27395,
    "prUrl" : "https://github.com/apache/spark/pull/27395#pullrequestreview-357123212",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9344402a-e591-4a29-b1d2-8b500568f245",
        "parentId" : null,
        "authorId" : "e61b3cb6-56c6-4e7f-9cca-9e4c8ed5c8c1",
        "body" : "@jiangxb1987 this addresses your comment about maintaining sorted order in the result",
        "createdAt" : "2020-02-12T00:49:24Z",
        "updatedAt" : "2020-02-19T01:29:01Z",
        "lastEditedBy" : "e61b3cb6-56c6-4e7f-9cca-9e4c8ed5c8c1",
        "tags" : [
        ]
      }
    ],
    "commit" : "d2fffe1df73973962302c898bf90c67bb6714cd1",
    "line" : 74,
    "diffHunk" : "@@ -1,1 +187,191 @@        // Add the requester to array of RPCCallContexts pending for reply.\n        requesters += requester\n        allGatherMessages(partitionId) = allGatherMessage\n        logInfo(s\"Barrier sync epoch $barrierEpoch from $barrierId received update from Task \" +\n          s\"$taskId, current progress: ${requesters.size}/$numTasks.\")"
  },
  {
    "id" : "607e5975-0a61-485f-9b8d-b8ca834fb3cf",
    "prId" : 27395,
    "prUrl" : "https://github.com/apache/spark/pull/27395#pullrequestreview-357721112",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fc541ceb-add6-4350-abd4-041483bfa3d9",
        "parentId" : null,
        "authorId" : "bc001dd4-5224-4ca1-afdd-49d69783d7f2",
        "body" : "We should also call `cleanupBarrierStage()` here.",
        "createdAt" : "2020-02-12T19:20:50Z",
        "updatedAt" : "2020-02-19T01:29:01Z",
        "lastEditedBy" : "bc001dd4-5224-4ca1-afdd-49d69783d7f2",
        "tags" : [
        ]
      }
    ],
    "commit" : "d2fffe1df73973962302c898bf90c67bb6714cd1",
    "line" : 58,
    "diffHunk" : "@@ -1,1 +158,162 @@      }\n\n      if (requestMethodToSync != requestMethod) {\n        requesters.foreach(\n          _.sendFailure(new SparkException(s\"$barrierId tried to use requestMethod \" +"
  },
  {
    "id" : "5ea26356-5345-4fdc-ac2e-679c91f0b273",
    "prId" : 27395,
    "prUrl" : "https://github.com/apache/spark/pull/27395#pullrequestreview-357843590",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3b2e9c06-7b05-4c6f-a969-f4fa410a07c9",
        "parentId" : null,
        "authorId" : "bc001dd4-5224-4ca1-afdd-49d69783d7f2",
        "body" : "This is not necessary, please revert this change.",
        "createdAt" : "2020-02-12T19:25:29Z",
        "updatedAt" : "2020-02-19T01:29:01Z",
        "lastEditedBy" : "bc001dd4-5224-4ca1-afdd-49d69783d7f2",
        "tags" : [
        ]
      },
      {
        "id" : "50780b39-847a-49e4-8308-8fdf61852c00",
        "parentId" : "3b2e9c06-7b05-4c6f-a969-f4fa410a07c9",
        "authorId" : "e61b3cb6-56c6-4e7f-9cca-9e4c8ed5c8c1",
        "body" : "@jiangxb1987 `RequestToSync` is now a sealed trait which doesn't seem to allow for variable extraction.",
        "createdAt" : "2020-02-12T22:30:52Z",
        "updatedAt" : "2020-02-19T01:29:01Z",
        "lastEditedBy" : "e61b3cb6-56c6-4e7f-9cca-9e4c8ed5c8c1",
        "tags" : [
        ]
      },
      {
        "id" : "fb69e520-bd40-4223-b096-5b2bb692bc76",
        "parentId" : "3b2e9c06-7b05-4c6f-a969-f4fa410a07c9",
        "authorId" : "bc001dd4-5224-4ca1-afdd-49d69783d7f2",
        "body" : "oh i see, sound good!",
        "createdAt" : "2020-02-12T22:44:26Z",
        "updatedAt" : "2020-02-19T01:29:01Z",
        "lastEditedBy" : "bc001dd4-5224-4ca1-afdd-49d69783d7f2",
        "tags" : [
        ]
      }
    ],
    "commit" : "d2fffe1df73973962302c898bf90c67bb6714cd1",
    "line" : 98,
    "diffHunk" : "@@ -1,1 +240,244 @@\n  override def receiveAndReply(context: RpcCallContext): PartialFunction[Any, Unit] = {\n    case request: RequestToSync =>\n      // Get or init the ContextBarrierState correspond to the stage attempt.\n      val barrierId = ContextBarrierId(request.stageId, request.stageAttemptId)"
  }
]