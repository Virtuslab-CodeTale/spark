[
  {
    "id" : "ede675c9-b94a-406d-b85e-3e2d8cf6df7c",
    "prId" : 30116,
    "prUrl" : "https://github.com/apache/spark/pull/30116#pullrequestreview-514065563",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ee447d3c-fd88-445c-9e82-89ad002360fd",
        "parentId" : null,
        "authorId" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "body" : "We could also increment migratedShuffles and then we would expect it to finish.",
        "createdAt" : "2020-10-21T18:33:30Z",
        "updatedAt" : "2020-10-21T18:33:30Z",
        "lastEditedBy" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "tags" : [
        ]
      }
    ],
    "commit" : "fa10f3ac3c88b860a5190dab2c8552f6c314e543",
    "line" : 39,
    "diffHunk" : "@@ -1,1 +184,188 @@    bmDecomManager.migratingShuffles += ShuffleBlockInfo(10, 10)\n\n    validateDecommissionTimestampsOnManager(bmDecomManager, fail = false, assertDone = false)\n  }\n"
  },
  {
    "id" : "a7105b35-2338-4784-850e-95551328d0e4",
    "prId" : 30046,
    "prUrl" : "https://github.com/apache/spark/pull/30046#pullrequestreview-509798691",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e3307289-c509-49f8-9bac-3ac24c0a35ee",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "This fails, too.",
        "createdAt" : "2020-10-15T20:51:04Z",
        "updatedAt" : "2020-10-16T02:47:00Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "b50eea895a084c04784399faaf74f2b822405e84",
    "line" : 104,
    "diffHunk" : "@@ -1,1 +212,216 @@  }\n\n  test(\"block decom manager short circuits removed blocks\") {\n    // Set up the mocks so we return one shuffle block\n    val bm = mock(classOf[BlockManager])"
  },
  {
    "id" : "f3d2974a-fb59-44f3-a803-ff50f14817c5",
    "prId" : 29211,
    "prUrl" : "https://github.com/apache/spark/pull/29211#pullrequestreview-455110727",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "69a11f3c-8366-49f7-94df-2c44bfd0e5ad",
        "parentId" : null,
        "authorId" : "711a9ca0-8b90-435a-bf87-eb621aa1db13",
        "body" : "Why is atLeast renamed as least ? ",
        "createdAt" : "2020-07-24T00:15:31Z",
        "updatedAt" : "2020-08-05T18:39:14Z",
        "lastEditedBy" : "711a9ca0-8b90-435a-bf87-eb621aa1db13",
        "tags" : [
        ]
      },
      {
        "id" : "2101e59f-9411-46aa-a079-9e22f4d45073",
        "parentId" : "69a11f3c-8366-49f7-94df-2c44bfd0e5ad",
        "authorId" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "body" : "Theres something else which is somehow imported and named atLeast (I suspect from ScalaTest?) and I needed to rename it or the compiler got confused.",
        "createdAt" : "2020-07-24T00:52:09Z",
        "updatedAt" : "2020-08-05T18:39:14Z",
        "lastEditedBy" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "tags" : [
        ]
      },
      {
        "id" : "5f4014c7-a4f6-4d8e-ab45-a89f6075b9db",
        "parentId" : "69a11f3c-8366-49f7-94df-2c44bfd0e5ad",
        "authorId" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "body" : "Did a bit more poking, it's not scalatest. It's easier just to rename to avoid the conflict.",
        "createdAt" : "2020-07-24T18:47:03Z",
        "updatedAt" : "2020-08-05T18:39:14Z",
        "lastEditedBy" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "tags" : [
        ]
      }
    ],
    "commit" : "e81c3fc2d0b8c28cd0aedf08a7ea1e86a153ae49",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +21,25 @@\nimport org.mockito.{ArgumentMatchers => mc}\nimport org.mockito.Mockito.{atLeast => least, mock, times, verify, when}\nimport org.scalatest.concurrent.Eventually._\nimport org.scalatest.matchers.must.Matchers"
  },
  {
    "id" : "d9e2fe3b-fe93-4cec-ad9d-c40edc8565e0",
    "prId" : 29211,
    "prUrl" : "https://github.com/apache/spark/pull/29211#pullrequestreview-454597900",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "84c43b44-30a9-4751-9fa0-1388002bf311",
        "parentId" : null,
        "authorId" : "711a9ca0-8b90-435a-bf87-eb621aa1db13",
        "body" : "Should this also be 10 seconds ? \r\n\r\n\"as fast as we can\" does not usually jibe well with \"interval of 10 seconds\" :-P. ",
        "createdAt" : "2020-07-24T00:16:18Z",
        "updatedAt" : "2020-08-05T18:39:14Z",
        "lastEditedBy" : "711a9ca0-8b90-435a-bf87-eb621aa1db13",
        "tags" : [
        ]
      },
      {
        "id" : "ef2d0ae6-2244-4520-8db9-b1025f2af02f",
        "parentId" : "84c43b44-30a9-4751-9fa0-1388002bf311",
        "authorId" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "body" : "Well compared the the default interval. What about if we say \"quickly\"?",
        "createdAt" : "2020-07-24T00:52:41Z",
        "updatedAt" : "2020-08-05T18:39:14Z",
        "lastEditedBy" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "tags" : [
        ]
      },
      {
        "id" : "3358d8b6-5b11-4333-b953-e88ff7b90a37",
        "parentId" : "84c43b44-30a9-4751-9fa0-1388002bf311",
        "authorId" : "711a9ca0-8b90-435a-bf87-eb621aa1db13",
        "body" : "This code is also replicated in BlockManagerDecommissionIntegrationSuite ... so I think that should be changed as well.",
        "createdAt" : "2020-07-24T01:28:37Z",
        "updatedAt" : "2020-08-05T18:39:14Z",
        "lastEditedBy" : "711a9ca0-8b90-435a-bf87-eb621aa1db13",
        "tags" : [
        ]
      },
      {
        "id" : "8ed576fd-24cf-4767-b456-b1d60e4f2a7f",
        "parentId" : "84c43b44-30a9-4751-9fa0-1388002bf311",
        "authorId" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "body" : "Done :)",
        "createdAt" : "2020-07-24T01:52:51Z",
        "updatedAt" : "2020-08-05T18:39:14Z",
        "lastEditedBy" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "tags" : [
        ]
      }
    ],
    "commit" : "e81c3fc2d0b8c28cd0aedf08a7ea1e86a153ae49",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +41,45 @@    // Just replicate blocks quickly during testing, as there isn't another\n    // workload we need to worry about.\n    .set(config.STORAGE_DECOMMISSION_REPLICATION_REATTEMPT_INTERVAL, 10L)\n\n  private def registerShuffleBlocks("
  },
  {
    "id" : "54a4c6c8-146b-413c-89f4-ea90c4c3dc96",
    "prId" : 29211,
    "prUrl" : "https://github.com/apache/spark/pull/29211#pullrequestreview-460803629",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "aa2f8ae3-8e62-43bc-8100-8d78f48701f1",
        "parentId" : null,
        "authorId" : "711a9ca0-8b90-435a-bf87-eb621aa1db13",
        "body" : "What about a case where new work is assigned to the executor and thus new shuffle files show up ? Is that handled in the cases below ? A scenario where we start the migration and then new shuffle work is created midway.",
        "createdAt" : "2020-08-04T05:00:57Z",
        "updatedAt" : "2020-08-05T18:39:14Z",
        "lastEditedBy" : "711a9ca0-8b90-435a-bf87-eb621aa1db13",
        "tags" : [
        ]
      },
      {
        "id" : "ea85cc85-3180-4e2d-b1d5-88bc4f057119",
        "parentId" : "aa2f8ae3-8e62-43bc-8100-8d78f48701f1",
        "authorId" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "body" : "That's covered in the integration suite by asserting the data is migrated.",
        "createdAt" : "2020-08-04T13:20:45Z",
        "updatedAt" : "2020-08-05T18:39:14Z",
        "lastEditedBy" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "tags" : [
        ]
      }
    ],
    "commit" : "e81c3fc2d0b8c28cd0aedf08a7ea1e86a153ae49",
    "line" : 62,
    "diffHunk" : "@@ -1,1 +97,101 @@    }\n  }\n\n  test(\"test that with no blocks we finish migration\") {\n    // Set up the mocks so we return empty"
  },
  {
    "id" : "464a23cb-146e-45dc-9c03-481d49b6b5f7",
    "prId" : 29211,
    "prUrl" : "https://github.com/apache/spark/pull/29211#pullrequestreview-462017839",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6fdc9974-fee1-442c-8563-90d1934534c6",
        "parentId" : null,
        "authorId" : "711a9ca0-8b90-435a-bf87-eb621aa1db13",
        "body" : "Just making sure I understand: Is this test also intending to test that the BM decommissioning thread cleanly exits on its own ? I forget whether that was easy to check or not. ",
        "createdAt" : "2020-08-04T06:16:36Z",
        "updatedAt" : "2020-08-05T18:39:14Z",
        "lastEditedBy" : "711a9ca0-8b90-435a-bf87-eb621aa1db13",
        "tags" : [
        ]
      },
      {
        "id" : "50c3af32-c7ac-49be-966b-b05881f49bdb",
        "parentId" : "6fdc9974-fee1-442c-8563-90d1934534c6",
        "authorId" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "body" : "No this test does not do that. We test that in the integration suite & the k8s suite.",
        "createdAt" : "2020-08-04T13:20:22Z",
        "updatedAt" : "2020-08-05T18:39:14Z",
        "lastEditedBy" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "tags" : [
        ]
      },
      {
        "id" : "54129867-8914-4aa4-b732-6643830b5a9c",
        "parentId" : "6fdc9974-fee1-442c-8563-90d1934534c6",
        "authorId" : "711a9ca0-8b90-435a-bf87-eb621aa1db13",
        "body" : "Okay, Although I don't see any changes to the K8s suite in this PR. I do see the wait for the executor removal in the BM integration suite in this PR.",
        "createdAt" : "2020-08-04T19:06:22Z",
        "updatedAt" : "2020-08-05T18:39:14Z",
        "lastEditedBy" : "711a9ca0-8b90-435a-bf87-eb621aa1db13",
        "tags" : [
        ]
      },
      {
        "id" : "c85ccd95-4240-468e-a84c-4b9bab27e255",
        "parentId" : "6fdc9974-fee1-442c-8563-90d1934534c6",
        "authorId" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "body" : "Your right, it's just covered in the BM integration suite. I was looking at changing the K8s suite as well but doing that could have made one of the parts not necessarily tested the way I wanted so I backed out those changes.",
        "createdAt" : "2020-08-05T18:36:49Z",
        "updatedAt" : "2020-08-05T18:39:14Z",
        "lastEditedBy" : "ae55b635-dd0e-41aa-9272-372de9a35f38",
        "tags" : [
        ]
      },
      {
        "id" : "1b716f9b-c530-433e-a54a-a7ae30280019",
        "parentId" : "6fdc9974-fee1-442c-8563-90d1934534c6",
        "authorId" : "711a9ca0-8b90-435a-bf87-eb621aa1db13",
        "body" : "Sounds good !",
        "createdAt" : "2020-08-05T20:57:40Z",
        "updatedAt" : "2020-08-05T20:58:08Z",
        "lastEditedBy" : "711a9ca0-8b90-435a-bf87-eb621aa1db13",
        "tags" : [
        ]
      }
    ],
    "commit" : "e81c3fc2d0b8c28cd0aedf08a7ea1e86a153ae49",
    "line" : 59,
    "diffHunk" : "@@ -1,1 +94,98 @@      }\n    } finally {\n      bmDecomManager.stop()\n    }\n  }"
  }
]