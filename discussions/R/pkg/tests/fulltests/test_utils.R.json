[
  {
    "id" : "dfe2ed47-72c7-41aa-8892-1f9df57bac9c",
    "prId" : 32709,
    "prUrl" : "https://github.com/apache/spark/pull/32709#pullrequestreview-672339025",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "83684e87-801c-428e-b289-92aacb916a7e",
        "parentId" : null,
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "This also seems like `testthat` uses `all.equal` internally which now compares environment of the functions (previously it didn't):\r\n\r\n> all.equal(f, g) for functions now by default also compares their environment(.)s, notably via new all.equal method for class function. Comparison of nls() fits, e.g., may now need all.equal(m1, m2, check.environment = FALSE).\r\n\r\nhttps://cran.r-project.org/doc/manuals/r-release/NEWS.html",
        "createdAt" : "2021-05-31T13:59:03Z",
        "updatedAt" : "2021-05-31T13:59:03Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      }
    ],
    "commit" : "97f3c0e0ef828a4374b2ed5740aac929c3597574",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +67,71 @@  if (as.numeric(R.Version()$major) >= 4 && !startsWith(R.Version()$minor, \"0\")) {\n    # 4.1+ checks environment in the function\n    expect_true(all.equal(actual, g, check.environment = FALSE))\n  } else {\n    expect_equal(actual, g)"
  }
]