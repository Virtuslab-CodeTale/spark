[
  {
    "id" : "b57a5a7b-f48a-4ec6-8349-fc01fdb62184",
    "prId" : 31936,
    "prUrl" : "https://github.com/apache/spark/pull/31936#pullrequestreview-620001464",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a28209e5-b58b-4826-8bd7-26ce5fbf98be",
        "parentId" : null,
        "authorId" : "bea80117-7be3-4703-8d54-02b7bf73632c",
        "body" : "again add comment about with YARN 2.9+",
        "createdAt" : "2021-03-24T13:29:59Z",
        "updatedAt" : "2021-03-29T17:15:56Z",
        "lastEditedBy" : "bea80117-7be3-4703-8d54-02b7bf73632c",
        "tags" : [
        ]
      },
      {
        "id" : "e818ef45-e3ad-4a5b-b4f5-ca09351265b7",
        "parentId" : "a28209e5-b58b-4826-8bd7-26ce5fbf98be",
        "authorId" : "ddb80038-2da6-4937-8c45-4d52fbe0300f",
        "body" : "This will work on YARN 2.7 and older as well. Made this more explicit here.",
        "createdAt" : "2021-03-24T17:12:07Z",
        "updatedAt" : "2021-03-29T17:15:56Z",
        "lastEditedBy" : "ddb80038-2da6-4937-8c45-4d52fbe0300f",
        "tags" : [
        ]
      }
    ],
    "commit" : "ef880526e05b6143c31d98829d22d25cea659401",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +84,88 @@ * Hadoop {@link Configuration} passed by the YARN NodeManager. It is also possible to configure\n * the shuffle service by placing a resource named\n * {@value SHUFFLE_SERVICE_CONF_OVERLAY_RESOURCE_NAME} into the classpath, which should be an\n * XML file in the standard Hadoop Configuration resource format. Note that when the shuffle\n * service is loaded in the default manner, without configuring"
  },
  {
    "id" : "9a2c566f-68e3-4d37-8916-fa8b63d12709",
    "prId" : 31936,
    "prUrl" : "https://github.com/apache/spark/pull/31936#pullrequestreview-619994810",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a3f3475f-beab-42db-934e-36da002eb172",
        "parentId" : null,
        "authorId" : "bea80117-7be3-4703-8d54-02b7bf73632c",
        "body" : "for yarn 2.9+",
        "createdAt" : "2021-03-24T13:31:05Z",
        "updatedAt" : "2021-03-29T17:15:56Z",
        "lastEditedBy" : "bea80117-7be3-4703-8d54-02b7bf73632c",
        "tags" : [
        ]
      },
      {
        "id" : "7c3655bb-7828-482c-b1a3-1f7b8c203e2a",
        "parentId" : "a3f3475f-beab-42db-934e-36da002eb172",
        "authorId" : "ddb80038-2da6-4937-8c45-4d52fbe0300f",
        "body" : "No, all versions of YARN, as discussed above.",
        "createdAt" : "2021-03-24T17:06:16Z",
        "updatedAt" : "2021-03-29T17:15:56Z",
        "lastEditedBy" : "ddb80038-2da6-4937-8c45-4d52fbe0300f",
        "tags" : [
        ]
      }
    ],
    "commit" : "ef880526e05b6143c31d98829d22d25cea659401",
    "line" : 63,
    "diffHunk" : "@@ -1,1 +171,175 @@  public YarnShuffleService() {\n    // The name of the auxiliary service configured within the NodeManager\n    // (`yarn.nodemanager.aux-services`) is treated as the source-of-truth, so this one can be\n    // arbitrary. The NodeManager will log a warning if the configured name doesn't match this name,\n    // to inform operators of a potential misconfiguration, but this name is otherwise not used."
  },
  {
    "id" : "d7a2049e-571e-4e0c-8a1b-1e0521bbeb86",
    "prId" : 28416,
    "prUrl" : "https://github.com/apache/spark/pull/28416#pullrequestreview-403904218",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "24e86856-7eaf-4b79-a6dc-5afe3b41f046",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "This one-line seems to be the intended contribution. Did you face some error with `numRegisteredConnections` while adding this? I'm wondering if there is a reason to remove `numRegisteredConnections`.",
        "createdAt" : "2020-04-30T21:54:07Z",
        "updatedAt" : "2020-05-08T00:37:05Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "f9241beb4c0d369276d7da6883825c5fb6540afa",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +199,203 @@      blockHandler.getAllMetrics().getMetrics().put(\"numRegisteredConnections\",\n          shuffleServer.getRegisteredConnections());\n      blockHandler.getAllMetrics().getMetrics().putAll(shuffleServer.getAllMetrics().getMetrics());\n      YarnShuffleServiceMetrics serviceMetrics =\n          new YarnShuffleServiceMetrics(blockHandler.getAllMetrics());"
  },
  {
    "id" : "b307c51c-2a3a-44f7-a87e-9c46e4fa3ea4",
    "prId" : 28416,
    "prUrl" : "https://github.com/apache/spark/pull/28416#pullrequestreview-403960176",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "eba381ae-e243-42bd-95e9-5f81557615a1",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "If we put all metrics at line 201, do we need to have this line?",
        "createdAt" : "2020-04-30T21:59:54Z",
        "updatedAt" : "2020-05-08T00:37:05Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "48c55194-3dac-446b-8c40-9a1732763bd2",
        "parentId" : "eba381ae-e243-42bd-95e9-5f81557615a1",
        "authorId" : "334a081c-cba1-403e-ac80-30e6124077d1",
        "body" : "Line 201 only adds all metrics from `NettyMemoryMetrics`. This line adds `numRegisteredConnections` from `TransportContext` which is actually counting the number of registrations as explained above.",
        "createdAt" : "2020-05-01T00:17:52Z",
        "updatedAt" : "2020-05-08T00:37:05Z",
        "lastEditedBy" : "334a081c-cba1-403e-ac80-30e6124077d1",
        "tags" : [
        ]
      }
    ],
    "commit" : "f9241beb4c0d369276d7da6883825c5fb6540afa",
    "line" : 2,
    "diffHunk" : "@@ -1,1 +197,201 @@\n      // register metrics on the block handler into the Node Manager's metrics system.\n      blockHandler.getAllMetrics().getMetrics().put(\"numRegisteredConnections\",\n          shuffleServer.getRegisteredConnections());\n      blockHandler.getAllMetrics().getMetrics().putAll(shuffleServer.getAllMetrics().getMetrics());"
  }
]