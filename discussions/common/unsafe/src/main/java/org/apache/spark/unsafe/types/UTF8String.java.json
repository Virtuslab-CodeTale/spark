[
  {
    "id" : "9988f6b3-78dd-4ff0-90d2-7488bfd0c0ef",
    "prId" : 28937,
    "prUrl" : "https://github.com/apache/spark/pull/28937#pullrequestreview-439760538",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5911c5b7-61b1-4043-99db-13d3482f4cc1",
        "parentId" : null,
        "authorId" : "99e31844-a5b3-48a2-af71-412edb607a13",
        "body" : "What happens if `len = 10` and `pos = Integer.MIN_VALUE`. I guess that `start` would have an incorrect value.",
        "createdAt" : "2020-06-28T06:41:43Z",
        "updatedAt" : "2020-06-28T07:23:38Z",
        "lastEditedBy" : "99e31844-a5b3-48a2-af71-412edb607a13",
        "tags" : [
        ]
      },
      {
        "id" : "191d12bc-b00a-44c3-9880-6422ef644132",
        "parentId" : "5911c5b7-61b1-4043-99db-13d3482f4cc1",
        "authorId" : "cd38bd5a-0fae-4d8e-8acd-36dc13753759",
        "body" : "The negative `pos` here `refers to the -ith element before the end of the sequence`, so if pos = Integer.MIN_VALUE, then the start should be `pos + len`. The final result of `EMPTY_UTF8` will be returned by `substring` when its param start and until are both negative. I also added a UT in 4dcfe81.",
        "createdAt" : "2020-06-28T07:32:52Z",
        "updatedAt" : "2020-06-28T07:32:52Z",
        "lastEditedBy" : "cd38bd5a-0fae-4d8e-8acd-36dc13753759",
        "tags" : [
        ]
      },
      {
        "id" : "cd9a4e64-6568-4963-8169-78a6889c77d5",
        "parentId" : "5911c5b7-61b1-4043-99db-13d3482f4cc1",
        "authorId" : "99e31844-a5b3-48a2-af71-412edb607a13",
        "body" : "I made misunderstaning. Thank you for clarification and adding a test.",
        "createdAt" : "2020-06-28T10:24:46Z",
        "updatedAt" : "2020-06-28T10:24:46Z",
        "lastEditedBy" : "99e31844-a5b3-48a2-af71-412edb607a13",
        "tags" : [
        ]
      },
      {
        "id" : "1b16a2ca-9470-48da-b915-91ae1bdfa973",
        "parentId" : "5911c5b7-61b1-4043-99db-13d3482f4cc1",
        "authorId" : "cd38bd5a-0fae-4d8e-8acd-36dc13753759",
        "body" : "Thanks for reviewing!",
        "createdAt" : "2020-06-30T07:55:05Z",
        "updatedAt" : "2020-06-30T07:55:05Z",
        "lastEditedBy" : "cd38bd5a-0fae-4d8e-8acd-36dc13753759",
        "tags" : [
        ]
      }
    ],
    "commit" : "4dcfe814d319ef9f04c9148bf9c82a9df191ac8c",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +342,346 @@    // refers to the first element.\n    int len = numChars();\n    // `len + pos` does not overflow as `len >= 0`.\n    int start = (pos > 0) ? pos -1 : ((pos < 0) ? len + pos : 0);\n"
  }
]