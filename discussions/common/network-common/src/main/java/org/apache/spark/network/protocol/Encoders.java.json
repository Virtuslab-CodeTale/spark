[
  {
    "id" : "81fd6aa1-8198-4be1-884b-c89a15ca7cb5",
    "prId" : 29855,
    "prUrl" : "https://github.com/apache/spark/pull/29855#pullrequestreview-495796827",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1a9ce36e-5d01-42de-af24-8f353c80b61d",
        "parentId" : null,
        "authorId" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "body" : "`BitmapArrays` results in calling `trim` and `runOptimize` twice - refactor so that it is only done once for this codepath ?",
        "createdAt" : "2020-09-24T02:38:09Z",
        "updatedAt" : "2020-10-13T15:54:30Z",
        "lastEditedBy" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "tags" : [
        ]
      },
      {
        "id" : "1c86fe6b-50bf-4039-9a79-d6d3732ee5e0",
        "parentId" : "1a9ce36e-5d01-42de-af24-8f353c80b61d",
        "authorId" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "body" : "I might have misread the code here; but want to make sure I am not missing anything.",
        "createdAt" : "2020-09-24T07:03:54Z",
        "updatedAt" : "2020-10-13T15:54:30Z",
        "lastEditedBy" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "tags" : [
        ]
      },
      {
        "id" : "b7878c97-cecd-4694-9328-16f6c52cc8bd",
        "parentId" : "1a9ce36e-5d01-42de-af24-8f353c80b61d",
        "authorId" : "15ef9b5b-1583-47d9-b883-14ebfd23a00a",
        "body" : "It should be invoked only once.\r\nBlockTransferMessage.toByteBuffer is where the initial call to encodedLength happens.\r\nIt's only called once for each RoaringBitmap in the bitmap array.",
        "createdAt" : "2020-09-24T17:30:03Z",
        "updatedAt" : "2020-10-13T15:54:30Z",
        "lastEditedBy" : "15ef9b5b-1583-47d9-b883-14ebfd23a00a",
        "tags" : [
        ]
      }
    ],
    "commit" : "2c95f18d2bdf9ac373b0d5319b686a1d66c1e72b",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +54,58 @@      // guarantees that the bitmap will always be compressed before being serialized.\n      b.trim();\n      b.runOptimize();\n      return b.serializedSizeInBytes();\n    }"
  }
]