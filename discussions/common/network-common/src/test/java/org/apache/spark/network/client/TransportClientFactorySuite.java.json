[
  {
    "id" : "00ad1ea7-e612-4a4a-bcb5-0c817cb5c45f",
    "prId" : 27943,
    "prUrl" : "https://github.com/apache/spark/pull/27943#pullrequestreview-382016910",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1362d118-4315-4e3b-a840-5ddb40e1540a",
        "parentId" : null,
        "authorId" : "bea80117-7be3-4703-8d54-02b7bf73632c",
        "body" : "seems safer to get port before close() just incase the close call cleans it up or makes it inaccessible.",
        "createdAt" : "2020-03-26T13:13:55Z",
        "updatedAt" : "2020-04-02T09:14:50Z",
        "lastEditedBy" : "bea80117-7be3-4703-8d54-02b7bf73632c",
        "tags" : [
        ]
      },
      {
        "id" : "613ecc3b-63fa-4eca-a527-9d27b6b26175",
        "parentId" : "1362d118-4315-4e3b-a840-5ddb40e1540a",
        "authorId" : "b6393788-12cc-4066-9294-857f4baec092",
        "body" : "I think It is not necessary.\r\nI have checked the code, the port would only been set during init()",
        "createdAt" : "2020-03-26T13:16:51Z",
        "updatedAt" : "2020-04-02T09:14:50Z",
        "lastEditedBy" : "b6393788-12cc-4066-9294-857f4baec092",
        "tags" : [
        ]
      },
      {
        "id" : "5e90e602-faa8-4e4b-ae3d-efb9b1285c18",
        "parentId" : "1362d118-4315-4e3b-a840-5ddb40e1540a",
        "authorId" : "b6393788-12cc-4066-9294-857f4baec092",
        "body" : "have modified the code, I think it would not affect the result of ci.",
        "createdAt" : "2020-03-26T13:33:32Z",
        "updatedAt" : "2020-04-02T09:14:50Z",
        "lastEditedBy" : "b6393788-12cc-4066-9294-857f4baec092",
        "tags" : [
        ]
      },
      {
        "id" : "35731398-f09e-4bc6-b56f-7055c1bcfbf7",
        "parentId" : "1362d118-4315-4e3b-a840-5ddb40e1540a",
        "authorId" : "bea80117-7be3-4703-8d54-02b7bf73632c",
        "body" : "thanks, I understand it works now, its just future proofing it incase someone decided to clear port on close or something.",
        "createdAt" : "2020-03-26T13:38:52Z",
        "updatedAt" : "2020-04-02T09:14:50Z",
        "lastEditedBy" : "bea80117-7be3-4703-8d54-02b7bf73632c",
        "tags" : [
        ]
      },
      {
        "id" : "26158823-490e-49d4-bfe0-a1645c6d5644",
        "parentId" : "1362d118-4315-4e3b-a840-5ddb40e1540a",
        "authorId" : "b6393788-12cc-4066-9294-857f4baec092",
        "body" : "got",
        "createdAt" : "2020-03-26T13:40:04Z",
        "updatedAt" : "2020-04-02T09:14:50Z",
        "lastEditedBy" : "b6393788-12cc-4066-9294-857f4baec092",
        "tags" : [
        ]
      }
    ],
    "commit" : "f9be82e249088ae083e2ac84b94be8e69bf50304",
    "line" : 40,
    "diffHunk" : "@@ -1,1 +235,239 @@    TransportClientFactory factory = context.createClientFactory();\n    TransportServer server = context.createServer();\n    int unreachablePort = server.getPort();\n    server.close();\n    try {"
  },
  {
    "id" : "fe4f6fe8-43f4-42ef-b86a-53e37e81e02e",
    "prId" : 27943,
    "prUrl" : "https://github.com/apache/spark/pull/27943#pullrequestreview-386244084",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fe519620-52d8-4778-915c-86cc9f52d881",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "shall we reset the `expectedException` after this test case completes?",
        "createdAt" : "2020-04-02T06:54:33Z",
        "updatedAt" : "2020-04-02T09:14:50Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "6da3c53c-25cf-4d56-a464-ce56aa39011e",
        "parentId" : "fe519620-52d8-4778-915c-86cc9f52d881",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "and AFAIK junit has `assertThrows` to check exception and error message.",
        "createdAt" : "2020-04-02T06:56:48Z",
        "updatedAt" : "2020-04-02T09:14:50Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "087124b3-207d-4f13-96ab-f73021fe9554",
        "parentId" : "fe519620-52d8-4778-915c-86cc9f52d881",
        "authorId" : "b6393788-12cc-4066-9294-857f4baec092",
        "body" : "It seems that we do not need reset the expectedException, it is unique for each test and there is also no reset method.\r\n\r\nYes, junit5 provides assertThrows api, but our junit version is junit4.\r\nAnd junit4 just provides `@Test(expected = Exception.class)`, it is not suit for this test.",
        "createdAt" : "2020-04-02T07:32:19Z",
        "updatedAt" : "2020-04-02T09:14:50Z",
        "lastEditedBy" : "b6393788-12cc-4066-9294-857f4baec092",
        "tags" : [
        ]
      },
      {
        "id" : "de2636b0-7f6d-4476-97b3-921ef704055e",
        "parentId" : "fe519620-52d8-4778-915c-86cc9f52d881",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "How do we associate `expectedException` to this specific test case?",
        "createdAt" : "2020-04-02T08:32:04Z",
        "updatedAt" : "2020-04-02T09:14:50Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "0c5c6b80-d3ee-4bde-8593-26543bbacf7b",
        "parentId" : "fe519620-52d8-4778-915c-86cc9f52d881",
        "authorId" : "b6393788-12cc-4066-9294-857f4baec092",
        "body" : "I think I get your point.\r\nDo you mean that add `expectedException = ExpectedException.none();` after this test case complete?\r\n\r\nI just refer the usage in SparkSubmitCommandBuilderSuite, it is the only suite uses **Rule** before this pr.",
        "createdAt" : "2020-04-02T08:45:31Z",
        "updatedAt" : "2020-04-02T09:14:50Z",
        "lastEditedBy" : "b6393788-12cc-4066-9294-857f4baec092",
        "tags" : [
        ]
      },
      {
        "id" : "0921fd50-995c-416e-a6b3-2024638939a9",
        "parentId" : "fe519620-52d8-4778-915c-86cc9f52d881",
        "authorId" : "b6393788-12cc-4066-9294-857f4baec092",
        "body" : "https://github.com/junit-team/junit4/blob/435d41f0d45cfdbc1a38e1ad4eb1d5300da533f9/src/main/java/org/junit/Rule.java#L27-L42\r\n\r\nHere is an example, this folder is a **Rule**.\r\nAs described in the comments, it would create a temporary folder before\r\n each test method, and deletes it after each.\r\nSo, I think **Rule** should be unique for each test. ",
        "createdAt" : "2020-04-02T09:00:55Z",
        "updatedAt" : "2020-04-02T09:14:50Z",
        "lastEditedBy" : "b6393788-12cc-4066-9294-857f4baec092",
        "tags" : [
        ]
      },
      {
        "id" : "94883eaf-b07a-4c41-ae6d-9c770b74a21d",
        "parentId" : "fe519620-52d8-4778-915c-86cc9f52d881",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "yea, let's reset to `ExpectedException.none()`.",
        "createdAt" : "2020-04-02T09:07:48Z",
        "updatedAt" : "2020-04-02T09:14:50Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "f6140354-27cb-4ea7-a6c9-4d4ce40497d6",
        "parentId" : "fe519620-52d8-4778-915c-86cc9f52d881",
        "authorId" : "b6393788-12cc-4066-9294-857f4baec092",
        "body" : "done.",
        "createdAt" : "2020-04-02T09:15:01Z",
        "updatedAt" : "2020-04-02T09:15:02Z",
        "lastEditedBy" : "b6393788-12cc-4066-9294-857f4baec092",
        "tags" : [
        ]
      }
    ],
    "commit" : "f9be82e249088ae083e2ac84b94be8e69bf50304",
    "line" : 49,
    "diffHunk" : "@@ -1,1 +244,248 @@    expectedException.expect(IOException.class);\n    expectedException.expectMessage(\"fail this connection directly\");\n    factory.createClient(TestUtils.getLocalHost(), unreachablePort, true);\n    expectedException = ExpectedException.none();\n  }"
  }
]