[
  {
    "id" : "9ad610d8-c6bc-48ed-8be5-b0b4ab7b2402",
    "prId" : 25299,
    "prUrl" : "https://github.com/apache/spark/pull/25299#pullrequestreview-317783678",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5dc4eba4-b275-4ada-9b9a-dd10817b3821",
        "parentId" : null,
        "authorId" : "0b3111e2-9584-4813-8cb5-8f40e119f71c",
        "body" : "?",
        "createdAt" : "2019-11-15T18:16:43Z",
        "updatedAt" : "2019-11-26T12:18:14Z",
        "lastEditedBy" : "0b3111e2-9584-4813-8cb5-8f40e119f71c",
        "tags" : [
        ]
      }
    ],
    "commit" : "da93837805efc76c83511eed6a71d49851b34945",
    "line" : 27,
    "diffHunk" : "@@ -1,1 +25,29 @@import org.apache.spark.network.protocol.Encoders;\n\n// Needed by ScalaDoc. See SPARK-7726\nimport static org.apache.spark.network.shuffle.protocol.BlockTransferMessage.Type;\n"
  },
  {
    "id" : "097b2aac-7bbe-4126-bf45-3bfe59c20de2",
    "prId" : 25299,
    "prUrl" : "https://github.com/apache/spark/pull/25299#pullrequestreview-318533589",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "769b21f9-214b-464b-a280-d4fe12dac677",
        "parentId" : null,
        "authorId" : "0b3111e2-9584-4813-8cb5-8f40e119f71c",
        "body" : "`new String[localDirs.length]`",
        "createdAt" : "2019-11-15T18:20:17Z",
        "updatedAt" : "2019-11-26T12:18:14Z",
        "lastEditedBy" : "0b3111e2-9584-4813-8cb5-8f40e119f71c",
        "tags" : [
        ]
      },
      {
        "id" : "945d4c6c-6794-4537-81c3-af9dbd5b88ea",
        "parentId" : "769b21f9-214b-464b-a280-d4fe12dac677",
        "authorId" : "123cc67f-f678-49be-8742-95bc35d8c5c4",
        "body" : "The `new String[localDirs.length]` will be a String array with the length of `localDirs.length` but all the item will be `null`. On the other hand `localDirs.toArray(new String[0])` will be filled with values of the `localDirs` array list. \r\n",
        "createdAt" : "2019-11-15T20:16:55Z",
        "updatedAt" : "2019-11-26T12:18:14Z",
        "lastEditedBy" : "123cc67f-f678-49be-8742-95bc35d8c5c4",
        "tags" : [
        ]
      },
      {
        "id" : "314ddffd-eb8d-4a9c-b084-616aebc409e0",
        "parentId" : "769b21f9-214b-464b-a280-d4fe12dac677",
        "authorId" : "0b3111e2-9584-4813-8cb5-8f40e119f71c",
        "body" : "Read the javadoc for `toArray`.",
        "createdAt" : "2019-11-15T20:25:08Z",
        "updatedAt" : "2019-11-26T12:18:14Z",
        "lastEditedBy" : "0b3111e2-9584-4813-8cb5-8f40e119f71c",
        "tags" : [
        ]
      },
      {
        "id" : "a5af0160-ad68-4154-955e-b19a5d807832",
        "parentId" : "769b21f9-214b-464b-a280-d4fe12dac677",
        "authorId" : "123cc67f-f678-49be-8742-95bc35d8c5c4",
        "body" : "I know what toArray does, but I misunderstood your comment. Now I know what you meant. \r\n",
        "createdAt" : "2019-11-15T20:44:08Z",
        "updatedAt" : "2019-11-26T12:18:14Z",
        "lastEditedBy" : "123cc67f-f678-49be-8742-95bc35d8c5c4",
        "tags" : [
        ]
      },
      {
        "id" : "74ef4cbc-ea76-48b9-b60c-97d47eeaf7b0",
        "parentId" : "769b21f9-214b-464b-a280-d4fe12dac677",
        "authorId" : "123cc67f-f678-49be-8742-95bc35d8c5c4",
        "body" : "I changed it locally then IntelliJ suggested to change it back to an empty array, so I read after a bit and they say calling it with empty array can be more effective:\r\n\r\n> Bottom line: toArray(new T[0]) seems faster, safer, and contractually cleaner, and therefore should be the default choice now. Future VM optimizations may close this performance gap for toArray(new T[size]), rendering the current \"believed to be optimal\" usages on par with an actually optimal one. Further improvements in toArray APIs would follow the same logic as toArray(new T[0]) — the collection itself should create the appropriate storage.\r\n\r\nhttps://shipilev.net/blog/2016/arrays-wisdom-ancients/\r\n",
        "createdAt" : "2019-11-18T18:20:42Z",
        "updatedAt" : "2019-11-26T12:18:14Z",
        "lastEditedBy" : "123cc67f-f678-49be-8742-95bc35d8c5c4",
        "tags" : [
        ]
      }
    ],
    "commit" : "da93837805efc76c83511eed6a71d49851b34945",
    "line" : 47,
    "diffHunk" : "@@ -1,1 +45,49 @@      index++;\n    }\n    this.allLocalDirs = localDirs.toArray(new String[0]);\n  }\n"
  }
]