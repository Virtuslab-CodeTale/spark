[
  {
    "id" : "a2753735-24af-413b-b0a7-2cc3f5ab8503",
    "prId" : 33613,
    "prUrl" : "https://github.com/apache/spark/pull/33613#pullrequestreview-722883247",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d4335e6e-8fc7-447d-9582-2f1579541617",
        "parentId" : null,
        "authorId" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "body" : "nit: Make this a static final field and return same instance always",
        "createdAt" : "2021-08-05T03:04:03Z",
        "updatedAt" : "2021-08-05T03:28:59Z",
        "lastEditedBy" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "tags" : [
        ]
      }
    ],
    "commit" : "52b709356b367a8616acffec9f7f3a0eec834fce",
    "line" : 46,
    "diffHunk" : "@@ -1,1 +138,142 @@        return !(t instanceof BlockPushNonFatalFailure);\n      }\n    };\n  }\n"
  },
  {
    "id" : "fd437e7d-f1de-4bdc-a604-ed4508a42691",
    "prId" : 33613,
    "prUrl" : "https://github.com/apache/spark/pull/33613#pullrequestreview-722883247",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "11186f6c-b3a4-45d3-b8f5-9a26d4f636da",
        "parentId" : null,
        "authorId" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "body" : "Move this to after the attemptId check.",
        "createdAt" : "2021-08-05T03:07:11Z",
        "updatedAt" : "2021-08-05T03:28:59Z",
        "lastEditedBy" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "tags" : [
        ]
      }
    ],
    "commit" : "52b709356b367a8616acffec9f7f3a0eec834fce",
    "line" : 103,
    "diffHunk" : "@@ -1,1 +396,400 @@  public StreamCallbackWithID receiveBlockDataAsStream(PushBlockStream msg) {\n    AppShuffleInfo appShuffleInfo = validateAndGetAppShuffleInfo(msg.appId);\n    if (appShuffleInfo.attemptId != msg.appAttemptId) {\n      // If this Block belongs to a former application attempt, it is considered late,\n      // as only the blocks from the current application attempt will be merged"
  },
  {
    "id" : "ee31a4d0-43f2-418b-a3d0-c031c9872eac",
    "prId" : 33613,
    "prUrl" : "https://github.com/apache/spark/pull/33613#pullrequestreview-722883247",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a9927c4b-054a-4a05-a2cf-bed0cb9925f0",
        "parentId" : null,
        "authorId" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "body" : "nit:\r\nGiven how frequently this will be called - make this into a static final read only bytebuffer we duplicate each time it is required ?\r\n\r\nSomething like:\r\n\r\n```\r\n    private static final ByteBuffer SUCCESS_BUFFER =\r\n            new BlockPushReturnCode(ReturnCode.SUCCESS.id()).toByteBuffer().asReadOnlyBuffer();\r\n```\r\n\r\nand getCompletionResponse -> `SUCCESS_BUFFER.duplicate()`",
        "createdAt" : "2021-08-05T03:16:12Z",
        "updatedAt" : "2021-08-05T03:28:59Z",
        "lastEditedBy" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "tags" : [
        ]
      }
    ],
    "commit" : "52b709356b367a8616acffec9f7f3a0eec834fce",
    "line" : 185,
    "diffHunk" : "@@ -1,1 +701,705 @@      return SUCCESS_RESPONSE.duplicate();\n    }\n\n    /**\n     * Write a ByteBuffer to the merged shuffle file. Here we keep track of the length of the"
  }
]