[
  {
    "id" : "d808970a-92cc-4dae-935f-2e9f8986c068",
    "prId" : 33451,
    "prUrl" : "https://github.com/apache/spark/pull/33451#pullrequestreview-715186611",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3c7991b5-6ac0-4c5c-a3b9-cce322159b83",
        "parentId" : null,
        "authorId" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "body" : "Btw, while looking at this, an unrelated potential issue - we use `intern` in `ExecutorDiskUtils`.\r\nProbably should move to using guava interner (`Utils.weakIntern` does this) ... thoughts @Ngone51 ?",
        "createdAt" : "2021-07-22T03:50:08Z",
        "updatedAt" : "2021-07-22T04:35:47Z",
        "lastEditedBy" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "tags" : [
        ]
      },
      {
        "id" : "dc43fd71-3696-472c-8c94-8b92922528d3",
        "parentId" : "3c7991b5-6ac0-4c5c-a3b9-cce322159b83",
        "authorId" : "171fe41b-96df-4362-a600-2d1f030de577",
        "body" : "Unfortunately, `Utils` can't be referenced in `network-shuffle` module.",
        "createdAt" : "2021-07-26T08:31:34Z",
        "updatedAt" : "2021-07-26T08:31:34Z",
        "lastEditedBy" : "171fe41b-96df-4362-a600-2d1f030de577",
        "tags" : [
        ]
      },
      {
        "id" : "cbdb1e78-9bde-4a8d-b690-2beeeafd630f",
        "parentId" : "3c7991b5-6ac0-4c5c-a3b9-cce322159b83",
        "authorId" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "body" : "Yeah, I meant something similar ... we dont need to do this for this PR btw; just thinking out.",
        "createdAt" : "2021-07-26T19:06:34Z",
        "updatedAt" : "2021-07-26T19:40:38Z",
        "lastEditedBy" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "tags" : [
        ]
      }
    ],
    "commit" : "ca1b058b6ccac9178859c56e2f7dd05f4ff68900",
    "line" : 30,
    "diffHunk" : "@@ -1,1 +394,398 @@      executor.localDirs,\n      executor.subDirsPerLocalDir,\n      fileName);\n    ManagedBuffer data = getBlockData(appId, execId, shuffleId, mapId, reduceId);\n    return ShuffleChecksumHelper.diagnoseCorruption("
  },
  {
    "id" : "cec57fa0-3795-49a9-963c-6e54714efe2a",
    "prId" : 33451,
    "prUrl" : "https://github.com/apache/spark/pull/33451#pullrequestreview-715186611",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ea90653a-3394-4150-8293-e88855fe0d77",
        "parentId" : null,
        "authorId" : "171fe41b-96df-4362-a600-2d1f030de577",
        "body" : "After we pass the `algorithm` to the server, finding the checksum file is no longer an issue. cc @mridulm @otterc ",
        "createdAt" : "2021-07-26T15:54:37Z",
        "updatedAt" : "2021-07-26T15:54:37Z",
        "lastEditedBy" : "171fe41b-96df-4362-a600-2d1f030de577",
        "tags" : [
        ]
      },
      {
        "id" : "a08c761a-d7ed-4d60-a6ed-c1d1c08f3139",
        "parentId" : "ea90653a-3394-4150-8293-e88855fe0d77",
        "authorId" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "body" : "That is a cleaner solution, thanks !\r\nWill also mean we can spread the checksum files without needing to couple it with the shuffle file in the dir layout.",
        "createdAt" : "2021-07-26T19:07:07Z",
        "updatedAt" : "2021-07-26T19:41:13Z",
        "lastEditedBy" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "tags" : [
        ]
      },
      {
        "id" : "1cf0f231-cbff-4aa8-9835-7b51ed7a2b56",
        "parentId" : "ea90653a-3394-4150-8293-e88855fe0d77",
        "authorId" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "body" : "nit: Add a comment that this should be in sync with `IndexShuffleBlockResolver.getChecksumFile` ?",
        "createdAt" : "2021-07-26T19:14:02Z",
        "updatedAt" : "2021-07-26T19:41:45Z",
        "lastEditedBy" : "d35df420-57a9-43e8-b8d5-cad0f4002681",
        "tags" : [
        ]
      }
    ],
    "commit" : "ca1b058b6ccac9178859c56e2f7dd05f4ff68900",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +390,394 @@    ExecutorShuffleInfo executor = executors.get(new AppExecId(appId, execId));\n    // This should be in sync with IndexShuffleBlockResolver.getChecksumFile\n    String fileName = \"shuffle_\" + shuffleId + \"_\" + mapId + \"_0.checksum.\" + algorithm;\n    File checksumFile = ExecutorDiskUtils.getFile(\n      executor.localDirs,"
  }
]