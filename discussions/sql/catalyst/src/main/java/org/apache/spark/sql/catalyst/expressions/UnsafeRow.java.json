[
  {
    "id" : "3b3afa01-78fc-40b3-8a39-27613e8ad293",
    "prId" : 29304,
    "prUrl" : "https://github.com/apache/spark/pull/29304#pullrequestreview-458862890",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8922d04b-61ef-4987-ba70-1a2af5e3e519",
        "parentId" : null,
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "Can you add doc for the method?",
        "createdAt" : "2020-07-30T17:27:32Z",
        "updatedAt" : "2020-08-04T22:55:52Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      },
      {
        "id" : "b87c1d20-5b38-43b3-91f9-dca83255aff9",
        "parentId" : "8922d04b-61ef-4987-ba70-1a2af5e3e519",
        "authorId" : "cce1c782-0596-44b6-8b99-6b77d2cca53c",
        "body" : "done.",
        "createdAt" : "2020-07-31T01:22:28Z",
        "updatedAt" : "2020-08-04T22:55:52Z",
        "lastEditedBy" : "cce1c782-0596-44b6-8b99-6b77d2cca53c",
        "tags" : [
        ]
      }
    ],
    "commit" : "054581ae1d8f6148db7ec952ac23e5668ff9dc75",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +595,599 @@   * return whether an UnsafeRow is null on every column.\n   */\n  public boolean allNull() {\n    for (int i = 0; i < numFields; i++) {\n      if (!BitSetMethods.isSet(baseObject, baseOffset, i)) {"
  },
  {
    "id" : "f2f3b545-6265-446b-93e6-865aa2aad92b",
    "prId" : 29304,
    "prUrl" : "https://github.com/apache/spark/pull/29304#pullrequestreview-459643624",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cb405de2-0d43-4d14-8a83-4ba29c97eeeb",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "nit: `return` -> `Return` and please add tests in `UnsafeRowSuite` if you add a new method here.",
        "createdAt" : "2020-08-02T11:59:06Z",
        "updatedAt" : "2020-08-04T22:55:52Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      }
    ],
    "commit" : "054581ae1d8f6148db7ec952ac23e5668ff9dc75",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +593,597 @@\n  /**\n   * return whether an UnsafeRow is null on every column.\n   */\n  public boolean allNull() {"
  },
  {
    "id" : "b84bd3e7-aad0-4d3f-8cfe-2e54c12830ec",
    "prId" : 29026,
    "prUrl" : "https://github.com/apache/spark/pull/29026#pullrequestreview-444374074",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2f8840b2-3799-4058-8b39-407c304c2c7c",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "Thanks to @allisonwang-db for catching this bug!",
        "createdAt" : "2020-07-07T16:30:52Z",
        "updatedAt" : "2020-07-07T16:30:52Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "9121382f-9ed4-43df-9140-d59086aafe85",
        "parentId" : "2f8840b2-3799-4058-8b39-407c304c2c7c",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "This looks valid for branch-3.0 and branch-2.4. Do you think we need to backport to to branch-2.4?",
        "createdAt" : "2020-07-08T02:29:23Z",
        "updatedAt" : "2020-07-08T02:29:24Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "189d0159-9ca7-462e-bd45-98caced5926a",
        "parentId" : "2f8840b2-3799-4058-8b39-407c304c2c7c",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "Yes we should",
        "createdAt" : "2020-07-08T02:40:50Z",
        "updatedAt" : "2020-07-08T02:40:51Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      }
    ],
    "commit" : "3717fc618548d80464788d07a9b1f81f4418ed81",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +289,293 @@      Platform.putLong(baseObject, baseOffset + cursor + 8, 0L);\n\n      if (value == null || !value.changePrecision(precision, value.scale())) {\n        setNullAt(ordinal);\n        // keep the offset for future update"
  },
  {
    "id" : "12152ab3-8b7f-4b53-b9dc-c20435eab711",
    "prId" : 28858,
    "prUrl" : "https://github.com/apache/spark/pull/28858#pullrequestreview-433975279",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a6beb396-ce17-44e2-bcca-6098e57fc5ec",
        "parentId" : null,
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "Problem is that you have to define the mapping for PySpark and SparkR too that's probably one of the tricky part.\r\nI think it's best to loop the dev mailing list and see if there's a big support for this. Otherwise, I'm not super supportive of it due to the maintenance cost.",
        "createdAt" : "2020-06-19T10:37:00Z",
        "updatedAt" : "2020-06-19T10:37:00Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      }
    ],
    "commit" : "d172dd4f913127c81ae3d4ba39318449b11c75dc",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +92,96 @@          DateType,\n          TimestampType,\n          TimeType\n        })));\n  }"
  },
  {
    "id" : "8a2a99a4-4e69-4f87-9a6e-f008ff6e1842",
    "prId" : 27747,
    "prUrl" : "https://github.com/apache/spark/pull/27747#pullrequestreview-367206830",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2f452a94-e774-490f-bcb1-5b325e70de9f",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "nit: how about this format?\r\n```\r\n    if (dt instanceof UserDefinedType) {\r\n      return isFixedLength(((UserDefinedType) dt).sqlType());\r\n    } else if (dt instanceof DecimalType) {\r\n      return ((DecimalType) dt).precision() <= Decimal.MAX_LONG_DIGITS();\r\n    } else {\r\n      return mutableFieldTypes.contains(dt);\r\n    }\r\n```",
        "createdAt" : "2020-03-01T06:11:40Z",
        "updatedAt" : "2020-03-02T06:39:33Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "f5e6e456-8e31-437a-9959-dba53b01ba11",
        "parentId" : "2f452a94-e774-490f-bcb1-5b325e70de9f",
        "authorId" : "0c28e5da-df9b-4076-bb67-3b6878f1f4ce",
        "body" : "I used this to emphasize UDT is handled specially (UDT type vs other types), but it's semantically same and I have no strong voice. Will change.",
        "createdAt" : "2020-03-01T23:11:31Z",
        "updatedAt" : "2020-03-02T06:39:33Z",
        "lastEditedBy" : "0c28e5da-df9b-4076-bb67-3b6878f1f4ce",
        "tags" : [
        ]
      },
      {
        "id" : "a9cc975f-f7de-45ed-b22f-df04c8735adc",
        "parentId" : "2f452a94-e774-490f-bcb1-5b325e70de9f",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "+1 for the merged form. BTW, can we keep the `DecimalType` as the first `if`? I guess `UserDefinedType` can be `else if` statement in the middle.",
        "createdAt" : "2020-03-01T23:44:22Z",
        "updatedAt" : "2020-03-02T06:39:33Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "508ba705-47ef-4241-a291-91142a00ffdb",
        "parentId" : "2f452a94-e774-490f-bcb1-5b325e70de9f",
        "authorId" : "0c28e5da-df9b-4076-bb67-3b6878f1f4ce",
        "body" : "Ordering doesn't matter by syntax, but it affects readability.\r\n\r\nAssume we are reading the code line by line when UDT parameter comes in here, we can simply find that it does recursive call with sqlType - then we can just go through with its sqlType without going back. If it is placed in the middle, once we read how UDT is handled like this we have to go back on first to follow how the sqlType is handled. That's why I previously put it separately, to represent \"early-return\".\r\n\r\nOne alternative approach: maybe it is more verbose, but adding while loop to extract the data type till the data type is UDT would be showing intention cleaner. WDYT?",
        "createdAt" : "2020-03-02T00:08:49Z",
        "updatedAt" : "2020-03-02T06:39:33Z",
        "lastEditedBy" : "0c28e5da-df9b-4076-bb67-3b6878f1f4ce",
        "tags" : [
        ]
      },
      {
        "id" : "5995dea9-0dbe-4484-ad2e-9c96c38ef551",
        "parentId" : "2f452a94-e774-490f-bcb1-5b325e70de9f",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "I'm fine with the current code. It's easier to read code when we return earlier for some special cases.",
        "createdAt" : "2020-03-02T13:44:19Z",
        "updatedAt" : "2020-03-02T13:44:19Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      }
    ],
    "commit" : "d724fa48dc8d9b419e46efd2a9d7858003908245",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +99,103 @@      return isFixedLength(((UserDefinedType) dt).sqlType());\n    }\n\n    if (dt instanceof DecimalType) {\n      return ((DecimalType) dt).precision() <= Decimal.MAX_LONG_DIGITS();"
  },
  {
    "id" : "12a85934-0a35-4666-96ea-2ef380176d57",
    "prId" : 27747,
    "prUrl" : "https://github.com/apache/spark/pull/27747#pullrequestreview-366895676",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "dde572c8-ae22-4257-8b0a-8e0cc7aa3523",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "ditto; how about the format, `if ... else ...`?",
        "createdAt" : "2020-03-01T06:12:36Z",
        "updatedAt" : "2020-03-02T06:39:33Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "27cb0d08-0788-472d-a3eb-5f55d92da148",
        "parentId" : "dde572c8-ae22-4257-8b0a-8e0cc7aa3523",
        "authorId" : "0c28e5da-df9b-4076-bb67-3b6878f1f4ce",
        "body" : "Same here. Will change.",
        "createdAt" : "2020-03-01T23:11:40Z",
        "updatedAt" : "2020-03-02T06:39:33Z",
        "lastEditedBy" : "0c28e5da-df9b-4076-bb67-3b6878f1f4ce",
        "tags" : [
        ]
      }
    ],
    "commit" : "d724fa48dc8d9b419e46efd2a9d7858003908245",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +110,114 @@    if (dt instanceof UserDefinedType) {\n      return isMutable(((UserDefinedType) dt).sqlType());\n    }\n\n    return mutableFieldTypes.contains(dt) || dt instanceof DecimalType ||"
  },
  {
    "id" : "b4dcf42d-6364-4d47-9af1-072124d7e33a",
    "prId" : 26680,
    "prUrl" : "https://github.com/apache/spark/pull/26680#pullrequestreview-323514230",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0f995055-9923-4e8c-b8fe-d83662e62a2d",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "shall we also zero-out the bytes if it's null?",
        "createdAt" : "2019-11-27T08:43:21Z",
        "updatedAt" : "2019-12-02T06:08:59Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "1cfbb680-d3e3-4111-bdc9-593d9ef3cfff",
        "parentId" : "0f995055-9923-4e8c-b8fe-d83662e62a2d",
        "authorId" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "body" : "Methinks only if we directly call `getInterval` API, otherwise, this won't hurt. WDYT?",
        "createdAt" : "2019-11-27T08:54:00Z",
        "updatedAt" : "2019-12-02T06:08:59Z",
        "lastEditedBy" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "tags" : [
        ]
      },
      {
        "id" : "8ec83eb3-26e6-4bdc-a4b6-58a5b25e108e",
        "parentId" : "0f995055-9923-4e8c-b8fe-d83662e62a2d",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "It's important to keep the binary format deterministic. If an interval field is null, it's better to guarantee that the value portion is all 0, rather than random values.\r\n\r\nWe can only rely on binary equality check if the binary format is deterministic.",
        "createdAt" : "2019-11-27T08:57:43Z",
        "updatedAt" : "2019-12-02T06:08:59Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "d51b534c-16ba-498f-8f6e-9bb7dfa90f11",
        "parentId" : "0f995055-9923-4e8c-b8fe-d83662e62a2d",
        "authorId" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "body" : "OK, let zero-out them to keep safe.",
        "createdAt" : "2019-11-27T09:02:16Z",
        "updatedAt" : "2019-12-02T06:08:59Z",
        "lastEditedBy" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "tags" : [
        ]
      }
    ],
    "commit" : "b87fdf69b8ea1b1a8546e32f0b7bfbc7fb0dd8b7",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +304,308 @@    long cursor = getLong(ordinal) >>> 32;\n    assert cursor > 0 : \"invalid cursor \" + cursor;\n    if (value == null) {\n      setNullAt(ordinal);\n      // zero-out the bytes"
  },
  {
    "id" : "23f0870c-5e03-4ae8-95d4-ee42445de08c",
    "prId" : 26680,
    "prUrl" : "https://github.com/apache/spark/pull/26680#pullrequestreview-323513882",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "93720230-fc00-4d1a-a96f-32d300f1be82",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "in `setDecimal` we use `cursor << 32`. Why change it?",
        "createdAt" : "2019-11-27T08:43:47Z",
        "updatedAt" : "2019-12-02T06:08:59Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "5383ecc6-c864-4ea4-be25-5d1fc63be5c5",
        "parentId" : "93720230-fc00-4d1a-a96f-32d300f1be82",
        "authorId" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "body" : "I have no strong opinion here, I do this just to make a reservation for the interval values in the variable-length portion.  I guess this won't be needed",
        "createdAt" : "2019-11-27T08:50:22Z",
        "updatedAt" : "2019-12-02T06:08:59Z",
        "lastEditedBy" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "tags" : [
        ]
      },
      {
        "id" : "e5197fc6-d4b8-44f1-bfe4-0315fcb5889d",
        "parentId" : "93720230-fc00-4d1a-a96f-32d300f1be82",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "This is different from decimal, which is var-length. We know the length is always 16 for interval values.\r\n\r\nAnyway, it doesn't hurt to encode the length here. Let's keep it.",
        "createdAt" : "2019-11-27T09:01:41Z",
        "updatedAt" : "2019-12-02T06:08:59Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      }
    ],
    "commit" : "b87fdf69b8ea1b1a8546e32f0b7bfbc7fb0dd8b7",
    "line" : 25,
    "diffHunk" : "@@ -1,1 +310,314 @@      Platform.putLong(baseObject, baseOffset + cursor + 8, 0L);\n      // keep the offset for future update\n      Platform.putLong(baseObject, getFieldOffset(ordinal), (cursor << 32) | 16L);\n    } else {\n      Platform.putInt(baseObject, baseOffset + cursor, value.months);"
  }
]