[
  {
    "id" : "2ba42aab-86b6-4aac-8172-ef9f59881717",
    "prId" : 24798,
    "prUrl" : "https://github.com/apache/spark/pull/24798#pullrequestreview-246865382",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "49672976-5903-4b25-bfb0-7227fb7afcd9",
        "parentId" : null,
        "authorId" : "806aa501-9ea7-4cec-b017-a84d9a1602d8",
        "body" : "It's not immediately obvious if this API belongs in `StagedTable`, or if it should be tied to the `BatchWrite`'s `commit()` operation. The idea I had with tying it to `StagedTable` is:\r\n\r\n1. Make the atomic swap part more explicit from the perspective of the physical plan execution, and\r\n2. Allow both `StagedTable` and `Table` to share the same `WriteBuilder` and `BatchWrite` implementations that persist the rows, and decouple the atomic swap in this module only.\r\n\r\nIf we wanted to move the swap implementation behind the `BatchWrite#commit` and `BatchWrite#abort` APIs, then it's worth asking if we need the `StagedTable` interface at all - so `TransactionalTableCatalog` would return plain `Table` objects.",
        "createdAt" : "2019-06-04T23:37:21Z",
        "updatedAt" : "2019-07-19T19:00:59Z",
        "lastEditedBy" : "806aa501-9ea7-4cec-b017-a84d9a1602d8",
        "tags" : [
        ]
      },
      {
        "id" : "25885b73-302e-4354-afec-a5654d3b517d",
        "parentId" : "49672976-5903-4b25-bfb0-7227fb7afcd9",
        "authorId" : "0fc9f1bc-0097-451e-915f-52da69a366f3",
        "body" : "I like this. So the write's commit stashes changes in the staged table, which can finish or roll back.",
        "createdAt" : "2019-06-06T23:08:00Z",
        "updatedAt" : "2019-07-19T19:00:59Z",
        "lastEditedBy" : "0fc9f1bc-0097-451e-915f-52da69a366f3",
        "tags" : [
        ]
      },
      {
        "id" : "7d4ac174-eaf6-4918-9469-0344c67e6573",
        "parentId" : "49672976-5903-4b25-bfb0-7227fb7afcd9",
        "authorId" : "0fc9f1bc-0097-451e-915f-52da69a366f3",
        "body" : "This also solves the problem of where to document how to complete the changes staged in a `StagedTable`. Can you add docs that describe what these methods should do, and for the `StagedTable` interface?",
        "createdAt" : "2019-06-06T23:44:16Z",
        "updatedAt" : "2019-07-19T19:00:59Z",
        "lastEditedBy" : "0fc9f1bc-0097-451e-915f-52da69a366f3",
        "tags" : [
        ]
      }
    ],
    "commit" : "05a827df7094b07a492add875c6e649df52db41f",
    "line" : 45,
    "diffHunk" : "@@ -1,1 +43,47 @@   * Finalize the creation or replacement of this table.\n   */\n  void commitStagedChanges();\n\n  /**"
  }
]