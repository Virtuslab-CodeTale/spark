[
  {
    "id" : "36dece38-bccb-4e78-a11d-18a470d0b948",
    "prId" : 33093,
    "prUrl" : "https://github.com/apache/spark/pull/33093#pullrequestreview-697639928",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3b3e46dc-4f25-4d6e-8149-b0c55b4d5af1",
        "parentId" : null,
        "authorId" : "9cd657f0-37cd-41bd-908a-f2c996b95a7a",
        "body" : "Non-streaming DataFrame/Dataset is not supported as the initial state in [flatMap|map]GroupsWithState operation on a streamiing DataFrame/Dataset",
        "createdAt" : "2021-07-01T13:16:51Z",
        "updatedAt" : "2021-07-01T13:16:51Z",
        "lastEditedBy" : "9cd657f0-37cd-41bd-908a-f2c996b95a7a",
        "tags" : [
        ]
      },
      {
        "id" : "35c56d7b-509d-4f55-82ec-b8b201d15076",
        "parentId" : "3b3e46dc-4f25-4d6e-8149-b0c55b4d5af1",
        "authorId" : "0e7383af-ae8f-4891-9ab6-e80efa3990c0",
        "body" : "done",
        "createdAt" : "2021-07-01T20:43:44Z",
        "updatedAt" : "2021-07-01T20:43:45Z",
        "lastEditedBy" : "0e7383af-ae8f-4891-9ab6-e80efa3990c0",
        "tags" : [
        ]
      }
    ],
    "commit" : "eb83b684fdc7d62846b3860f90d26ec119c136c5",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +240,244 @@\n          if (m.initialState.isStreaming) {\n            // initial state has to be a batch relation\n            throwError(\"Non-streaming DataFrame/Dataset is not supported as the\" +\n              \" initial state in [flatMap|map]GroupsWithState operation on a streaming\" +"
  },
  {
    "id" : "81621a60-2e53-4f8a-b39f-761dae6f076a",
    "prId" : 30395,
    "prUrl" : "https://github.com/apache/spark/pull/30395#pullrequestreview-539020953",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "59d361cb-6572-4a14-96b3-ba2db6205028",
        "parentId" : null,
        "authorId" : "cd38bd5a-0fae-4d8e-8acd-36dc13753759",
        "body" : "Let's also keep the comment https://github.com/apache/spark/pull/30395/files#diff-7c879c08d2f379c139d5229a88857229ae69bb48f0a138a3d64e1b2dde3502feL341 in this new method.",
        "createdAt" : "2020-11-25T17:02:47Z",
        "updatedAt" : "2020-11-30T02:06:35Z",
        "lastEditedBy" : "cd38bd5a-0fae-4d8e-8acd-36dc13753759",
        "tags" : [
        ]
      },
      {
        "id" : "cf3e1e40-2ac1-4c64-9584-9582a2c91c19",
        "parentId" : "59d361cb-6572-4a14-96b3-ba2db6205028",
        "authorId" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "body" : "@xuanyuanking - added back. sorry I was missing that in the first place.",
        "createdAt" : "2020-11-26T06:23:25Z",
        "updatedAt" : "2020-11-30T02:06:35Z",
        "lastEditedBy" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "tags" : [
        ]
      }
    ],
    "commit" : "5957b6fb2c0d0ab6ff850bc1a482e1363ba51943",
    "line" : 80,
    "diffHunk" : "@@ -1,1 +428,432 @@    // Check if the nullable side has a watermark, and there's a range condition which\n    // implies a state value watermark on the first side.\n    val hasValidWatermarkRange = join.joinType match {\n      case LeftOuter | LeftSemi => StreamingJoinHelper.getStateValueWatermark(\n        join.left.outputSet, join.right.outputSet, join.condition, Some(1000000)).isDefined"
  },
  {
    "id" : "635f59c8-673a-4606-be8b-aed7e9dd501b",
    "prId" : 30074,
    "prUrl" : "https://github.com/apache/spark/pull/30074#pullrequestreview-510864059",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "051f5901-a52a-4132-a01d-00286facf685",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Question. This `after` looks correct, doesn't it?",
        "createdAt" : "2020-10-17T01:31:17Z",
        "updatedAt" : "2020-10-17T01:31:18Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "222b11b1-5f01-4ac8-9b4f-9476462651a8",
        "parentId" : "051f5901-a52a-4132-a01d-00286facf685",
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "yes.",
        "createdAt" : "2020-10-17T01:44:25Z",
        "updatedAt" : "2020-10-17T01:44:26Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      },
      {
        "id" : "2ff5d36c-2a14-4c7f-b529-44246d69c42c",
        "parentId" : "051f5901-a52a-4132-a01d-00286facf685",
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "This is append mode.",
        "createdAt" : "2020-10-17T01:44:54Z",
        "updatedAt" : "2020-10-17T01:44:55Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      }
    ],
    "commit" : "ecf3d4c377c8e6d31d7c8082f3064a30cab40979",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +252,256 @@              } else if (collectStreamingAggregates(m).nonEmpty) {\n                throwError(\n                  \"flatMapGroupsWithState in append mode is not supported after \" +\n                    \"aggregation on a streaming DataFrame/Dataset\")\n              }"
  },
  {
    "id" : "393bc0d8-af03-445f-86dc-9fa67606869a",
    "prId" : 30074,
    "prUrl" : "https://github.com/apache/spark/pull/30074#pullrequestreview-510865513",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e1acab56-715a-4603-b848-b8ea04bed0cb",
        "parentId" : null,
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "Here it doesn't only collect aggregations after `FlatMapGroupsWithState`, but all aggregations in  the query.",
        "createdAt" : "2020-10-17T02:08:20Z",
        "updatedAt" : "2020-10-17T02:08:20Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      }
    ],
    "commit" : "ecf3d4c377c8e6d31d7c8082f3064a30cab40979",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +213,217 @@\n          // Check compatibility with output modes and aggregations in query\n          val aggsInQuery = collectStreamingAggregates(plan)\n\n          if (m.isMapGroupsWithState) {                       // check mapGroupsWithState"
  }
]