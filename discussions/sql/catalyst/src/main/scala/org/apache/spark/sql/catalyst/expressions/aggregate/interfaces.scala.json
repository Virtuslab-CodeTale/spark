[
  {
    "id" : "ca253edf-c3b3-4ef8-9cc9-dc0f75a8cfd5",
    "prId" : 31973,
    "prUrl" : "https://github.com/apache/spark/pull/31973#pullrequestreview-622888475",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6806aa4f-784a-4d81-af04-9599658bbf53",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "This is a good catch!\r\n\r\nOne more idea is to create an automatic test to check all the aggregate functions and make sure `defaultResult` matches the actual behavior: initialize the aggregate buffer and get the result directly.",
        "createdAt" : "2021-03-29T06:06:28Z",
        "updatedAt" : "2021-03-29T06:06:28Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      }
    ],
    "commit" : "aca8e94f2b58bd89e4a4d29260ae93115113cefb",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +206,210 @@   * Result of the aggregate function when the input is empty.\n   */\n  def defaultResult: Option[Literal] = None\n\n  /**"
  },
  {
    "id" : "f93c4ae2-e42b-46da-bd48-e5cd65ab3c1c",
    "prId" : 28869,
    "prUrl" : "https://github.com/apache/spark/pull/28869#pullrequestreview-433964196",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6dff0e01-81af-42bc-940e-4a2c3ad31e85",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "Ah, I see. This fix looks correct. Nice catch.",
        "createdAt" : "2020-06-19T10:18:14Z",
        "updatedAt" : "2020-06-22T03:41:22Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      }
    ],
    "commit" : "04a2d4485021b8be1aa66936e2ca071bd52990a6",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +141,145 @@    val aggAttributes = mode match {\n      case Partial | Complete => aggregateFunction.references\n      case PartialMerge | Final => AttributeSet(aggregateFunction.inputAggBufferAttributes)\n    }\n    aggAttributes ++ filterAttributes"
  },
  {
    "id" : "f3436bca-15fc-433f-af8f-619592221aae",
    "prId" : 27342,
    "prUrl" : "https://github.com/apache/spark/pull/27342#pullrequestreview-347259985",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9992888f-a38e-4965-84b1-0e5fbc90ad26",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "I checked and we don't call it repeatedly. `def` is good enough.",
        "createdAt" : "2020-01-23T12:30:24Z",
        "updatedAt" : "2020-01-23T12:41:50Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      }
    ],
    "commit" : "0b211f71a7cada742246e595d831ef2fc33461f1",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +110,114 @@  }\n\n  def filterAttributes: AttributeSet = filter.map(_.references).getOrElse(AttributeSet.empty)\n\n  // We compute the same thing regardless of our final result."
  },
  {
    "id" : "fa5f3736-9bd7-4dba-959e-ff10038486a1",
    "prId" : 27342,
    "prUrl" : "https://github.com/apache/spark/pull/27342#pullrequestreview-347262982",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b8ae5002-bf7a-42c8-811c-b421dca6ec1b",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "Oh, I checked this method is called inside the planning phase (`AggUtils` and `PhysicalAggregation`) only, so this fix looks reasonable.",
        "createdAt" : "2020-01-23T12:35:54Z",
        "updatedAt" : "2020-01-23T12:41:50Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      }
    ],
    "commit" : "0b211f71a7cada742246e595d831ef2fc33461f1",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +98,102 @@\n  @transient\n  lazy val resultAttribute: Attribute = if (aggregateFunction.resolved) {\n    AttributeReference(\n      aggregateFunction.toString,"
  }
]