[
  {
    "id" : "9a6e774f-5296-4b5b-a50e-9ed3a8957149",
    "prId" : 32648,
    "prUrl" : "https://github.com/apache/spark/pull/32648#pullrequestreview-666442999",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f4e58f52-4684-41c5-b456-e03c99d3f172",
        "parentId" : null,
        "authorId" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "body" : "```\r\n[ERROR] [Error] /spark/sql/catalyst/src/main/scala/org/apache/spark/sql/catalyst/util/TimestampFormatter.scala:109: type mismatch;\r\n found   : PartialFunction[Throwable,java.time.format.DateTimeFormatter]\r\n required: Throwable => Unit\r\n[INFO] [Info] : PartialFunction[Throwable,java.time.format.DateTimeFormatter] <: Throwable => Unit?\r\n[INFO] [Info] : false\r\n```",
        "createdAt" : "2021-05-24T06:48:22Z",
        "updatedAt" : "2021-05-24T06:48:22Z",
        "lastEditedBy" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "tags" : [
        ]
      }
    ],
    "commit" : "2a867a6277c1c6c4f1a6497973588304f907bede",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +108,112 @@      formatter\n    } catch checkLegacyFormatter(pattern, legacyFormatter.validatePatternString)\n    ()\n  }\n}"
  },
  {
    "id" : "c1c3e08b-0f07-41d6-b0fd-f6dfa7f84bad",
    "prId" : 28678,
    "prUrl" : "https://github.com/apache/spark/pull/28678#pullrequestreview-421464186",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2209fe9a-77bc-40f4-b99c-0d9d00b35b00",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "is it the same with Spark 2.4?",
        "createdAt" : "2020-05-31T04:01:43Z",
        "updatedAt" : "2020-05-31T04:01:44Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "b2b9a7b4-828b-41c7-b5a5-cd32b6d67586",
        "parentId" : "2209fe9a-77bc-40f4-b99c-0d9d00b35b00",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "Spark 2.4 uses SimpleDateFormat but output of FastDateFormat and SimpleDateFormat for the concrete pattern `yyyy-MM-dd HH:mm:ss` is the same. At least, all our tests show no difference.",
        "createdAt" : "2020-05-31T06:03:31Z",
        "updatedAt" : "2020-05-31T06:03:32Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      }
    ],
    "commit" : "5e050ea85eec9e662e5b7b49f483f3de32913931",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +122,126 @@    zoneId,\n    TimestampFormatter.defaultLocale,\n    LegacyDateFormats.FAST_DATE_FORMAT,\n    needVarLengthSecondFraction = false) {\n"
  },
  {
    "id" : "2717d1b0-5324-4634-a566-2b76df7952df",
    "prId" : 28643,
    "prUrl" : "https://github.com/apache/spark/pull/28643#pullrequestreview-419224300",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2223b305-ad9a-4d0a-8949-1abaa80ea2f7",
        "parentId" : null,
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "I borrowed the implementation from JDK 11 java.sql.Timestamp.toString:\r\nhttps://github.com/AdoptOpenJDK/openjdk-jdk11/blob/master/src/java.sql/share/classes/java/sql/Timestamp.java#L266-L313",
        "createdAt" : "2020-05-27T13:22:50Z",
        "updatedAt" : "2020-05-27T13:32:07Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      },
      {
        "id" : "4153e956-6711-4afe-bb86-3175567cf35a",
        "parentId" : "2223b305-ad9a-4d0a-8949-1abaa80ea2f7",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "Does perf matter so much here? It's much simpler to write\r\n```\r\nwhile (nanos % 10 == 0) {\r\n  nanos /= 10\r\n}\r\nformatted + \".\" + nanos.toString\r\n```",
        "createdAt" : "2020-05-27T13:37:45Z",
        "updatedAt" : "2020-05-27T13:37:46Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "fa9d6d0e-d153-4365-be9e-2cc6cfb5754d",
        "parentId" : "2223b305-ad9a-4d0a-8949-1abaa80ea2f7",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "This code is wrong. For example, if nanos = 000001000. You removed trailing zeros in the loop, and get just `1`. So, the result will be `.1` which is wrong. It should be `.000001`.",
        "createdAt" : "2020-05-27T13:47:05Z",
        "updatedAt" : "2020-05-27T13:47:05Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      }
    ],
    "commit" : "292311a39be3be97c1230e62753e5887c82f1bfd",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +136,140 @@      formatted\n    } else {\n      // Formats non-zero seconds fraction w/o trailing zeros. For example:\n      //   formatted = '2020-05:27 15:55:30'\n      //   nanos = 001234000"
  },
  {
    "id" : "03f22d8b-fe6e-4b4a-b1d1-c6a2d36e68ef",
    "prId" : 28582,
    "prUrl" : "https://github.com/apache/spark/pull/28582#pullrequestreview-415338950",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1ed2ab8b-20c9-427a-8f07-39c4ca486055",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "what's wrong if we still pass the empty string as the pattern?",
        "createdAt" : "2020-05-20T12:10:22Z",
        "updatedAt" : "2020-05-20T14:09:05Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "6bab4593-eda5-4d39-9b05-f08002d4134d",
        "parentId" : "1ed2ab8b-20c9-427a-8f07-39c4ca486055",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "empty result",
        "createdAt" : "2020-05-20T12:57:02Z",
        "updatedAt" : "2020-05-20T14:09:05Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      },
      {
        "id" : "740e67dc-5fc2-48c2-bbd0-39e51d08817f",
        "parentId" : "1ed2ab8b-20c9-427a-8f07-39c4ca486055",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "ok, it's used by the legacy formatter.",
        "createdAt" : "2020-05-20T13:33:59Z",
        "updatedAt" : "2020-05-20T14:09:05Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      }
    ],
    "commit" : "31e8ffdcedfc417909f842f469c3e86889a8af42",
    "line" : 35,
    "diffHunk" : "@@ -1,1 +112,116 @@class FractionTimestampFormatter(zoneId: ZoneId)\n  extends Iso8601TimestampFormatter(\n    TimestampFormatter.defaultPattern,\n    zoneId,\n    TimestampFormatter.defaultLocale,"
  },
  {
    "id" : "23c4ec6b-3e53-404e-bc03-135a8b3b7f32",
    "prId" : 27906,
    "prUrl" : "https://github.com/apache/spark/pull/27906#pullrequestreview-375408079",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8d15cdb0-46be-4390-9db4-d36443eae503",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "Seems we can remove it, and simply create `Iso8601TimestampFormatter` with `isParsing =true`.",
        "createdAt" : "2020-03-16T15:28:31Z",
        "updatedAt" : "2020-03-17T07:11:18Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "ad398539-6165-4aa3-b5f2-4cda77d6aa7a",
        "parentId" : "8d15cdb0-46be-4390-9db4-d36443eae503",
        "authorId" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "body" : "do you mean false here, this formatter is used in formating not parsing as I see in the caller side",
        "createdAt" : "2020-03-16T16:17:30Z",
        "updatedAt" : "2020-03-17T07:11:18Z",
        "lastEditedBy" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "tags" : [
        ]
      },
      {
        "id" : "b8e7804d-3036-439b-bac5-2fd1bdb536cd",
        "parentId" : "8d15cdb0-46be-4390-9db4-d36443eae503",
        "authorId" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "body" : "do we do it in this or another pr?",
        "createdAt" : "2020-03-16T16:18:12Z",
        "updatedAt" : "2020-03-17T07:11:18Z",
        "lastEditedBy" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "tags" : [
        ]
      },
      {
        "id" : "36d0ee64-b7c2-490d-bcdd-e86252a0de73",
        "parentId" : "8d15cdb0-46be-4390-9db4-d36443eae503",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "Now I'm wondering if `isParsing` is a good name. Here we do formatting, but we want to use var-length second fraction to avoid padding `0` at the end.\r\n\r\nHow about renaming to `needVarLengthSecondFraction`? We can use `false` as the default value then many tests do not need to be changed.",
        "createdAt" : "2020-03-16T16:37:42Z",
        "updatedAt" : "2020-03-17T07:11:18Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "64033fd1-2bbc-45b2-ada6-3b0c9563a5b7",
        "parentId" : "8d15cdb0-46be-4390-9db4-d36443eae503",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "BTW I'm OK to remove `FractionTimestampFormatter` in followup.",
        "createdAt" : "2020-03-16T16:38:09Z",
        "updatedAt" : "2020-03-17T07:11:18Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "acc22b5a-6f53-4734-a280-b1152d66a55b",
        "parentId" : "8d15cdb0-46be-4390-9db4-d36443eae503",
        "authorId" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "body" : "OK, I will check that after this one",
        "createdAt" : "2020-03-16T16:55:07Z",
        "updatedAt" : "2020-03-17T07:11:18Z",
        "lastEditedBy" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "tags" : [
        ]
      }
    ],
    "commit" : "ec4408341fc8589becdc67e8fa7231cd07ec4d7f",
    "line" : 27,
    "diffHunk" : "@@ -1,1 +97,101 @@ * @param zoneId the time zone identifier in which the formatter parses or format timestamps\n */\nclass FractionTimestampFormatter(zoneId: ZoneId)\n  extends Iso8601TimestampFormatter(\n    \"\", zoneId, TimestampFormatter.defaultLocale, needVarLengthSecondFraction = false) {"
  },
  {
    "id" : "b37a2c1e-4772-4cdd-a128-4bfc53c94e64",
    "prId" : 27524,
    "prUrl" : "https://github.com/apache/spark/pull/27524#pullrequestreview-356314476",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "967fb66f-78c2-4011-8f47-7b7a50bad291",
        "parentId" : null,
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "This is a copy-paste from 2.4",
        "createdAt" : "2020-02-10T22:32:53Z",
        "updatedAt" : "2020-02-11T07:33:41Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      }
    ],
    "commit" : "93f3ae1c32f893cc3cc22ae075753098440e76b5",
    "line" : 39,
    "diffHunk" : "@@ -1,1 +101,105 @@ * directly before formatting.\n */\nclass MicrosCalendar(tz: TimeZone, digitsInFraction: Int)\n  extends GregorianCalendar(tz, Locale.US) {\n  // Converts parsed `MILLISECOND` field to seconds fraction in microsecond precision."
  }
]