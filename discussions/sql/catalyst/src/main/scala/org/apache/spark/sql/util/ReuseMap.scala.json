[
  {
    "id" : "fbf44f12-d3d3-4b02-bd7b-77786860fb43",
    "prId" : 28885,
    "prUrl" : "https://github.com/apache/spark/pull/28885#pullrequestreview-451438488",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2dd06411-6d4f-4b59-8346-71526aed5f23",
        "parentId" : null,
        "authorId" : "123cc67f-f678-49be-8742-95bc35d8c5c4",
        "body" : "Nit: this might be a better name: `transformReusedOrAdd` and/or consider rename `f` to `funcOnReused`. What do you think?\r\n\r\n",
        "createdAt" : "2020-07-16T13:52:06Z",
        "updatedAt" : "2021-03-19T12:14:59Z",
        "lastEditedBy" : "123cc67f-f678-49be-8742-95bc35d8c5c4",
        "tags" : [
        ]
      },
      {
        "id" : "9b1f54b3-6d94-4839-894d-1d4426dd6b75",
        "parentId" : "2dd06411-6d4f-4b59-8346-71526aed5f23",
        "authorId" : "3d4870da-39a8-4406-b00d-131930d14cd8",
        "body" : "Thanks @attilapiros for the feedback. I agree with you and I'm happy to rename the method and but I would wait a bit for some more feedback from others as I've renamed this method a few times.",
        "createdAt" : "2020-07-20T09:22:35Z",
        "updatedAt" : "2021-03-19T12:14:59Z",
        "lastEditedBy" : "3d4870da-39a8-4406-b00d-131930d14cd8",
        "tags" : [
        ]
      }
    ],
    "commit" : "7187ebd2e053570d92017100dba4a0738fa2f014",
    "line" : 65,
    "diffHunk" : "@@ -1,1 +63,67 @@   * @return the matching plan with `f` applied or the input plan\n   */\n  def reuseOrElseAdd[T2 >: T](plan: T, f: T => T2): T2 = {\n    val found = lookupOrElseAdd(plan)\n    if (found eq plan) {"
  },
  {
    "id" : "d4f89c45-007c-44f8-a370-2c09d23cc965",
    "prId" : 28885,
    "prUrl" : "https://github.com/apache/spark/pull/28885#pullrequestreview-454969099",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d6f3fbec-a68c-4628-9b05-4607fa55c911",
        "parentId" : null,
        "authorId" : "3d4870da-39a8-4406-b00d-131930d14cd8",
        "body" : "It might look like `T2` is not required, but it is \"silently\" used at `sameSchema.find(plan.sameResult)` and Scala would complain without it.",
        "createdAt" : "2020-07-24T15:12:24Z",
        "updatedAt" : "2021-03-19T12:14:59Z",
        "lastEditedBy" : "3d4870da-39a8-4406-b00d-131930d14cd8",
        "tags" : [
        ]
      }
    ],
    "commit" : "7187ebd2e053570d92017100dba4a0738fa2f014",
    "line" : 35,
    "diffHunk" : "@@ -1,1 +33,37 @@ * @tparam T2 the type of the canonicalized node\n */\nclass ReuseMap[T <: T2, T2 <: QueryPlan[T2]] {\n  private val map = Map[StructType, ArrayBuffer[T]]()\n"
  }
]