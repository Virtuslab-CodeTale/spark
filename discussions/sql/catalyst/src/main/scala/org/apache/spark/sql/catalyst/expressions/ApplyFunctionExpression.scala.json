[
  {
    "id" : "22cc37b8-fd08-4f34-84bb-5b5446f0743c",
    "prId" : 32507,
    "prUrl" : "https://github.com/apache/spark/pull/32507#pullrequestreview-657507865",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "de03afe3-c463-414a-ad56-ccf7ed5ca379",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "shall we simply use a while loop with a counter? Adding a lazy val as a class member variable looks a bit heavy.",
        "createdAt" : "2021-05-12T02:34:19Z",
        "updatedAt" : "2021-05-12T02:34:19Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "458ce73a-fa03-4fef-8414-1d73b688d926",
        "parentId" : "de03afe3-c463-414a-ad56-ccf7ed5ca379",
        "authorId" : "9ae00886-75a7-4f39-aed7-d47b26b67afb",
        "body" : "I'm not sure if this is very useful. After the change the cost of the loop is negligible:\r\n\r\n<img width=\"806\" alt=\"Screen Shot 2021-05-11 at 10 56 15 AM\" src=\"https://user-images.githubusercontent.com/506679/117926975-6c8a7900-b2ae-11eb-9f2b-9b40f0873115.png\">\r\n\r\nPlus I think `foreach` is easier to read.",
        "createdAt" : "2021-05-12T06:13:52Z",
        "updatedAt" : "2021-05-12T06:13:52Z",
        "lastEditedBy" : "9ae00886-75a7-4f39-aed7-d47b26b67afb",
        "tags" : [
        ]
      },
      {
        "id" : "6842e4e7-79d0-4177-9f52-c30129e097cc",
        "parentId" : "de03afe3-c463-414a-ad56-ccf7ed5ca379",
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "Actually @sunchao it's in the style guide: https://github.com/databricks/scala-style-guide#traversal-and-zipwithindex (and looks like here's a hot path).",
        "createdAt" : "2021-05-12T06:17:49Z",
        "updatedAt" : "2021-05-12T06:18:37Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "eff9df66-debb-4313-aa51-bca38ec67334",
        "parentId" : "de03afe3-c463-414a-ad56-ccf7ed5ca379",
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "I think it's worthwhile trying.",
        "createdAt" : "2021-05-12T06:19:25Z",
        "updatedAt" : "2021-05-12T06:19:25Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "bfebfa82-a846-4425-997b-5ef9c81e74b4",
        "parentId" : "de03afe3-c463-414a-ad56-ccf7ed5ca379",
        "authorId" : "9ae00886-75a7-4f39-aed7-d47b26b67afb",
        "body" : "Sure I can give it a try later if you have strong opinion on this. ",
        "createdAt" : "2021-05-12T06:23:42Z",
        "updatedAt" : "2021-05-12T06:23:42Z",
        "lastEditedBy" : "9ae00886-75a7-4f39-aed7-d47b26b67afb",
        "tags" : [
        ]
      },
      {
        "id" : "db15d1b8-85e2-4913-8a83-90093c0aa52c",
        "parentId" : "de03afe3-c463-414a-ad56-ccf7ed5ca379",
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "thanks man!",
        "createdAt" : "2021-05-12T06:31:23Z",
        "updatedAt" : "2021-05-12T06:31:23Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "01f4f1dd-1932-470f-8084-1b0526c53db6",
        "parentId" : "de03afe3-c463-414a-ad56-ccf7ed5ca379",
        "authorId" : "9ae00886-75a7-4f39-aed7-d47b26b67afb",
        "body" : "Running benchmarks now. Let's see.",
        "createdAt" : "2021-05-12T06:35:03Z",
        "updatedAt" : "2021-05-12T06:35:04Z",
        "lastEditedBy" : "9ae00886-75a7-4f39-aed7-d47b26b67afb",
        "tags" : [
        ]
      }
    ],
    "commit" : "900f34c8f9faf98b3aaf47bd21fe2cbad2a2f659",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +35,39 @@  /** Returns the result of evaluating this expression on a given input Row */\n  override def eval(input: InternalRow): Any = {\n    childrenWithIndex.foreach {\n      case (expr, pos) =>\n        reusedRow.update(pos, expr.eval(input))"
  }
]