[
  {
    "id" : "bca9fbba-0607-4132-ad17-ed266c521a05",
    "prId" : 30412,
    "prUrl" : "https://github.com/apache/spark/pull/30412#pullrequestreview-534129459",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "078d8364-ac9c-40b6-a51d-47c194b7f3ae",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "How about checking if `length` has a valid number in the constructor of char/vchar? \r\n```\r\n  if (length > 0) {\r\n    throw new AnalysisException(\"XXX\")\r\n  }\r\n```",
        "createdAt" : "2020-11-19T05:24:34Z",
        "updatedAt" : "2020-11-27T10:45:20Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "693121eb-e9ad-436d-af7a-b1ebabc3e84c",
        "parentId" : "078d8364-ac9c-40b6-a51d-47c194b7f3ae",
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "Also, how about setting a reasonable max length for these types like postgresql does so?\r\n```\r\npostgres=# create table t (v char(100000000));\r\nERROR:  length for type char cannot exceed 10485760\r\nLINE 1: create table t (v char(100000000));\r\n```",
        "createdAt" : "2020-11-19T05:25:43Z",
        "updatedAt" : "2020-11-27T10:45:20Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "72ec8a57-ec33-475e-b870-a929a0469cb0",
        "parentId" : "078d8364-ac9c-40b6-a51d-47c194b7f3ae",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "VarcharType was already there: https://github.com/apache/spark/pull/30412/files#diff-aacc5ed42589c636615a3c09a44fa6a5248195242c9fbe0e996db17471cd35fdL79\r\n\r\nI think it's a good idea to check the negative value, but adding max length should be done separately.",
        "createdAt" : "2020-11-19T07:03:56Z",
        "updatedAt" : "2020-11-27T10:45:20Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      }
    ],
    "commit" : "73b99dc7a98f5d0673d309adba457cd19144be92",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +24,28 @@\n@Experimental\ncase class VarcharType(length: Int) extends AtomicType {\n  require(length >= 0, \"The length of varchar type cannot be negative.\")\n"
  }
]