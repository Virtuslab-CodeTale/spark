[
  {
    "id" : "4f3f2de6-1e6b-4f1f-97b0-5d6f876f1bbd",
    "prId" : 32700,
    "prUrl" : "https://github.com/apache/spark/pull/32700#pullrequestreview-673668766",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b3e017b8-db66-4f80-96ca-db83e4f0013c",
        "parentId" : null,
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "I don't need a benchmark or anything, but is this much faster if it calls this method repeatedly? I think it saves some common computation, from what I can see",
        "createdAt" : "2021-05-29T14:09:52Z",
        "updatedAt" : "2021-05-29T14:09:52Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      },
      {
        "id" : "768ac8c6-5039-4fb2-b9fd-0c3accef0b82",
        "parentId" : "b3e017b8-db66-4f80-96ca-db83e4f0013c",
        "authorId" : "1813f798-c755-4819-85f0-4341d04fac45",
        "body" : "If by this method you mean `QuantileSummaries.query` then there is evidence from profiles that this method becomes a bottleneck as the percentile list grows, and in particular the redundant computation seems to be the root cause. ",
        "createdAt" : "2021-06-01T23:28:54Z",
        "updatedAt" : "2021-06-01T23:28:55Z",
        "lastEditedBy" : "1813f798-c755-4819-85f0-4341d04fac45",
        "tags" : [
        ]
      }
    ],
    "commit" : "cb7df0665e05ae4af91f64ba0b1e1d4b74771da7",
    "line" : 99,
    "diffHunk" : "@@ -1,1 +299,303 @@        } else {\n          val (newIndex, newMinRank, approxQuantile) =\n            findApproxQuantile(index, minRank, targetError, percentile)\n          index = newIndex\n          minRank = newMinRank"
  }
]