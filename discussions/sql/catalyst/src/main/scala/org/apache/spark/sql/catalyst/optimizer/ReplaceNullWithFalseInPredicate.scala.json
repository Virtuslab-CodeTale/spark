[
  {
    "id" : "f56c423a-2dc3-48e8-8bf6-71a435972d99",
    "prId" : 31797,
    "prUrl" : "https://github.com/apache/spark/pull/31797#pullrequestreview-610397809",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "224b5fc0-3753-4580-9437-7bef8ca6617e",
        "parentId" : null,
        "authorId" : "baca2fab-b749-483f-8c77-c4db14eca9d9",
        "body" : "`null in (xxx)`  is a special case that we have already handled in `NullPropagation`, but it's better that return the same result whether other rule is excluded. We also add the `value` pattern here.",
        "createdAt" : "2021-03-11T04:24:33Z",
        "updatedAt" : "2021-03-12T02:15:15Z",
        "lastEditedBy" : "baca2fab-b749-483f-8c77-c4db14eca9d9",
        "tags" : [
        ]
      },
      {
        "id" : "6608845f-9921-4afa-b59e-15beda6ab842",
        "parentId" : "224b5fc0-3753-4580-9437-7bef8ca6617e",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "Can we add some comments to explain the rationale?\r\n\r\nif `value` is null, the IN result is null and thus `Not(null)` means false. If `value` is not null but the list contains null values, the IN result can be either `true` or `null`, and thus the final result after Not is always false as a predicate.",
        "createdAt" : "2021-03-11T13:41:00Z",
        "updatedAt" : "2021-03-12T02:15:15Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "ea1e17d9-e967-40fa-898e-f68881a29ab7",
        "parentId" : "224b5fc0-3753-4580-9437-7bef8ca6617e",
        "authorId" : "baca2fab-b749-483f-8c77-c4db14eca9d9",
        "body" : "Yes, it's better to add the comment.",
        "createdAt" : "2021-03-12T02:16:05Z",
        "updatedAt" : "2021-03-12T02:16:05Z",
        "lastEditedBy" : "baca2fab-b749-483f-8c77-c4db14eca9d9",
        "tags" : [
        ]
      }
    ],
    "commit" : "b61da86a30da85c87a9071ec38eb472c186bbd6b",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +102,106 @@    // `1 not in (2, NULL)` -> NULL\n    // In predicate, NULL is equal to false, so we can simplify them to false directly.\n    case Not(In(value, list)) if (value +: list).exists(isNullLiteral) =>\n      FalseLiteral\n    case Not(InSet(value, list)) if isNullLiteral(value) || list.contains(null) =>"
  },
  {
    "id" : "481858d5-3388-4974-a209-084d13a2e8c3",
    "prId" : 30953,
    "prUrl" : "https://github.com/apache/spark/pull/30953#pullrequestreview-559293216",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2307a8f8-1ccb-40ae-9364-02f3ffaa8899",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "The change is needed here to not fail the existing tests. When we convert `If` to `EqualNullSafe`, we should make sure the rule `ReplaceNullWithFalseInPredicate` still applies.",
        "createdAt" : "2020-12-28T18:34:54Z",
        "updatedAt" : "2020-12-28T18:34:54Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "54113fea-1b55-4709-abbf-e5d6e8a7c262",
        "parentId" : "2307a8f8-1ccb-40ae-9364-02f3ffaa8899",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "It would be great if someone can pull this out and open a separated PR/JIRA. Otherwise, I'll do it tomorrow.",
        "createdAt" : "2020-12-28T18:36:02Z",
        "updatedAt" : "2020-12-28T18:36:03Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "2eaed4dc-eefe-4125-8057-a8b1b259f77d",
        "parentId" : "2307a8f8-1ccb-40ae-9364-02f3ffaa8899",
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "`NullPropagation` should optimize `EqualNullSafe(null, TrueLiteral)` to false too, isn't?",
        "createdAt" : "2020-12-28T20:06:29Z",
        "updatedAt" : "2020-12-28T20:06:29Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      },
      {
        "id" : "5cb1c6cf-aca8-4fe7-9ab6-1f9853cdce0a",
        "parentId" : "2307a8f8-1ccb-40ae-9364-02f3ffaa8899",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "It can, but not with `And`, e.g.  `EqualNullSafe(col && null, true)` => `EqualNullSafe(col && false, true)` => `EqualNullSafe(false, true)` => `false`.",
        "createdAt" : "2020-12-28T20:12:27Z",
        "updatedAt" : "2020-12-28T20:12:27Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "12b0739e-7a02-4424-be1a-00a8f1d980b6",
        "parentId" : "2307a8f8-1ccb-40ae-9364-02f3ffaa8899",
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "Oh I see. Makes sense.",
        "createdAt" : "2020-12-28T20:32:27Z",
        "updatedAt" : "2020-12-28T20:32:27Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      }
    ],
    "commit" : "34a5628b9f53d220f7e4ad30509ae8d97a6d32e9",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +58,62 @@      // For `EqualNullSafe` with a `TrueLiteral`, whether the other side is null or false has no\n      // difference, as `null <=> true` and `false <=> true` both return false.\n      case EqualNullSafe(left, TrueLiteral) =>\n        EqualNullSafe(replaceNullWithFalse(left), TrueLiteral)\n      case EqualNullSafe(TrueLiteral, right) =>"
  },
  {
    "id" : "4e5a643a-1eff-4614-973a-311a249f831f",
    "prId" : 30688,
    "prUrl" : "https://github.com/apache/spark/pull/30688#pullrequestreview-549051944",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f3b8e98a-c8bd-4bd4-b280-5df15f5d3a00",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "how about UPDATE and MERGE? they have conditions as well.",
        "createdAt" : "2020-12-10T04:57:44Z",
        "updatedAt" : "2020-12-10T04:57:45Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "6d3e8196-0126-438c-a781-ef5b7c99cf45",
        "parentId" : "f3b8e98a-c8bd-4bd4-b280-5df15f5d3a00",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "It's beyond of this scope of this PR~",
        "createdAt" : "2020-12-10T05:01:50Z",
        "updatedAt" : "2020-12-10T05:01:50Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "41b651d1-3ff9-4d6b-95ab-d6e94bb063ec",
        "parentId" : "f3b8e98a-c8bd-4bd4-b280-5df15f5d3a00",
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "Yeah, it's fine to fix it separately. But still how about fixing them in a separate PR @aokolnychyi?",
        "createdAt" : "2020-12-10T07:58:37Z",
        "updatedAt" : "2020-12-10T07:58:37Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "8748384f-3d4e-4f53-8761-f1c045dd06ef",
        "parentId" : "f3b8e98a-c8bd-4bd4-b280-5df15f5d3a00",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Sure, I guess so. There are many things on the way in this area.",
        "createdAt" : "2020-12-10T08:02:34Z",
        "updatedAt" : "2020-12-10T08:02:35Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "0ad66377-4096-431c-88d1-0a0cadc22409",
        "parentId" : "f3b8e98a-c8bd-4bd4-b280-5df15f5d3a00",
        "authorId" : "4a94765a-5775-4d88-b283-6ee68d76ecc7",
        "body" : "I will follow up for sure! Just wanted to keep the scope small. ",
        "createdAt" : "2020-12-10T09:10:36Z",
        "updatedAt" : "2020-12-10T09:10:36Z",
        "lastEditedBy" : "4a94765a-5775-4d88-b283-6ee68d76ecc7",
        "tags" : [
        ]
      },
      {
        "id" : "062c468d-e31d-4bc9-9cff-d2fc960d7af0",
        "parentId" : "f3b8e98a-c8bd-4bd4-b280-5df15f5d3a00",
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "Thanks, @aokolnychyi.",
        "createdAt" : "2020-12-10T10:23:16Z",
        "updatedAt" : "2020-12-10T10:23:16Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      }
    ],
    "commit" : "61ca40557d32b99157424fccc7b003a7d35bee62",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +54,58 @@    case f @ Filter(cond, _) => f.copy(condition = replaceNullWithFalse(cond))\n    case j @ Join(_, _, _, Some(cond), _) => j.copy(condition = Some(replaceNullWithFalse(cond)))\n    case d @ DeleteFromTable(_, Some(cond)) => d.copy(condition = Some(replaceNullWithFalse(cond)))\n    case p: LogicalPlan => p transformExpressions {\n      case i @ If(pred, _, _) => i.copy(predicate = replaceNullWithFalse(pred))"
  }
]