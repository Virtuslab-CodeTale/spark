[
  {
    "id" : "a51fcb46-6ab2-4090-bbe1-64521f08b658",
    "prId" : 29743,
    "prUrl" : "https://github.com/apache/spark/pull/29743#pullrequestreview-487712748",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "21cf5226-ba72-4944-8dcb-b8d3edb397bc",
        "parentId" : null,
        "authorId" : "a8e23d47-3ae4-4385-848c-38a216d1bd08",
        "body" : "This is not exposed in the `FunctionRegistry`. Is that intentional?",
        "createdAt" : "2020-09-13T20:56:59Z",
        "updatedAt" : "2020-09-19T19:00:31Z",
        "lastEditedBy" : "a8e23d47-3ae4-4385-848c-38a216d1bd08",
        "tags" : [
        ]
      },
      {
        "id" : "c2753726-d1ab-4afc-98f3-28ea3a5492a8",
        "parentId" : "21cf5226-ba72-4944-8dcb-b8d3edb397bc",
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "Yea, I think yes.",
        "createdAt" : "2020-09-14T13:12:10Z",
        "updatedAt" : "2020-09-19T19:00:31Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      }
    ],
    "commit" : "4162b41d325da3f9b732d835168a546916b50499",
    "line" : 57,
    "diffHunk" : "@@ -1,1 +655,659 @@  usage = \"_FUNC_(expr1, expr2, ...) - Returns a hash value of the arguments.\",\n  since = \"2.2.0\")\ncase class HiveHash(children: Seq[Expression]) extends HashExpression[Int] {\n  override val seed = 0\n"
  },
  {
    "id" : "13168934-7741-4b6b-8b81-0ca2b7d87ca4",
    "prId" : 27580,
    "prUrl" : "https://github.com/apache/spark/pull/27580#pullrequestreview-365420206",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "85b48b88-6d5e-4462-9957-2611eb6deec3",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "indentation.",
        "createdAt" : "2020-02-27T05:06:16Z",
        "updatedAt" : "2020-02-27T05:06:17Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "404caa80-1e15-4991-8190-51c71cb5afb5",
        "parentId" : "85b48b88-6d5e-4462-9957-2611eb6deec3",
        "authorId" : "832e1988-205f-40f9-89d5-c37ea16224c9",
        "body" : "@dongjoon-hyun  should i raise a followup for these changes?",
        "createdAt" : "2020-02-27T05:19:31Z",
        "updatedAt" : "2020-02-27T05:19:31Z",
        "lastEditedBy" : "832e1988-205f-40f9-89d5-c37ea16224c9",
        "tags" : [
        ]
      }
    ],
    "commit" : "8dfee675f6bfaf04068b856fc15158cea307f188",
    "line" : 31,
    "diffHunk" : "@@ -1,1 +257,261 @@        s\"input to function $prettyName requires at least one argument\")\n    } else if (children.exists(child => hasMapType(child.dataType)) &&\n      !SQLConf.get.getConf(SQLConf.LEGACY_USE_HASH_ON_MAPTYPE)) {\n      TypeCheckResult.TypeCheckFailure(\n        s\"input to function $prettyName cannot contain elements of MapType. In Spark, same maps \" +"
  },
  {
    "id" : "82f48807-52df-4a28-a75c-8076efde6574",
    "prId" : 27354,
    "prUrl" : "https://github.com/apache/spark/pull/27354#pullrequestreview-347920129",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fac80b62-0f0a-4f52-9d1e-1d36f2591587",
        "parentId" : null,
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "@patrickcording  can we add a simple test?",
        "createdAt" : "2020-01-24T11:49:21Z",
        "updatedAt" : "2020-01-26T17:37:09Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "e8547b57-4b09-47df-8d73-1a0a1814bfdb",
        "parentId" : "fac80b62-0f0a-4f52-9d1e-1d36f2591587",
        "authorId" : "504d51fb-24f8-47e2-a4f7-e035ce24d57d",
        "body" : "Sure, I added this https://github.com/apache/spark/pull/27354/commits/77bfb37d510fd9126e6878fc989391254c1dbb72",
        "createdAt" : "2020-01-24T12:24:27Z",
        "updatedAt" : "2020-01-26T17:37:09Z",
        "lastEditedBy" : "504d51fb-24f8-47e2-a4f7-e035ce24d57d",
        "tags" : [
        ]
      }
    ],
    "commit" : "abe0be5e514eec1b014849300b5db12c12443a39",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +298,302 @@    ev.copy(code =\n      code\"\"\"\n         |$hashResultType ${ev.value} = $typedSeed;\n         |$codes\n       \"\"\".stripMargin)"
  },
  {
    "id" : "46f0aec9-c485-49f9-a21a-c692ed12c26b",
    "prId" : 27354,
    "prUrl" : "https://github.com/apache/spark/pull/27354#pullrequestreview-348385248",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "eac21b20-b6a0-4d7a-9bb6-238ac6e0bdaf",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Thank you for making a PR, @patrickcording . BTW, this seems to change the hash result, doesn't it?",
        "createdAt" : "2020-01-24T23:12:46Z",
        "updatedAt" : "2020-01-26T17:37:09Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "0555b29f-f774-4097-8d33-92f6b58c4d9c",
        "parentId" : "eac21b20-b6a0-4d7a-9bb6-238ac6e0bdaf",
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "Would it change the result? it would just let it not fail.",
        "createdAt" : "2020-01-25T17:09:12Z",
        "updatedAt" : "2020-01-26T17:37:09Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      },
      {
        "id" : "f6ad6773-3638-4cc1-82bd-bd6a14f3b0e5",
        "parentId" : "eac21b20-b6a0-4d7a-9bb6-238ac6e0bdaf",
        "authorId" : "504d51fb-24f8-47e2-a4f7-e035ce24d57d",
        "body" : "It doesn't change the result. For xxHash, the generated code just becomes `long varName = 123L` instead of `long varName = 123`. When the seed is <= 2^31, theres no difference between the two statements. When it is > 2^31, compilation of the generated code would fail without the `L`, so it is now possible to use any 64 bit seed.",
        "createdAt" : "2020-01-26T10:24:59Z",
        "updatedAt" : "2020-01-26T17:37:09Z",
        "lastEditedBy" : "504d51fb-24f8-47e2-a4f7-e035ce24d57d",
        "tags" : [
        ]
      },
      {
        "id" : "0eed5a12-9efc-47d0-8f2e-89a47e8c166a",
        "parentId" : "eac21b20-b6a0-4d7a-9bb6-238ac6e0bdaf",
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "Yeah I think the concern was something like: a 4-byte int seed isn't the same as an 8-byte long seed when it comes to hashing, even if they have the same integer value. But here, this should only affect `HashExpression[Long]`s like `XxHash64`, which already would have promoted any int seed value to long in generated code.",
        "createdAt" : "2020-01-26T15:11:35Z",
        "updatedAt" : "2020-01-26T17:37:09Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      }
    ],
    "commit" : "abe0be5e514eec1b014849300b5db12c12443a39",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +283,287 @@\n    val hashResultType = CodeGenerator.javaType(dataType)\n    val typedSeed = if (dataType.sameType(LongType)) s\"${seed}L\" else s\"$seed\"\n    val codes = ctx.splitExpressionsWithCurrentInputs(\n      expressions = childrenHash,"
  }
]