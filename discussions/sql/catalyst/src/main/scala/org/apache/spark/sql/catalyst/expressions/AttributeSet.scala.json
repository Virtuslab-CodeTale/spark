[
  {
    "id" : "c68bb6c7-ba97-4fd9-8370-84b9c383eeaa",
    "prId" : 29689,
    "prUrl" : "https://github.com/apache/spark/pull/29689#pullrequestreview-484727363",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f3c6695f-b6c0-42a4-bbdd-9911c3794c4f",
        "parentId" : null,
        "authorId" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "body" : "In Scala 2.12 the implementation of `--` is \r\n``` \r\n override def --(xs: GenTraversableOnce[A]): This = clone() --= xs.seq\r\n```",
        "createdAt" : "2020-09-09T06:33:42Z",
        "updatedAt" : "2020-09-09T06:38:01Z",
        "lastEditedBy" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "tags" : [
        ]
      },
      {
        "id" : "07550fbf-4c86-4029-b47d-e0ec31bbb41e",
        "parentId" : "f3c6695f-b6c0-42a4-bbdd-9911c3794c4f",
        "authorId" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "body" : "`diff` method is defined as `Computes the difference of this set and another set`, I haven't tested overall behavior of `diff`, but I think the current changes don't look complicated either",
        "createdAt" : "2020-09-09T06:36:28Z",
        "updatedAt" : "2020-09-09T06:36:28Z",
        "lastEditedBy" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "tags" : [
        ]
      },
      {
        "id" : "c74ead16-e1ec-48b5-babe-d24beeeb2ac2",
        "parentId" : "f3c6695f-b6c0-42a4-bbdd-9911c3794c4f",
        "authorId" : "80d631a6-73e8-46a6-a01b-a80d1f1cc6cc",
        "body" : "diff returns a set, so it can potentially mess up the ordering.",
        "createdAt" : "2020-09-09T06:44:19Z",
        "updatedAt" : "2020-09-09T06:44:20Z",
        "lastEditedBy" : "80d631a6-73e8-46a6-a01b-a80d1f1cc6cc",
        "tags" : [
        ]
      },
      {
        "id" : "00d64a22-27d6-4836-a99d-4602050c7013",
        "parentId" : "f3c6695f-b6c0-42a4-bbdd-9911c3794c4f",
        "authorId" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "body" : "![image](https://user-images.githubusercontent.com/1475305/92564402-ae8c9680-f2ab-11ea-9425-350c0d5f5b03.png)\r\n@hvanhovell Actually, `diff` returns `LinkedHashSet[AttributeEquals]` here...",
        "createdAt" : "2020-09-09T06:51:48Z",
        "updatedAt" : "2020-09-09T06:51:48Z",
        "lastEditedBy" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "tags" : [
        ]
      },
      {
        "id" : "eb5275b0-f603-4698-9200-38a37ff5d7c7",
        "parentId" : "f3c6695f-b6c0-42a4-bbdd-9911c3794c4f",
        "authorId" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "body" : "In Scala 2.13 \r\n```\r\ndef diff(that: collection.Set[A]): C =\r\n    toIterable.foldLeft(empty)((result, elem) => if (that contains elem) result else result += elem)\r\n```\r\n\r\nIn Scala 2.12\r\n```\r\ndef diff(that: GenSet[A]): This = this -- that\r\n```\r\n\r\nIt looks like they're maintains ordered, but the input parameter needs to be a `Set`, so \r\n\r\n```\r\nother.map(a => new AttributeEquals(a.toAttribute))\r\n```\r\n\r\npart need call `toSet`。。。",
        "createdAt" : "2020-09-09T06:56:56Z",
        "updatedAt" : "2020-09-09T06:56:57Z",
        "lastEditedBy" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "tags" : [
        ]
      },
      {
        "id" : "3d96d073-529c-401e-b3ba-ef27f16c560a",
        "parentId" : "f3c6695f-b6c0-42a4-bbdd-9911c3794c4f",
        "authorId" : "80d631a6-73e8-46a6-a01b-a80d1f1cc6cc",
        "body" : "Ok, then diff looks better.",
        "createdAt" : "2020-09-09T06:57:34Z",
        "updatedAt" : "2020-09-09T06:57:34Z",
        "lastEditedBy" : "80d631a6-73e8-46a6-a01b-a80d1f1cc6cc",
        "tags" : [
        ]
      },
      {
        "id" : "76aa5baf-ce48-4856-bd3a-c504660263fe",
        "parentId" : "f3c6695f-b6c0-42a4-bbdd-9911c3794c4f",
        "authorId" : "80d631a6-73e8-46a6-a01b-a80d1f1cc6cc",
        "body" : "If we can avoid the conversion it would be nice. The current thing would be fine in that case.",
        "createdAt" : "2020-09-09T06:58:20Z",
        "updatedAt" : "2020-09-09T06:58:36Z",
        "lastEditedBy" : "80d631a6-73e8-46a6-a01b-a80d1f1cc6cc",
        "tags" : [
        ]
      },
      {
        "id" : "a029cb70-3d39-48d4-9bb4-bd0d82a6ee88",
        "parentId" : "f3c6695f-b6c0-42a4-bbdd-9911c3794c4f",
        "authorId" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "body" : "This conversion seems inevitable if use `diff` :(",
        "createdAt" : "2020-09-09T07:17:13Z",
        "updatedAt" : "2020-09-09T07:17:13Z",
        "lastEditedBy" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "tags" : [
        ]
      },
      {
        "id" : "75b0b5ee-2507-43ea-bd0b-6461be5b44e5",
        "parentId" : "f3c6695f-b6c0-42a4-bbdd-9911c3794c4f",
        "authorId" : "80d631a6-73e8-46a6-a01b-a80d1f1cc6cc",
        "body" : "Let's use the current method then :).",
        "createdAt" : "2020-09-09T07:18:38Z",
        "updatedAt" : "2020-09-09T07:18:38Z",
        "lastEditedBy" : "80d631a6-73e8-46a6-a01b-a80d1f1cc6cc",
        "tags" : [
        ]
      },
      {
        "id" : "a039b705-fcc8-43c1-a4a0-12e5dcafa9b3",
        "parentId" : "f3c6695f-b6c0-42a4-bbdd-9911c3794c4f",
        "authorId" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "body" : "ok ~",
        "createdAt" : "2020-09-09T07:22:58Z",
        "updatedAt" : "2020-09-09T07:22:58Z",
        "lastEditedBy" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "tags" : [
        ]
      }
    ],
    "commit" : "a595600750170d5ff4e913b29a9a3079abb895af",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +109,113 @@      // use a Scala 2.12 based code to maintains the insertion order in Scala 2.13\n      case otherSet: AttributeSet =>\n        new AttributeSet(baseSet.clone() --= otherSet.baseSet)\n      case _ =>\n        new AttributeSet(baseSet.clone() --= other.map(a => new AttributeEquals(a.toAttribute)))"
  }
]