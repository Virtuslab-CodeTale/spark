[
  {
    "id" : "7c36988a-9355-492c-b7fb-40e78d50adde",
    "prId" : 31455,
    "prUrl" : "https://github.com/apache/spark/pull/31455#pullrequestreview-584944609",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "55ad816f-dc75-4417-bfd3-6e2931f95122",
        "parentId" : null,
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "Does it make sense to have universal conversion of any literal to string via applying of the `Cast` expression to `this` literal?",
        "createdAt" : "2021-02-03T21:03:23Z",
        "updatedAt" : "2021-02-04T13:14:30Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      },
      {
        "id" : "8dfa0241-60d4-451f-83f9-b00b73b15fe7",
        "parentId" : "55ad816f-dc75-4417-bfd3-6e2931f95122",
        "authorId" : "813f0961-9a16-4e42-a167-961d914c472c",
        "body" : "Sorry, I don't understand your question.",
        "createdAt" : "2021-02-04T01:22:37Z",
        "updatedAt" : "2021-02-04T13:14:30Z",
        "lastEditedBy" : "813f0961-9a16-4e42-a167-961d914c472c",
        "tags" : [
        ]
      },
      {
        "id" : "7fc48f1e-325a-4f75-8070-49746f92e663",
        "parentId" : "55ad816f-dc75-4417-bfd3-6e2931f95122",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "do you mean this should be\r\n```\r\noverride def toString: String = Cast(this, StringType, timeZoneId).eval().toString\r\n```",
        "createdAt" : "2021-02-04T02:35:59Z",
        "updatedAt" : "2021-02-04T13:14:30Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "836662f7-2217-4946-874c-1d6284ca722f",
        "parentId" : "55ad816f-dc75-4417-bfd3-6e2931f95122",
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "+1 on the @MaxGekk idea.",
        "createdAt" : "2021-02-05T00:08:16Z",
        "updatedAt" : "2021-02-05T00:08:16Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "279f92e6-7b10-4b53-9219-bcd7f14cc044",
        "parentId" : "55ad816f-dc75-4417-bfd3-6e2931f95122",
        "authorId" : "813f0961-9a16-4e42-a167-961d914c472c",
        "body" : "This will change the current behaviour:\r\n```\r\nLiteral.create(Array[Byte](65, 66, 67), BinaryType).toString // before: 0x414243, after: ABC\r\nLiteral.create(Map(\"a\" -> 1)).toString // before: map(keys: [a], values: [1]), after: {a -> 1}\r\n```\r\ncc @dongjoon-hyun ",
        "createdAt" : "2021-02-05T01:46:16Z",
        "updatedAt" : "2021-02-05T01:46:16Z",
        "lastEditedBy" : "813f0961-9a16-4e42-a167-961d914c472c",
        "tags" : [
        ]
      },
      {
        "id" : "78e75f03-dea1-426c-b732-470f6e6fe712",
        "parentId" : "55ad816f-dc75-4417-bfd3-6e2931f95122",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Thank you for pinging me, @wangyum .",
        "createdAt" : "2021-02-07T03:47:38Z",
        "updatedAt" : "2021-02-07T03:47:38Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "b36b57a122e7fad8297fdd540ef9e943eab02f6e",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +301,305 @@  private def timeZoneId = DateTimeUtils.getZoneId(SQLConf.get.sessionLocalTimeZone)\n\n  override def toString: String = value match {\n    case null => \"null\"\n    case binary: Array[Byte] => s\"0x\" + DatatypeConverter.printHexBinary(binary)"
  },
  {
    "id" : "ca2fd4ca-a543-4414-9904-4aa07657da56",
    "prId" : 31438,
    "prUrl" : "https://github.com/apache/spark/pull/31438#pullrequestreview-581948203",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4be8512b-a401-4159-8741-9ff9951d4e9e",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "IIUC, `Literal.apply` is for external values. If you have internal values like `UTF8String`, you should use `Literal(value, dt)`.",
        "createdAt" : "2021-02-02T16:07:10Z",
        "updatedAt" : "2021-02-02T16:07:10Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "93167f17-48e4-4e8a-bd36-04bb1b856bc5",
        "parentId" : "4be8512b-a401-4159-8741-9ff9951d4e9e",
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "Yeah, let's don't do this here.",
        "createdAt" : "2021-02-03T00:30:54Z",
        "updatedAt" : "2021-02-03T00:30:54Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "b616e064-7b1d-47be-90e3-c480800f4b66",
        "parentId" : "4be8512b-a401-4159-8741-9ff9951d4e9e",
        "authorId" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "body" : "OK, tried that all case can be handled. Close this one",
        "createdAt" : "2021-02-03T02:10:47Z",
        "updatedAt" : "2021-02-03T02:10:47Z",
        "lastEditedBy" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "tags" : [
        ]
      }
    ],
    "commit" : "27c7eb8d20ac619cea15bcc28964c4511333e9e5",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +63,67 @@    case s: Short => Literal(s, ShortType)\n    case s: String => Literal(UTF8String.fromString(s), StringType)\n    case s: UTF8String => Literal(s, StringType)\n    case c: Char => Literal(UTF8String.fromString(c.toString), StringType)\n    case ac: Array[Char] => Literal(UTF8String.fromString(String.valueOf(ac)), StringType)"
  },
  {
    "id" : "fd686a1c-4cc4-4fc5-a850-685ef902d2d9",
    "prId" : 30455,
    "prUrl" : "https://github.com/apache/spark/pull/30455#pullrequestreview-536949436",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1b7b38a1-3e30-485a-8287-cc9dc16e6528",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "(Just a question) Are the changes above related to this PR?",
        "createdAt" : "2020-11-23T23:27:38Z",
        "updatedAt" : "2020-11-23T23:40:57Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "9e49e87b-26af-4185-89d8-809abf570864",
        "parentId" : "1b7b38a1-3e30-485a-8287-cc9dc16e6528",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Yes. It's a compilation error. We cannot use `.equals` for `Any` type.",
        "createdAt" : "2020-11-24T00:20:51Z",
        "updatedAt" : "2020-11-24T00:20:51Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "2604ed25-5bb1-438d-9bc8-cba7e1604be4",
        "parentId" : "1b7b38a1-3e30-485a-8287-cc9dc16e6528",
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "Oh, I see.",
        "createdAt" : "2020-11-24T00:29:01Z",
        "updatedAt" : "2020-11-24T00:29:01Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      }
    ],
    "commit" : "721439826beee1b4c8e58108ab7091e44db4cf9f",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +325,329 @@        case (a: Double, b: Double) if a.isNaN && b.isNaN => true\n        case (a: Float, b: Float) if a.isNaN && b.isNaN => true\n        case (a, b) => a != null && a == b\n      }\n    case _ => false"
  },
  {
    "id" : "2561354c-ebf8-4060-98f6-373e6696fb36",
    "prId" : 30295,
    "prUrl" : "https://github.com/apache/spark/pull/30295#pullrequestreview-526874556",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "65b6fefe-283a-4c86-9cf8-cc0d2edbbbb8",
        "parentId" : null,
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "Should we need to consider `java.lang.Character`?",
        "createdAt" : "2020-11-10T02:00:31Z",
        "updatedAt" : "2020-11-10T10:43:49Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "0426073e-5664-44a4-bc08-842be7c4ad12",
        "parentId" : "65b6fefe-283a-4c86-9cf8-cc0d2edbbbb8",
        "authorId" : "baca2fab-b749-483f-8c77-c4db14eca9d9",
        "body" : "It seems we can never go into here with `java.lang.Character`. This method is used which data type is `Array[_]`, but we always intercept the `Array[Char]` first.",
        "createdAt" : "2020-11-10T02:21:43Z",
        "updatedAt" : "2020-11-10T10:43:49Z",
        "lastEditedBy" : "baca2fab-b749-483f-8c77-c4db14eca9d9",
        "tags" : [
        ]
      },
      {
        "id" : "c5e6abd8-f215-45c7-a9c6-3bbcd7679731",
        "parentId" : "65b6fefe-283a-4c86-9cf8-cc0d2edbbbb8",
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "Hm, but looks like `JavaByte ` is being handled here. It has `Array[Byte]` pattern here too.",
        "createdAt" : "2020-11-10T05:28:23Z",
        "updatedAt" : "2020-11-10T10:43:49Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "03fd4ed0-025f-48f4-90b4-4bc6fd8d0d3d",
        "parentId" : "65b6fefe-283a-4c86-9cf8-cc0d2edbbbb8",
        "authorId" : "baca2fab-b749-483f-8c77-c4db14eca9d9",
        "body" : "I'm ok to follow the behavior. Add this pattern.",
        "createdAt" : "2020-11-10T05:59:14Z",
        "updatedAt" : "2020-11-10T10:43:49Z",
        "lastEditedBy" : "baca2fab-b749-483f-8c77-c4db14eca9d9",
        "tags" : [
        ]
      }
    ],
    "commit" : "75bc68457162119b025bdaba1dc0eaf9c879d2fe",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +114,118 @@    case _ if clz == classOf[JavaBigDecimal] => DecimalType.SYSTEM_DEFAULT\n    case _ if clz == classOf[Array[Byte]] => BinaryType\n    case _ if clz == classOf[Array[Char]] => StringType\n    case _ if clz == classOf[JavaShort] => ShortType\n    case _ if clz == classOf[JavaInteger] => IntegerType"
  }
]