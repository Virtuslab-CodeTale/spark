[
  {
    "id" : "6e3e8bf5-387e-447e-b932-159eb23a8bc0",
    "prId" : 24768,
    "prUrl" : "https://github.com/apache/spark/pull/24768#pullrequestreview-252920541",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "47887fbf-e9ad-4ee1-9ae9-7712f53daf68",
        "parentId" : null,
        "authorId" : "15acce7d-132b-48c9-894b-9bc3f4c2b09d",
        "body" : "Maybe some comments for the `sessionCatalog`",
        "createdAt" : "2019-06-13T16:09:59Z",
        "updatedAt" : "2019-07-09T17:36:34Z",
        "lastEditedBy" : "15acce7d-132b-48c9-894b-9bc3f4c2b09d",
        "tags" : [
        ]
      },
      {
        "id" : "3ed9221b-0e96-4914-8a8d-4879b5924db4",
        "parentId" : "47887fbf-e9ad-4ee1-9ae9-7712f53daf68",
        "authorId" : "0fc9f1bc-0097-451e-915f-52da69a366f3",
        "body" : "Done:\r\n\r\n```\r\n  /**\r\n   * This catalog is a v2 catalog that delegates to the v1 session catalog. it is used when the\r\n   * session catalog is responsible for an identifier, but the source requires the v2 catalog API.\r\n   * this happens when the source implementation extends the v2 TableProvider API and is not listed\r\n   * in the fallback configuration, spark.sql.sources.write.useV1SourceList\r\n   */\r\n```",
        "createdAt" : "2019-06-21T16:34:18Z",
        "updatedAt" : "2019-07-09T17:36:34Z",
        "lastEditedBy" : "0fc9f1bc-0097-451e-915f-52da69a366f3",
        "tags" : [
        ]
      }
    ],
    "commit" : "4169a8760d6e358914071460c91f381d4ae89b0b",
    "line" : 52,
    "diffHunk" : "@@ -1,1 +59,63 @@   * in the fallback configuration, spark.sql.sources.write.useV1SourceList\n   */\n  def sessionCatalog: Option[CatalogPlugin] = {\n    try {\n      Some(lookupCatalog(SESSION_CATALOG_NAME))"
  },
  {
    "id" : "6aa3d467-25bc-4e45-9ad0-9bf4454686f8",
    "prId" : 24768,
    "prUrl" : "https://github.com/apache/spark/pull/24768#pullrequestreview-258514590",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7ad5efbe-31ff-4a61-8e59-0c706a1504d7",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "where do we register the v2 session catalog?\r\n\r\nBTW this should be an internal thing, I think we just need to ask `LookupCatalog` implementations to provide the v2 session catalog.",
        "createdAt" : "2019-07-05T02:54:58Z",
        "updatedAt" : "2019-07-09T17:36:34Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "34a13205-7696-4c30-9b99-125628699f5b",
        "parentId" : "7ad5efbe-31ff-4a61-8e59-0c706a1504d7",
        "authorId" : "0fc9f1bc-0097-451e-915f-52da69a366f3",
        "body" : "The v2 session catalog is configured by adding a catalog named \"session\" in SQL config. That needs to be added to SQLConf defaults, but I wasn't sure whether it should happen in this PR or later. I can add it in this PR if you'd prefer.",
        "createdAt" : "2019-07-05T03:55:08Z",
        "updatedAt" : "2019-07-09T17:36:34Z",
        "lastEditedBy" : "0fc9f1bc-0097-451e-915f-52da69a366f3",
        "tags" : [
        ]
      },
      {
        "id" : "0049f117-6196-4a17-a6bf-7d7b70f768a8",
        "parentId" : "7ad5efbe-31ff-4a61-8e59-0c706a1504d7",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "Why would we allow users to config session catalog? I see `V2SessionCatalog` as a way to fallback to the builtin hive catalog, before we migrate hive catalog to the v2 catalog API. This is a completely internal thing.",
        "createdAt" : "2019-07-05T04:52:39Z",
        "updatedAt" : "2019-07-09T17:36:34Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "a98bfc28-4a72-4457-8059-233202828ebc",
        "parentId" : "7ad5efbe-31ff-4a61-8e59-0c706a1504d7",
        "authorId" : "0fc9f1bc-0097-451e-915f-52da69a366f3",
        "body" : "We can do that if you'd like. This PR uses a different implementation to test SQL behavior because the built-in sources don't behave correctly.",
        "createdAt" : "2019-07-05T18:16:49Z",
        "updatedAt" : "2019-07-09T17:36:34Z",
        "lastEditedBy" : "0fc9f1bc-0097-451e-915f-52da69a366f3",
        "tags" : [
        ]
      },
      {
        "id" : "0423b4d1-7099-436c-9fca-5ecad184286d",
        "parentId" : "7ad5efbe-31ff-4a61-8e59-0c706a1504d7",
        "authorId" : "0fc9f1bc-0097-451e-915f-52da69a366f3",
        "body" : "I added a default config for this that uses the V2SessionCatalog. May as well add it now, but we do need to be able to override it until we have a built-in source that passes all SQL tests.",
        "createdAt" : "2019-07-05T18:33:29Z",
        "updatedAt" : "2019-07-09T17:36:34Z",
        "lastEditedBy" : "0fc9f1bc-0097-451e-915f-52da69a366f3",
        "tags" : [
        ]
      }
    ],
    "commit" : "4169a8760d6e358914071460c91f381d4ae89b0b",
    "line" : 141,
    "diffHunk" : "@@ -1,1 +140,144 @@\nobject LookupCatalog {\n  val SESSION_CATALOG_NAME: String = \"session\"\n}"
  }
]