[
  {
    "id" : "24fb92d6-ae90-4317-986e-d791c737c8c9",
    "prId" : 27672,
    "prUrl" : "https://github.com/apache/spark/pull/27672#pullrequestreview-363942673",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d8b87c22-3536-4582-bad5-1905ff636c6f",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "we should use `intercept` to assert a failure. I'm OK to leave it as we already use `try-catch` in this test case.",
        "createdAt" : "2020-02-25T08:22:31Z",
        "updatedAt" : "2020-02-25T08:22:31Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      }
    ],
    "commit" : "9db1f370107b14e6d5f772441455b6f89afc6070",
    "line" : 64,
    "diffHunk" : "@@ -1,1 +308,312 @@      ((Int.MaxValue / 9.0) * MICROS_PER_DAY).round))\n    try {\n      divideExact(interval, 0.9)\n      fail(\"Expected to throw an exception on integer overflow\")\n    } catch {"
  },
  {
    "id" : "bedd3551-cb8e-475e-9fe8-ed6d1888d6d4",
    "prId" : 26815,
    "prUrl" : "https://github.com/apache/spark/pull/26815#pullrequestreview-371759382",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1a4d88f2-f9df-4538-a6c5-de96f33b6899",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "for multi-unit syntax, do we support `1 day \\t 2 hours`?",
        "createdAt" : "2020-03-10T08:22:49Z",
        "updatedAt" : "2020-03-10T08:22:50Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "9bcda295-4eb0-4acc-a8a3-8f356852d4e1",
        "parentId" : "1a4d88f2-f9df-4538-a6c5-de96f33b6899",
        "authorId" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "body" : "yes. My opinion is that the interval string in multi-unit syntax, we parse each value and each unit separately and they can be produced by the providers separately too so the whitespaces can be in the middle of each part. In year-month and day-time syntax, the string should be considered as a whole part so the whitespaces only appear on both ends, not in the middle.\r\n\r\ntake java.sql.Timestamp for an example, the timestamp string is treated as a whole\r\n\r\n```\r\nscala> java.sql.Timestamp.valueOf(\"2011-11-11 11:11:11.11\\t\")\r\nres8: java.sql.Timestamp = 2011-11-11 11:11:11.11\r\n\r\nscala> java.sql.Timestamp.valueOf(\"2011-11-11 \\t 11:11:11.11\\t\")\r\njava.lang.NumberFormatException: For input string: \"\t 11\"\r\n  at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\r\n  at java.lang.Integer.parseInt(Integer.java:569)\r\n  at java.lang.Integer.parseInt(Integer.java:615)\r\n  at java.sql.Timestamp.valueOf(Timestamp.java:243)\r\n  ... 28 elided\r\n```\r\n\r\nAlso, we do the same in Spark\r\n\r\n```\r\nspark-sql> select timestamp '2013-01-02 \\t 00:00:00';\r\nError in query:\r\nCannot parse the TIMESTAMP value: 2013-01-02 \t 00:00:00(line 1, pos 7)\r\n\r\n== SQL ==\r\nselect timestamp '2013-01-02 \\t 00:00:00'\r\n-------^^^\r\n\r\nspark-sql> select timestamp '2013-01-02 00:00:00 \\t';\r\n2013-01-02 00:00:00\r\n```",
        "createdAt" : "2020-03-10T08:39:39Z",
        "updatedAt" : "2020-03-10T08:39:39Z",
        "lastEditedBy" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "tags" : [
        ]
      }
    ],
    "commit" : "4556ad4f01dcbb68892ccc9f25ad4ae92384e8c0",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +325,329 @@    // whitespaces\n    check(\"\\t +5 12:40\\t \", DAY, MINUTE, \"5 days 12 hours 40 minutes\")\n    checkFail(\"+5\\t 12:40\", DAY, MINUTE, \"must match day-time format\")\n\n  }"
  },
  {
    "id" : "8b3854d3-c1ff-41a7-8456-4fc6148cc546",
    "prId" : 26662,
    "prUrl" : "https://github.com/apache/spark/pull/26662#pullrequestreview-322806758",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3d3c8fb6-9b47-4dd0-ac5a-c78f0bfd7bc8",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "why remove some test cases?",
        "createdAt" : "2019-11-26T08:45:02Z",
        "updatedAt" : "2019-11-26T12:25:48Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "0c9aeb74-7015-4f1b-8fde-6f2ac83c35ee",
        "parentId" : "3d3c8fb6-9b47-4dd0-ac5a-c78f0bfd7bc8",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "ah i see, it's covered in the new one",
        "createdAt" : "2019-11-26T08:45:32Z",
        "updatedAt" : "2019-11-26T12:25:48Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      }
    ],
    "commit" : "08aabe69e7aad7b1892a929572bf861af793fa6d",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +80,84 @@    checkFromInvalidString(null, \"cannot be null\")\n\n    for (input <- Seq(\"\", \"interval\", \"foo\", \"foo 1 day\")) {\n      checkFromInvalidString(input, \"Error parsing\")\n    }"
  },
  {
    "id" : "c498bcb0-3c19-440b-98a0-449b8d4f5843",
    "prId" : 26491,
    "prUrl" : "https://github.com/apache/spark/pull/26491#pullrequestreview-317963096",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0994c0dc-c0e5-472d-827c-2ebf6fa8c578",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "does `1. second` work?",
        "createdAt" : "2019-11-16T06:39:52Z",
        "updatedAt" : "2019-11-16T10:03:34Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "0bdd1100-9ae3-4050-b975-d0648d7c49c9",
        "parentId" : "0994c0dc-c0e5-472d-827c-2ebf6fa8c578",
        "authorId" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "body" : "yes, it does. But I guess this should not work, we may just expose another bug in the new string to interval parser. we may need a follow-up to disable this.",
        "createdAt" : "2019-11-16T08:28:49Z",
        "updatedAt" : "2019-11-16T10:03:34Z",
        "lastEditedBy" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "tags" : [
        ]
      },
      {
        "id" : "e4f6a6c3-de05-4e67-ab57-ab1790d7d89a",
        "parentId" : "0994c0dc-c0e5-472d-827c-2ebf6fa8c578",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "checked pgsql\r\n```\r\ncloud0fan=# select interval '1.' second;\r\nERROR:  invalid input syntax for type interval: \"1.\"\r\nLINE 1: select interval '1.' second;\r\n```\r\n\r\nwe should fix it later.",
        "createdAt" : "2019-11-16T09:05:00Z",
        "updatedAt" : "2019-11-16T10:03:34Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "cb9b2436-95d4-459b-9812-005b310703ff",
        "parentId" : "0994c0dc-c0e5-472d-827c-2ebf6fa8c578",
        "authorId" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "body" : "OK, I'll raise a jira and an pr later",
        "createdAt" : "2019-11-16T10:02:27Z",
        "updatedAt" : "2019-11-16T10:03:34Z",
        "lastEditedBy" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "tags" : [
        ]
      }
    ],
    "commit" : "32d5194b92d817e36150386e5c64da6c0de8fbd9",
    "line" : 51,
    "diffHunk" : "@@ -1,1 +106,110 @@    // Only the seconds units can have the fractional part\n    checkFromInvalidString(\"1.5 days\", \"'days' cannot have fractional part\")\n    checkFromInvalidString(\"1. hour\", \"'hour' cannot have fractional part\")\n    checkFromInvalidString(\"1 hourX\", \"invalid unit 'hourx'\")\n    checkFromInvalidString(\"~1 hour\", \"unrecognized number '~1'\")"
  },
  {
    "id" : "c11899af-5d1b-43fb-82b2-68c6ea900856",
    "prId" : 26473,
    "prUrl" : "https://github.com/apache/spark/pull/26473#pullrequestreview-315303341",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c29ef000-ce58-4ac9-831c-df191b9b3b8e",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "can we test `12:40:30.0123456789` as well?",
        "createdAt" : "2019-11-12T05:38:03Z",
        "updatedAt" : "2019-12-11T10:12:24Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      }
    ],
    "commit" : "c16f2a7e1919aaafc7b3de35ad6fba3dba2c2e13",
    "line" : 130,
    "diffHunk" : "@@ -1,1 +416,420 @@    checkFail(\"5 12:40\", HOUR, MINUTE, \"must match day-time format\")\n\n    check(\"12:40:30.999999999\", HOUR, SECOND, \"12 hours 40 minutes 30.999999 seconds\")\n    check(\"+12:40:30.123456789\", HOUR, SECOND, \"12 hours 40 minutes 30.123456 seconds\")\n    check(\"-12:40:30.123456789\", HOUR, SECOND, \"-12 hours -40 minutes -30.123456 seconds\")"
  },
  {
    "id" : "41f492ce-e31e-452e-86d9-bdf6c58da5d9",
    "prId" : 26358,
    "prUrl" : "https://github.com/apache/spark/pull/26358#pullrequestreview-315133149",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9dd03687-5258-4b99-9db5-6b88ef0a7a84",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "can we have a test case to show the error behavior?",
        "createdAt" : "2019-11-11T08:25:47Z",
        "updatedAt" : "2019-11-11T08:25:47Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "df023887-69ef-4403-8a8c-3f4ba0b72c4c",
        "parentId" : "9dd03687-5258-4b99-9db5-6b88ef0a7a84",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "Just to be clear, this PR just truncates results according to specified bound. In particular, it takes into account the left bound. Could you explain, please, what do you mean by saying `error behavior`?",
        "createdAt" : "2019-11-11T16:25:55Z",
        "updatedAt" : "2019-11-11T16:25:55Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      },
      {
        "id" : "eb3d01f6-466f-40b1-9c1d-82b2301538a9",
        "parentId" : "9dd03687-5258-4b99-9db5-6b88ef0a7a84",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "I think the conclusion is to fail for invalid bounds?",
        "createdAt" : "2019-11-11T16:32:25Z",
        "updatedAt" : "2019-11-11T16:32:26Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "4d45ce52-d41f-43bf-97a0-00e13ec71e2d",
        "parentId" : "9dd03687-5258-4b99-9db5-6b88ef0a7a84",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "Do you mean if a string doesn't match to specified bounds like in `literals.sql`: https://github.com/apache/spark/pull/26358/files#diff-4f9e28af8e9fcb40a8a99b4e49f3b9b2R424 ?\r\n",
        "createdAt" : "2019-11-11T16:38:37Z",
        "updatedAt" : "2019-11-11T16:38:38Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      },
      {
        "id" : "ab054999-e39e-4220-a948-990aa3275ea9",
        "parentId" : "9dd03687-5258-4b99-9db5-6b88ef0a7a84",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "yea, like what Oracle does.",
        "createdAt" : "2019-11-11T17:50:34Z",
        "updatedAt" : "2019-11-11T17:50:34Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "fe52db0c-7fd4-435a-a65f-a9350e801f9c",
        "parentId" : "9dd03687-5258-4b99-9db5-6b88ef0a7a84",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "Here is the PR with strict parsing https://github.com/apache/spark/pull/26473",
        "createdAt" : "2019-11-11T20:17:42Z",
        "updatedAt" : "2019-11-11T20:17:42Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      }
    ],
    "commit" : "296de1f26d4eee4d006364584db7124d65ede753",
    "line" : 30,
    "diffHunk" : "@@ -1,1 +278,282 @@    }\n\n    withSQLConf(SQLConf.DIALECT.key -> \"Spark\") {\n      check(HOUR, MINUTE, \"12 hours 40 minutes\")\n      check(HOUR, SECOND, \"12 hours 40 minutes 30.999999 seconds\")"
  }
]