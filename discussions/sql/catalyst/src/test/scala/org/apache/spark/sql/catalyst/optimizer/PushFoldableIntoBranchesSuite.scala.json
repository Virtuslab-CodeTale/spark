[
  {
    "id" : "bd31d7cd-2694-4565-a913-cf9692e2cad9",
    "prId" : 30790,
    "prUrl" : "https://github.com/apache/spark/pull/30790#pullrequestreview-555908800",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9b915662-f639-4a4c-85e6-31f783a30147",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "`If(a, FalseLiteral, TrueLiteral)` can be turned into `!a`. We can optimize it in followups.",
        "createdAt" : "2020-12-18T05:03:16Z",
        "updatedAt" : "2020-12-18T08:14:14Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "2bf1aeb3-24aa-413d-9fc1-3762318058f8",
        "parentId" : "9b915662-f639-4a4c-85e6-31f783a30147",
        "authorId" : "813f0961-9a16-4e42-a167-961d914c472c",
        "body" : "Yes. we can optimize it:\r\nhttps://github.com/apache/spark/pull/30849/files#diff-d43484d56a4d9991066b5c00d12ec2465c75131e055fc02ee7fb6dfd45b5006fR478-R479",
        "createdAt" : "2020-12-19T02:34:03Z",
        "updatedAt" : "2020-12-19T02:34:03Z",
        "lastEditedBy" : "813f0961-9a16-4e42-a167-961d914c472c",
        "tags" : [
        ]
      }
    ],
    "commit" : "cfac0e8655755f770f725f7ec5cd2dc2db950ff6",
    "line" : 56,
    "diffHunk" : "@@ -1,1 +54,58 @@  test(\"Push down EqualTo through If\") {\n    assertEquivalent(EqualTo(ifExp, Literal(4)), FalseLiteral)\n    assertEquivalent(EqualTo(ifExp, Literal(3)), If(a, FalseLiteral, TrueLiteral))\n\n    // Push down at most one not foldable expressions."
  },
  {
    "id" : "7e7b0ccc-2063-4785-b8c0-fda88204f125",
    "prId" : 30790,
    "prUrl" : "https://github.com/apache/spark/pull/30790#pullrequestreview-555943730",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5a199774-229f-440a-a2bd-aaaf6b353e7e",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "without the else value, seems like we can't optimize `CASE WHEN cond1 THEN false WHEN cond2 THEN false` into `false`. We should fix it in followups.",
        "createdAt" : "2020-12-18T05:10:48Z",
        "updatedAt" : "2020-12-18T08:14:14Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "4d6d8a3b-1363-44b0-a275-7df813926ad1",
        "parentId" : "5a199774-229f-440a-a2bd-aaaf6b353e7e",
        "authorId" : "813f0961-9a16-4e42-a167-961d914c472c",
        "body" : "It seem we can not optimize this case, but we can optimize `CASE WHEN cond1 THEN null WHEN cond2 THEN null` to `null`.\r\n\r\nhttps://github.com/apache/spark/pull/30849/files#diff-d43484d56a4d9991066b5c00d12ec2465c75131e055fc02ee7fb6dfd45b5006fR563-R564",
        "createdAt" : "2020-12-19T02:32:20Z",
        "updatedAt" : "2020-12-19T03:32:16Z",
        "lastEditedBy" : "813f0961-9a16-4e42-a167-961d914c472c",
        "tags" : [
        ]
      },
      {
        "id" : "6a51541a-ad9e-4723-afb2-373258260b74",
        "parentId" : "5a199774-229f-440a-a2bd-aaaf6b353e7e",
        "authorId" : "813f0961-9a16-4e42-a167-961d914c472c",
        "body" : "https://github.com/apache/spark/pull/30852",
        "createdAt" : "2020-12-19T14:06:37Z",
        "updatedAt" : "2020-12-19T14:06:38Z",
        "lastEditedBy" : "813f0961-9a16-4e42-a167-961d914c472c",
        "tags" : [
        ]
      }
    ],
    "commit" : "cfac0e8655755f770f725f7ec5cd2dc2db950ff6",
    "line" : 46,
    "diffHunk" : "@@ -1,1 +44,48 @@  private val c = EqualTo(UnresolvedAttribute(\"c\"), Literal(true))\n  private val ifExp = If(a, Literal(2), Literal(3))\n  private val caseWhen = CaseWhen(Seq((a, Literal(1)), (c, Literal(2))), Some(Literal(3)))\n\n  protected def assertEquivalent(e1: Expression, e2: Expression): Unit = {"
  }
]