[
  {
    "id" : "cfa8b066-e057-4e80-bd9a-97bf4677717a",
    "prId" : 33284,
    "prUrl" : "https://github.com/apache/spark/pull/33284#pullrequestreview-706810507",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "71edd925-363b-4d15-8ce8-50c0d5a27d5f",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "will we optimize away the `DomainJoin` at the end?",
        "createdAt" : "2021-07-14T13:24:22Z",
        "updatedAt" : "2021-07-14T13:24:22Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "996ec722-ec38-4f8b-aac5-5f16b94d2513",
        "parentId" : "71edd925-363b-4d15-8ce8-50c0d5a27d5f",
        "authorId" : "b3ba992a-312c-46eb-b3c3-8d861d15ac40",
        "body" : "For now once the domain join is added, it will always be rewritten as an inner join because the join condition in the subquery might not be null: `select (select c1 where c1 = c2 + 1) from t`. ",
        "createdAt" : "2021-07-14T23:56:33Z",
        "updatedAt" : "2021-07-14T23:56:33Z",
        "lastEditedBy" : "b3ba992a-312c-46eb-b3c3-8d861d15ac40",
        "tags" : [
        ]
      }
    ],
    "commit" : "7ba19740668cc8d0f28a83482344b7828ccaafff",
    "line" : 16,
    "diffHunk" : "@@ -1,1 +207,211 @@    val innerPlan = Project(Seq(OuterReference(x).as(\"x1\"), OuterReference(y).as(\"y1\")), t0)\n    val correctAnswer = Project(\n      Seq(x.as(\"x1\"), y.as(\"y1\"), x, y), DomainJoin(Seq(x, y), t0))\n    check(innerPlan, outerPlan, correctAnswer, Seq(x <=> x, y <=> y))\n  }"
  }
]