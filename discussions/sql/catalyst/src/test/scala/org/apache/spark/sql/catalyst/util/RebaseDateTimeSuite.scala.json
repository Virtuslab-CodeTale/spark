[
  {
    "id" : "4ab59092-6c81-48a5-b5fd-dafcc49e7fcf",
    "prId" : 28809,
    "prUrl" : "https://github.com/apache/spark/pull/28809#pullrequestreview-430252733",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4b45b35b-0f2a-4371-8270-55f77e7209ed",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Please hold on this. This test case is flaky in `master` branch already.\r\n- https://amplab.cs.berkeley.edu/jenkins/view/Spark%20QA%20Test%20(Dashboard)/job/spark-master-test-maven-hadoop-3.2-hive-2.3/lastCompletedBuild/testReport/org.apache.spark.sql.catalyst.util/RebaseDateTimeSuite/SPARK_31959__JST____HKT_at_Asia_Hong_Kong_in_1945/\r\n```\r\n- SPARK-31959: JST -> HKT at Asia/Hong_Kong in 1945 *** FAILED ***\r\n  -766744200000000 did not equal -766747800000000 (RebaseDateTimeSuite.scala:432)\r\n```\r\n\r\n![Screen Shot 2020-06-14 at 2 32 50 PM](https://user-images.githubusercontent.com/9700541/84604597-fab27100-ae4b-11ea-8b6f-39bb7b35db12.png)\r\n",
        "createdAt" : "2020-06-14T21:30:50Z",
        "updatedAt" : "2020-06-15T15:21:42Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "63898cf439762d198a022e0fe7e4c4a4bb196350",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +411,415 @@  }\n\n  test(\"SPARK-31959: JST -> HKT at Asia/Hong_Kong in 1945\") {\n    // The 'Asia/Hong_Kong' time zone switched from 'Japan Standard Time' (JST = UTC+9)\n    // to 'Hong Kong Time' (HKT = UTC+8). After Sunday, 18 November, 1945 01:59:59 AM,"
  },
  {
    "id" : "9d25f323-4192-4f2b-b5e8-45954a2f022b",
    "prId" : 28787,
    "prUrl" : "https://github.com/apache/spark/pull/28787#pullrequestreview-428638746",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d2d3b3fe-9f60-45fd-a050-59703a8f2e09",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "what do you mean by \"optimized rebase\"?",
        "createdAt" : "2020-06-11T05:25:54Z",
        "updatedAt" : "2020-06-11T08:30:00Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "560ba6ba-1a95-4273-8f6a-143e0c0e74fc",
        "parentId" : "d2d3b3fe-9f60-45fd-a050-59703a8f2e09",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "via pre-calculated offsets and switch points.",
        "createdAt" : "2020-06-11T05:50:06Z",
        "updatedAt" : "2020-06-11T08:30:00Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      },
      {
        "id" : "8ed5eed8-0494-4b5b-92e7-660ae5123d64",
        "parentId" : "d2d3b3fe-9f60-45fd-a050-59703a8f2e09",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "so this relies on the JVM system timezone is not `Asia/Hong_Kong`?",
        "createdAt" : "2020-06-11T06:51:04Z",
        "updatedAt" : "2020-06-11T08:30:00Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "49efdda8-3003-425d-be2c-f595e97c20a7",
        "parentId" : "d2d3b3fe-9f60-45fd-a050-59703a8f2e09",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "Yes, it relies but I set the default JVM time zone to `Asia/Hong_Kong` in the test.",
        "createdAt" : "2020-06-11T06:56:31Z",
        "updatedAt" : "2020-06-11T08:30:00Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      }
    ],
    "commit" : "c655c8fabe2f3a2a530dc5f3aa27498d2acd1066",
    "line" : 32,
    "diffHunk" : "@@ -1,1 +438,442 @@      assert(toTsStr(rebasedLaterMicros) === expected)\n      assert(rebasedEarlierMicros + MICROS_PER_HOUR === rebasedLaterMicros)\n      // Check optimized rebasing\n      assert(rebaseGregorianToJulianMicros(earlierMicros) === rebasedEarlierMicros)\n      assert(rebaseGregorianToJulianMicros(laterMicros) === rebasedLaterMicros)"
  },
  {
    "id" : "7a880198-ff4a-47ea-b5bd-4581c2b520e3",
    "prId" : 28119,
    "prUrl" : "https://github.com/apache/spark/pull/28119#pullrequestreview-388957181",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c60b4dad-0365-4302-8eed-9bd2e9b428bf",
        "parentId" : null,
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "@HyukjinKwon Please, look here. This is how the JSON files are generated.",
        "createdAt" : "2020-04-07T09:47:56Z",
        "updatedAt" : "2020-04-08T18:05:04Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      }
    ],
    "commit" : "4281d4b40fd5e116d3c0f0d4b5ed6d7958539f19",
    "line" : 349,
    "diffHunk" : "@@ -1,1 +347,351 @@\n  ignore(\"generate 'gregorian-julian-rebase-micros.json'\") {\n    generateRebaseJson(\n      adjustFunc = identity[Long],\n      rebaseFunc = rebaseGregorianToJulianMicros,"
  },
  {
    "id" : "35f2661f-05dc-4f41-9da8-e5943c63cd9b",
    "prId" : 28119,
    "prUrl" : "https://github.com/apache/spark/pull/28119#pullrequestreview-390188949",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c7017ade-aa31-4baf-9c7c-e32c369eabed",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "Can we add a comment that this is used to generate the diff array for date rebasing?",
        "createdAt" : "2020-04-08T09:29:33Z",
        "updatedAt" : "2020-04-08T18:05:04Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "08595e19-30bf-47ef-8861-256c61d9fe3d",
        "parentId" : "c7017ade-aa31-4baf-9c7c-e32c369eabed",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "Added",
        "createdAt" : "2020-04-08T17:36:38Z",
        "updatedAt" : "2020-04-08T18:05:04Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      }
    ],
    "commit" : "4281d4b40fd5e116d3c0f0d4b5ed6d7958539f19",
    "line" : 146,
    "diffHunk" : "@@ -1,1 +144,148 @@    // Rebasing switch days and diffs `gregJulianDiffSwitchDay` and `gregJulianDiffs`\n    // in `RebaseDateTime` was generated by using this function.\n    def refRebaseGregorianToJulianDays(days: Int): Int = {\n      val localDate = LocalDate.ofEpochDay(days)\n      val utcCal = new Calendar.Builder()"
  },
  {
    "id" : "1d4099c3-2874-4825-ab62-32e7d0d5be01",
    "prId" : 28119,
    "prUrl" : "https://github.com/apache/spark/pull/28119#pullrequestreview-390189087",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1b7e3991-f88f-4718-81c9-7edaf89ced93",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "ditto",
        "createdAt" : "2020-04-08T09:29:59Z",
        "updatedAt" : "2020-04-08T18:05:04Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "52ca1c51-62fc-4843-ba36-9d5fbedeec8d",
        "parentId" : "1b7e3991-f88f-4718-81c9-7edaf89ced93",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "Added a comment",
        "createdAt" : "2020-04-08T17:36:49Z",
        "updatedAt" : "2020-04-08T18:05:04Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      }
    ],
    "commit" : "4281d4b40fd5e116d3c0f0d4b5ed6d7958539f19",
    "line" : 171,
    "diffHunk" : "@@ -1,1 +169,173 @@    // Rebasing switch days and diffs `julianGregDiffSwitchDay` and `julianGregDiffs`\n    // in `RebaseDateTime` was generated by using this function.\n    def refRebaseJulianToGregorianDays(days: Int): Int = {\n      val utcCal = new Calendar.Builder()\n        // `gregory` is a hybrid calendar that supports both"
  },
  {
    "id" : "6b19d769-6aa4-48b5-8264-1922ab106ae0",
    "prId" : 28119,
    "prUrl" : "https://github.com/apache/spark/pull/28119#pullrequestreview-389876098",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "157dd0e3-8b78-42c6-ad02-44aa4d254c5a",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "so we always hit this branch for the first record? because the `diff` is `Long.MaxValue` at the beginning.",
        "createdAt" : "2020-04-08T10:19:44Z",
        "updatedAt" : "2020-04-08T18:05:04Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "9d5bee62-c048-4699-a7f9-8c0ae2dcc3aa",
        "parentId" : "157dd0e3-8b78-42c6-ad02-44aa4d254c5a",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "yes, we need the start point and diff for it.",
        "createdAt" : "2020-04-08T11:12:46Z",
        "updatedAt" : "2020-04-08T18:05:04Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      }
    ],
    "commit" : "4281d4b40fd5e116d3c0f0d4b5ed6d7958539f19",
    "line" : 320,
    "diffHunk" : "@@ -1,1 +318,322 @@          val rebased = rebaseFunc(zid, micros)\n          val curDiff = rebased - micros\n          if (curDiff != diff) {\n            if (step > MICROS_PER_SECOND) {\n              micros -= step"
  },
  {
    "id" : "9d2ebcad-6634-4763-ab2e-dbdcc9647679",
    "prId" : 28119,
    "prUrl" : "https://github.com/apache/spark/pull/28119#pullrequestreview-389879274",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d08c2f14-0b9d-4b19-b5a8-1b53929a1082",
        "parentId" : null,
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "I changed it from month to week",
        "createdAt" : "2020-04-08T11:17:53Z",
        "updatedAt" : "2020-04-08T18:05:04Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      }
    ],
    "commit" : "4281d4b40fd5e116d3c0f0d4b5ed6d7958539f19",
    "line" : 313,
    "diffHunk" : "@@ -1,1 +311,315 @@        var micros = start\n        var diff = Long.MaxValue\n        val maxStep = DAYS_PER_WEEK * MICROS_PER_DAY\n        var step: Long = MICROS_PER_SECOND\n        val switches = new ArrayBuffer[Long]()"
  }
]