[
  {
    "id" : "5f15e1e8-e71a-444e-b15b-055708fee736",
    "prId" : 33006,
    "prUrl" : "https://github.com/apache/spark/pull/33006#pullrequestreview-689769448",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "66944e5f-c0f0-4d35-be0c-a4455f3ed099",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Just a question. Previously, we tracked with `long` type for `valuesRead` and the others. After this PR, `int` is enough and this is aligned with Parquet file definition. Did I understand correctly?",
        "createdAt" : "2021-06-22T16:43:38Z",
        "updatedAt" : "2021-06-22T16:44:05Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "77f256e8-1bab-487d-ba33-dbeb3b4a97db",
        "parentId" : "66944e5f-c0f0-4d35-be0c-a4455f3ed099",
        "authorId" : "9ae00886-75a7-4f39-aed7-d47b26b67afb",
        "body" : "Yes. Previously `valuesRead` is the number of values read so far within the column chunk, so it has to be `long`. However, it is not that useful. Here we changed to only track values read so far within a page and within a single batch, both of which are integers.",
        "createdAt" : "2021-06-22T16:53:47Z",
        "updatedAt" : "2021-06-22T16:53:47Z",
        "lastEditedBy" : "9ae00886-75a7-4f39-aed7-d47b26b67afb",
        "tags" : [
        ]
      }
    ],
    "commit" : "f5e97b77005456894cce6e01bc54160ee0cf1d01",
    "line" : 34,
    "diffHunk" : "@@ -1,1 +32,36 @@\n  /** The remaining number of values to read in the current batch */\n  int valuesToReadInBatch;\n\n  ParquetReadState(int maxDefinitionLevel) {"
  },
  {
    "id" : "017393bb-befd-45d3-aa33-04fcfe3e42f4",
    "prId" : 33006,
    "prUrl" : "https://github.com/apache/spark/pull/33006#pullrequestreview-689904956",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "21df59a7-bda4-4098-9f80-24bafe3cdfd0",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Shall we have an initial value, `-1`, and use it in`advanceOffset` to validate `resetForBatch` is called properly before?",
        "createdAt" : "2021-06-22T16:47:02Z",
        "updatedAt" : "2021-06-22T16:47:13Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "ac06d5da-5c33-44f9-9938-16f5f8362736",
        "parentId" : "21df59a7-bda4-4098-9f80-24bafe3cdfd0",
        "authorId" : "9ae00886-75a7-4f39-aed7-d47b26b67afb",
        "body" : "That's somewhat useful but it adds a branching in a hot path. Also we may have to remember reset the offset to -1 after reading a batch. Because these are internal methods, I guess it's not easy to go wrong without being captured by unit tests and other things.",
        "createdAt" : "2021-06-22T19:12:27Z",
        "updatedAt" : "2021-06-22T19:12:27Z",
        "lastEditedBy" : "9ae00886-75a7-4f39-aed7-d47b26b67afb",
        "tags" : [
        ]
      }
    ],
    "commit" : "f5e97b77005456894cce6e01bc54160ee0cf1d01",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +26,30 @@\n  /** The offset in the current batch to put the next value */\n  int offset;\n\n  /** The remaining number of values to read in the current page */"
  }
]