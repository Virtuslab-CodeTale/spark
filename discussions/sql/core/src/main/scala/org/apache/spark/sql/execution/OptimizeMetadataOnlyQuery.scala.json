[
  {
    "id" : "4b81b291-9795-4881-9aa3-6470424ae35d",
    "prId" : 31542,
    "prUrl" : "https://github.com/apache/spark/pull/31542#pullrequestreview-589930760",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "03f79611-f802-4450-bd37-0d66c5e539ed",
        "parentId" : null,
        "authorId" : "d19fc546-1296-40ce-befb-9eca847aeceb",
        "body" : "Please add a test case",
        "createdAt" : "2021-02-11T19:18:01Z",
        "updatedAt" : "2021-02-11T19:18:26Z",
        "lastEditedBy" : "d19fc546-1296-40ce-befb-9eca847aeceb",
        "tags" : [
        ]
      },
      {
        "id" : "b6b7cead-ffb0-4abf-832c-4970a760beea",
        "parentId" : "03f79611-f802-4450-bd37-0d66c5e539ed",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "+1 for @gatorsmile 's advice for adding a test case.",
        "createdAt" : "2021-02-13T01:47:05Z",
        "updatedAt" : "2021-02-13T01:47:05Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "050398bb49552721ff4aea51af6e1463f3fe2075",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +56,60 @@        // are deterministic.\n        if (AttributeSet((projectList ++ filters).flatMap(_.references)).subsetOf(partAttrs)\n          && filters.map(_.deterministic).forall(identity)) {\n          // The project list and filters all only refer to partition attributes, which means the\n          // the Aggregator operator can also only refer to partition attributes, and filters are"
  },
  {
    "id" : "1194ea2c-1eed-4e80-9b13-6506fcab533b",
    "prId" : 31542,
    "prUrl" : "https://github.com/apache/spark/pull/31542#pullrequestreview-589931001",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d981f92f-f51b-4208-8b04-ccf2d2a6cc17",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Thank you for updating comments. Could you revise the description (line 37) of this optimizer together.",
        "createdAt" : "2021-02-13T01:49:13Z",
        "updatedAt" : "2021-02-13T01:49:13Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "050398bb49552721ff4aea51af6e1463f3fe2075",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +54,58 @@          projectList, filters, PartitionedRelation(partAttrs, rel))) =>\n        // We only apply this optimization when only partitioned attributes are scanned and filters\n        // are deterministic.\n        if (AttributeSet((projectList ++ filters).flatMap(_.references)).subsetOf(partAttrs)\n          && filters.map(_.deterministic).forall(identity)) {"
  },
  {
    "id" : "9786065d-c51b-45c2-8318-3b81512722ff",
    "prId" : 31542,
    "prUrl" : "https://github.com/apache/spark/pull/31542#pullrequestreview-589931036",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c1955d75-d016-441a-8cde-de798d568199",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "indentation at line 58? We need two more leading spaces.",
        "createdAt" : "2021-02-13T01:49:34Z",
        "updatedAt" : "2021-02-13T01:49:34Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "050398bb49552721ff4aea51af6e1463f3fe2075",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +56,60 @@        // are deterministic.\n        if (AttributeSet((projectList ++ filters).flatMap(_.references)).subsetOf(partAttrs)\n          && filters.map(_.deterministic).forall(identity)) {\n          // The project list and filters all only refer to partition attributes, which means the\n          // the Aggregator operator can also only refer to partition attributes, and filters are"
  },
  {
    "id" : "796ffbe9-a7b8-4a53-b6f2-ad7c275d4f8c",
    "prId" : 31542,
    "prUrl" : "https://github.com/apache/spark/pull/31542#pullrequestreview-590990310",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d4d2151c-c127-46ce-bbf7-e19b8c59c7aa",
        "parentId" : null,
        "authorId" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "body" : "nit: why not just `filters.forall(_.deterministic)`? ",
        "createdAt" : "2021-02-16T08:40:27Z",
        "updatedAt" : "2021-02-16T08:40:31Z",
        "lastEditedBy" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "tags" : [
        ]
      }
    ],
    "commit" : "050398bb49552721ff4aea51af6e1463f3fe2075",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +56,60 @@        // are deterministic.\n        if (AttributeSet((projectList ++ filters).flatMap(_.references)).subsetOf(partAttrs)\n          && filters.map(_.deterministic).forall(identity)) {\n          // The project list and filters all only refer to partition attributes, which means the\n          // the Aggregator operator can also only refer to partition attributes, and filters are"
  },
  {
    "id" : "96382cbd-adf5-4369-8d2b-b84baf8f848e",
    "prId" : 31542,
    "prUrl" : "https://github.com/apache/spark/pull/31542#pullrequestreview-590997579",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "708fd7be-ac43-4ea4-81fa-66300489942f",
        "parentId" : null,
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "I think `PhysicalOperation` only collects deterministic filters, isn't?",
        "createdAt" : "2021-02-16T08:49:47Z",
        "updatedAt" : "2021-02-16T08:51:15Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      }
    ],
    "commit" : "050398bb49552721ff4aea51af6e1463f3fe2075",
    "line" : 2,
    "diffHunk" : "@@ -1,1 +51,55 @@\n    plan.transform {\n      case a @ Aggregate(_, aggExprs, child @ PhysicalOperation(\n          projectList, filters, PartitionedRelation(partAttrs, rel))) =>\n        // We only apply this optimization when only partitioned attributes are scanned and filters"
  },
  {
    "id" : "aa2e29a6-d109-4f79-abae-09434f87a734",
    "prId" : 28383,
    "prUrl" : "https://github.com/apache/spark/pull/28383#pullrequestreview-404495652",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d69676fe-65da-42b7-adce-dc22c1f2a440",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "We don't need to filter out all the unevaluable exprs here? The PR title should say so though...",
        "createdAt" : "2020-05-01T22:40:52Z",
        "updatedAt" : "2020-05-04T07:47:41Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "1bc7cf8c-32f8-44e7-8898-061e2fe73750",
        "parentId" : "d69676fe-65da-42b7-adce-dc22c1f2a440",
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "Yeah let's keep the PR title.and description matched ..",
        "createdAt" : "2020-05-02T03:17:54Z",
        "updatedAt" : "2020-05-04T07:47:41Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      }
    ],
    "commit" : "d601af42e32cd74e99c691b6870eebf17845ae09",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +118,122 @@          a.withName(relation.output.find(_.semanticEquals(a)).get.name)\n      }\n    }.filterNot(SubqueryExpression.hasSubquery)\n\n    child transform {"
  }
]