[
  {
    "id" : "c29d8d1f-cc94-4ccc-a707-e27b143bfd0d",
    "prId" : 29654,
    "prUrl" : "https://github.com/apache/spark/pull/29654#pullrequestreview-484638455",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b5a9084c-2d3a-4eaa-9daa-5c66ae9a1cd0",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "Could we get actual performance differences by this change? Did you run microbenchmarks to check them?",
        "createdAt" : "2020-09-09T00:12:47Z",
        "updatedAt" : "2020-09-11T21:29:55Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "172b9e70-748f-4fb4-b7e3-22ca82f8a701",
        "parentId" : "b5a9084c-2d3a-4eaa-9daa-5c66ae9a1cd0",
        "authorId" : "9ae00886-75a7-4f39-aed7-d47b26b67afb",
        "body" : "Thanks @maropu . Yes I used `CompressionSchemeBenchmark` and see some improvements with this. I'll update the description with more info.",
        "createdAt" : "2020-09-09T03:10:56Z",
        "updatedAt" : "2020-09-11T21:29:55Z",
        "lastEditedBy" : "9ae00886-75a7-4f39-aed7-d47b26b67afb",
        "tags" : [
        ]
      },
      {
        "id" : "f8d0e77c-fb5d-4b43-a999-0438e6ec6966",
        "parentId" : "b5a9084c-2d3a-4eaa-9daa-5c66ae9a1cd0",
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "Thanks!",
        "createdAt" : "2020-09-09T03:37:41Z",
        "updatedAt" : "2020-09-11T21:29:55Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      }
    ],
    "commit" : "bcda6c28b39946597af3a6ddb2206da24d320156",
    "line" : 30,
    "diffHunk" : "@@ -1,1 +199,203 @@        _compressedSize += actualSize + 4\n      } else {\n        if (lastValue == value) {\n          lastRun += 1\n        } else {"
  },
  {
    "id" : "4865fb87-875b-4214-8ed5-7e6ef42bb13f",
    "prId" : 29506,
    "prUrl" : "https://github.com/apache/spark/pull/29506#pullrequestreview-472544868",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1a05a682-d7ed-4d6a-8909-abeddb8555ee",
        "parentId" : null,
        "authorId" : "b19fe247-920f-40ae-83e7-6b8ec9979f6b",
        "body" : "Please note that this change is not needed.  I made it so that all decompress code was consistent now using \r\n\r\n```\r\nwhile (pos < capacity) {\r\n```\r\n\r\nThe extra `valueCountLocal < runLocal` would only serve to have the code crash trying to walk past the end of the batch if for some reason the compression was incorrect.",
        "createdAt" : "2020-08-21T14:00:19Z",
        "updatedAt" : "2020-08-21T17:21:51Z",
        "lastEditedBy" : "b19fe247-920f-40ae-83e7-6b8ec9979f6b",
        "tags" : [
        ]
      },
      {
        "id" : "923dd012-a451-4539-aeb0-43c9c9b616ab",
        "parentId" : "1a05a682-d7ed-4d6a-8909-abeddb8555ee",
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "Could we have `assert(valueCountLocal < runLocal)` here?",
        "createdAt" : "2020-08-21T14:36:52Z",
        "updatedAt" : "2020-08-21T17:21:51Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      }
    ],
    "commit" : "4f8f6428dce63c41651313dbd163537f6c06b0ce",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +319,323 @@      var currentValueLocal: Long = 0\n\n      while (pos < capacity) {\n        assert(valueCountLocal <= runLocal)\n        if (pos != nextNullIndex) {"
  },
  {
    "id" : "4268bbf0-b811-4466-be68-c5e5727211ec",
    "prId" : 29506,
    "prUrl" : "https://github.com/apache/spark/pull/29506#pullrequestreview-472546932",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "31ade7e9-3836-4cd8-a92c-f165ae131e41",
        "parentId" : null,
        "authorId" : "99e31844-a5b3-48a2-af71-412edb607a13",
        "body" : "Can we drop `countLocal` now?",
        "createdAt" : "2020-08-21T14:39:29Z",
        "updatedAt" : "2020-08-21T17:21:51Z",
        "lastEditedBy" : "99e31844-a5b3-48a2-af71-412edb607a13",
        "tags" : [
        ]
      }
    ],
    "commit" : "4f8f6428dce63c41651313dbd163537f6c06b0ce",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +627,631 @@      var seenNulls = 0\n\n      while (pos < capacity) {\n        if (pos != nextNullIndex) {\n          val bit = visitedLocal % BITS_PER_LONG"
  }
]