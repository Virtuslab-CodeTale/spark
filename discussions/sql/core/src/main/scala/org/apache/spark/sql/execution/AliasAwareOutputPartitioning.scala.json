[
  {
    "id" : "04f6fc0f-e22b-4f40-9165-6714bc22f78f",
    "prId" : 26943,
    "prUrl" : "https://github.com/apache/spark/pull/26943#pullrequestreview-346338651",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c2d6a14c-d0e5-4276-a7e4-2658fb835756",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "How about the other partitioning cases, e.g., range?",
        "createdAt" : "2020-01-08T11:30:44Z",
        "updatedAt" : "2020-01-23T18:57:53Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "08c8c4d3-e0ff-4b80-9289-c74abb956daa",
        "parentId" : "c2d6a14c-d0e5-4276-a7e4-2658fb835756",
        "authorId" : "b14448be-63dd-4b59-ab38-deeb2a38de86",
        "body" : "`PartitioningCollection` is constructed as `PartitioningCollection(Seq(left.outputPartitioning, right.outputPartitioning))`, so aliases should have been already removed if the partitioning was `HashPartitioning`. But we could add one similar to your solution (https://github.com/apache/spark/pull/17400/files#diff-342789ab9c8c0154b412dd1c719c9397R82-R86) for future proof.\r\n\r\nFor `RangePartitioning`, your change (https://github.com/apache/spark/pull/17400/files#diff-342789ab9c8c0154b412dd1c719c9397R72-R78) makes sense, but I couldn't come up with an actual example to test against. Do you have one in mind?",
        "createdAt" : "2020-01-23T04:05:36Z",
        "updatedAt" : "2020-01-23T18:57:53Z",
        "lastEditedBy" : "b14448be-63dd-4b59-ab38-deeb2a38de86",
        "tags" : [
        ]
      }
    ],
    "commit" : "fbafedf8793554366135b4d41189e06feb6f875e",
    "line" : 45,
    "diffHunk" : "@@ -1,1 +43,47 @@    exprs.map {\n      case a: AttributeReference => replaceAlias(a).getOrElse(a)\n      case other => other\n    }\n  }"
  },
  {
    "id" : "9a19423e-c8fc-41ef-8451-0aec915b5bc2",
    "prId" : 26943,
    "prUrl" : "https://github.com/apache/spark/pull/26943#pullrequestreview-346338651",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2d1dac55-102f-46c2-81b7-0be3e20febe0",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "How about just checking if `outputExprs` has aliases or not first? https://github.com/apache/spark/pull/17400/files#diff-342789ab9c8c0154b412dd1c719c9397R51\r\nIn case of no alias, we need to do nothing.",
        "createdAt" : "2020-01-08T11:52:01Z",
        "updatedAt" : "2020-01-23T18:57:53Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "46844c59-0cb5-4adc-9e77-4425a3c9fe43",
        "parentId" : "2d1dac55-102f-46c2-81b7-0be3e20febe0",
        "authorId" : "b14448be-63dd-4b59-ab38-deeb2a38de86",
        "body" : "Updated. Thanks!",
        "createdAt" : "2020-01-23T05:15:50Z",
        "updatedAt" : "2020-01-23T18:57:53Z",
        "lastEditedBy" : "b14448be-63dd-4b59-ab38-deeb2a38de86",
        "tags" : [
        ]
      }
    ],
    "commit" : "fbafedf8793554366135b4d41189e06feb6f875e",
    "line" : 29,
    "diffHunk" : "@@ -1,1 +27,31 @@  protected def outputExpressions: Seq[NamedExpression]\n\n  final override def outputPartitioning: Partitioning = {\n    if (hasAlias) {\n      child.outputPartitioning match {"
  }
]