[
  {
    "id" : "29cea34b-e44d-4531-a90e-211f53cab3a4",
    "prId" : 31340,
    "prUrl" : "https://github.com/apache/spark/pull/31340#pullrequestreview-576062139",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6f0d3500-19e1-428a-88ea-8111ad409275",
        "parentId" : null,
        "authorId" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "body" : "This is just fixing the comment.",
        "createdAt" : "2021-01-26T06:48:03Z",
        "updatedAt" : "2021-01-28T21:50:43Z",
        "lastEditedBy" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "tags" : [
        ]
      }
    ],
    "commit" : "cd7ca22459c7fa24e5c86cd32a81ba49094cf896",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +27,31 @@/**\n * The base class of [[SortBasedAggregationIterator]], [[TungstenAggregationIterator]] and\n * [[ObjectAggregationIterator]].\n * It mainly contains two parts:\n * 1. It initializes aggregate functions."
  },
  {
    "id" : "0a5380c7-ae57-457c-abb6-1bbd13a7f58c",
    "prId" : 26656,
    "prUrl" : "https://github.com/apache/spark/pull/26656#pullrequestreview-334465296",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bf71b576-e254-4455-a2a6-f5d7f7e26b18",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "this requires that the filter always produce same result for same input.\r\n\r\nWe should make sure the filter is deterministic during analysis.",
        "createdAt" : "2019-12-18T09:54:24Z",
        "updatedAt" : "2019-12-24T03:01:16Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "ebaf7662-150e-4ab1-949d-f83d3645d463",
        "parentId" : "bf71b576-e254-4455-a2a6-f5d7f7e26b18",
        "authorId" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "body" : "OK. I will do the check",
        "createdAt" : "2019-12-18T10:15:12Z",
        "updatedAt" : "2019-12-24T03:01:16Z",
        "lastEditedBy" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "tags" : [
        ]
      },
      {
        "id" : "0bb0cd09-d7dd-4dbe-bdd6-7b4bf2792e0d",
        "parentId" : "bf71b576-e254-4455-a2a6-f5d7f7e26b18",
        "authorId" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "body" : "I checked postgreSQL that support deterministic expression .\r\n```\r\nSELECT\r\n  year,\r\n  count(*) FILTER (WHERE random() * gdp_per_capita >= 40000)\r\nFROM\r\n  countries\r\nGROUP BY\r\n  year;\r\n```",
        "createdAt" : "2019-12-19T01:54:23Z",
        "updatedAt" : "2019-12-24T03:01:16Z",
        "lastEditedBy" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "tags" : [
        ]
      },
      {
        "id" : "4f3237c8-3188-4f8c-b030-b1dd4dd8effa",
        "parentId" : "bf71b576-e254-4455-a2a6-f5d7f7e26b18",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "We can support it later, by improving the implementation. For now we can't support, otherwise we may partially update the agg buffer and producing undefined result.",
        "createdAt" : "2019-12-19T08:15:47Z",
        "updatedAt" : "2019-12-24T03:01:16Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      }
    ],
    "commit" : "d98ea4139454e3346e220aa0e1df8a2e4da18cea",
    "line" : 16,
    "diffHunk" : "@@ -1,1 +165,169 @@                if (filter.isDefined) {\n                  ae.updateExpressions.zip(ae.aggBufferAttributes).map {\n                    case (updateExpr, attr) => If(filter.get, updateExpr, attr)\n                  }\n                } else {"
  }
]