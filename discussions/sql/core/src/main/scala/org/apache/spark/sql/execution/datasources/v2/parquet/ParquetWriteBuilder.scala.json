[
  {
    "id" : "ff3cf8b0-e1c8-4e1b-919e-7e1cbce6411a",
    "prId" : 24327,
    "prUrl" : "https://github.com/apache/spark/pull/24327#pullrequestreview-247190425",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5091f959-60cc-4985-b1b3-9a9b69afa21e",
        "parentId" : null,
        "authorId" : "0fc9f1bc-0097-451e-915f-52da69a366f3",
        "body" : "Does v2 also use Parquet `_metadata` files?",
        "createdAt" : "2019-06-06T19:45:42Z",
        "updatedAt" : "2019-06-14T16:45:37Z",
        "lastEditedBy" : "0fc9f1bc-0097-451e-915f-52da69a366f3",
        "tags" : [
        ]
      },
      {
        "id" : "a4664cfa-a0c4-458b-84a2-856ae2450dac",
        "parentId" : "5091f959-60cc-4985-b1b3-9a9b69afa21e",
        "authorId" : "15acce7d-132b-48c9-894b-9bc3f4c2b09d",
        "body" : "I think it is disabled by default",
        "createdAt" : "2019-06-07T16:26:14Z",
        "updatedAt" : "2019-06-14T16:45:37Z",
        "lastEditedBy" : "15acce7d-132b-48c9-894b-9bc3f4c2b09d",
        "tags" : [
        ]
      }
    ],
    "commit" : "f658e9265ba741922fc96eec76038addcb6491a1",
    "line" : 53,
    "diffHunk" : "@@ -1,1 +51,55 @@    val committerClass =\n      conf.getClass(\n        SQLConf.PARQUET_OUTPUT_COMMITTER_CLASS.key,\n        classOf[ParquetOutputCommitter],\n        classOf[OutputCommitter])"
  },
  {
    "id" : "21bf8227-0ab3-41dd-8a8e-de989aa3ac33",
    "prId" : 24327,
    "prUrl" : "https://github.com/apache/spark/pull/24327#pullrequestreview-248499960",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0a5b56c6-339b-41e8-b285-bc618a6d2701",
        "parentId" : null,
        "authorId" : "0fc9f1bc-0097-451e-915f-52da69a366f3",
        "body" : "If they are disabled by default in v1, why allow writing them in v2?",
        "createdAt" : "2019-06-06T19:48:00Z",
        "updatedAt" : "2019-06-14T16:45:37Z",
        "lastEditedBy" : "0fc9f1bc-0097-451e-915f-52da69a366f3",
        "tags" : [
        ]
      },
      {
        "id" : "af7a91d2-0ff3-438b-a858-4d6f9492add3",
        "parentId" : "0a5b56c6-339b-41e8-b285-bc618a6d2701",
        "authorId" : "15acce7d-132b-48c9-894b-9bc3f4c2b09d",
        "body" : "I think the behavior in V1 and V2 are the same: by default set \"parquet.summary.metadata.level\" as  \"NONE\" and don't write the summary file. If the conf \"parquet.summary.metadata.level\" is set by user and `spark.sql.parquet.output.committer.class` is set correctly, then it will write the summary file.\r\nSee: https://issues.apache.org/jira/browse/SPARK-15719",
        "createdAt" : "2019-06-07T16:31:15Z",
        "updatedAt" : "2019-06-14T16:45:37Z",
        "lastEditedBy" : "15acce7d-132b-48c9-894b-9bc3f4c2b09d",
        "tags" : [
        ]
      },
      {
        "id" : "a54ad5c6-74e6-43e9-ba59-00a7e5f1ca8c",
        "parentId" : "0a5b56c6-339b-41e8-b285-bc618a6d2701",
        "authorId" : "0fc9f1bc-0097-451e-915f-52da69a366f3",
        "body" : "Why should v2 support deprecated metadata files?",
        "createdAt" : "2019-06-12T00:06:07Z",
        "updatedAt" : "2019-06-14T16:45:37Z",
        "lastEditedBy" : "0fc9f1bc-0097-451e-915f-52da69a366f3",
        "tags" : [
        ]
      },
      {
        "id" : "e964c8f9-ccaa-43f0-9d98-d93b58c98a7f",
        "parentId" : "0a5b56c6-339b-41e8-b285-bc618a6d2701",
        "authorId" : "15acce7d-132b-48c9-894b-9bc3f4c2b09d",
        "body" : "I think it is consistent with V1 here.\r\nThe value of `parquet.summary.metadata.level` is `ALL` by default. As per SPARK-15719, we should set it as `NONE` by default in Spark.\r\nIf users set the conf `parquet.summary.metadata.level` as `ALL` or `COMMON_ONLY` explicitly, Spark should write metadata files.",
        "createdAt" : "2019-06-12T00:32:21Z",
        "updatedAt" : "2019-06-14T16:45:37Z",
        "lastEditedBy" : "15acce7d-132b-48c9-894b-9bc3f4c2b09d",
        "tags" : [
        ]
      }
    ],
    "commit" : "f658e9265ba741922fc96eec76038addcb6491a1",
    "line" : 89,
    "diffHunk" : "@@ -1,1 +87,91 @@    conf.set(ParquetOutputFormat.COMPRESSION, parquetOptions.compressionCodecClassName)\n\n    // SPARK-15719: Disables writing Parquet summary files by default.\n    if (conf.get(ParquetOutputFormat.JOB_SUMMARY_LEVEL) == null\n      && conf.get(ParquetOutputFormat.ENABLE_JOB_SUMMARY) == null) {"
  }
]