[
  {
    "id" : "3c808d6c-bb80-4c27-a0e1-e13b05368dcb",
    "prId" : 31229,
    "prUrl" : "https://github.com/apache/spark/pull/31229#pullrequestreview-570507206",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0cf37c1f-cace-4b77-b133-068d74558a58",
        "parentId" : null,
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "The v2 API looks inconsistent to me. I do believe either both `dropPartition` and `createPartition` should return nothing (and indicate errors via exceptions) or both methods should return `boolean`.",
        "createdAt" : "2021-01-18T08:06:56Z",
        "updatedAt" : "2021-01-19T07:42:27Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      },
      {
        "id" : "b5764636-287a-407e-a030-caebe07de409",
        "parentId" : "0cf37c1f-cace-4b77-b133-068d74558a58",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "Similar code for partition dropping: https://github.com/apache/spark/blob/84c1f436690c76bfd3bd1a664dba303cfc8381da/sql/core/src/main/scala/org/apache/spark/sql/execution/datasources/v2/AlterTableDropPartitionExec.scala#L47-L59",
        "createdAt" : "2021-01-18T08:08:06Z",
        "updatedAt" : "2021-01-19T07:42:27Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      },
      {
        "id" : "4ebdc8b0-d0c6-4321-9eb3-b67967e4201f",
        "parentId" : "0cf37c1f-cace-4b77-b133-068d74558a58",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "dropPartition follows dropTable I think",
        "createdAt" : "2021-01-18T08:53:21Z",
        "updatedAt" : "2021-01-19T07:42:27Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "0bdf9ade-512a-4b8a-9fdc-514e58f026c0",
        "parentId" : "0cf37c1f-cace-4b77-b133-068d74558a58",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "ok. If we look at `dropTable()`, I wonder why it returns `false` when a table doesn't exist:\r\nhttps://github.com/apache/spark/blob/ec1560af251d2c3580f5bccfabc750f1c7af09df/sql/catalyst/src/main/java/org/apache/spark/sql/connector/catalog/TableCatalog.java#L171\r\nthough other methods in the same interface throw an exception:\r\nhttps://github.com/apache/spark/blob/ec1560af251d2c3580f5bccfabc750f1c7af09df/sql/catalyst/src/main/java/org/apache/spark/sql/connector/catalog/TableCatalog.java#L157\r\n\r\nThis looks inconsistent to me.",
        "createdAt" : "2021-01-18T10:12:32Z",
        "updatedAt" : "2021-01-19T07:42:27Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      },
      {
        "id" : "59b9ba3c-0080-4da0-bfb9-9209bd74dea8",
        "parentId" : "0cf37c1f-cace-4b77-b133-068d74558a58",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "probably from Hive?",
        "createdAt" : "2021-01-18T13:51:16Z",
        "updatedAt" : "2021-01-19T07:42:27Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      }
    ],
    "commit" : "3df29aa2431e3c79d230302b8b0eebab1781a3f4",
    "line" : 21,
    "diffHunk" : "@@ -1,1 +51,55 @@        val partProp = partitionSpec.location.map(loc => \"location\" -> loc).toMap\n        table.createPartition(partitionSpec.ident, partProp.asJava)\n        true\n      case _ if table.isInstanceOf[SupportsAtomicPartitionManagement] =>\n        val partIdents = notExistsParts.map(_.ident)"
  }
]