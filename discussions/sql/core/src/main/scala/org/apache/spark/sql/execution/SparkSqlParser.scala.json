[
  {
    "id" : "b76da26d-cc7c-490b-902f-1dcd6e84621a",
    "prId" : 31721,
    "prUrl" : "https://github.com/apache/spark/pull/31721#pullrequestreview-603472820",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "274017a2-8569-46c8-928e-b0676b7a9456",
        "parentId" : null,
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "Can we update the docs above? -> ` Create a [[AddFileCommand]], [[AddJarCommand]], [[ListFilesCommand]] or  ... `",
        "createdAt" : "2021-03-03T23:45:41Z",
        "updatedAt" : "2021-03-09T06:39:03Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      }
    ],
    "commit" : "ff708fa75c8a16943d0187d7854cd57480e22478",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +361,365 @@          case \"file\" => AddFileCommand(maybePaths)\n          case \"jar\" => AddJarCommand(maybePaths)\n          case \"archive\" => AddArchiveCommand(maybePaths)\n          case other => operationNotAllowed(s\"ADD with resource type '$other'\", ctx)\n        }"
  },
  {
    "id" : "b7e2984a-e4d2-4765-8c7b-a1249d5a14dd",
    "prId" : 30705,
    "prUrl" : "https://github.com/apache/spark/pull/30705#pullrequestreview-549751367",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "637b9d0a-0566-4789-9106-e94ffac252d4",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "can we update `getSerdeInfo` to remove the `skipCheck` parameter?",
        "createdAt" : "2020-12-10T13:21:32Z",
        "updatedAt" : "2020-12-14T02:09:26Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "86f4eba4-2693-4f6c-9baf-00c0c93070ab",
        "parentId" : "637b9d0a-0566-4789-9106-e94ffac252d4",
        "authorId" : "cce1c782-0596-44b6-8b99-6b77d2cca53c",
        "body" : "done",
        "createdAt" : "2020-12-11T02:08:04Z",
        "updatedAt" : "2020-12-14T02:09:26Z",
        "lastEditedBy" : "cce1c782-0596-44b6-8b99-6b77d2cca53c",
        "tags" : [
        ]
      }
    ],
    "commit" : "57825623ae1472a76a70c737760650aad55d8968",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +448,452 @@    val provider = ctx.tableProvider.asScala.headOption.map(_.multipartIdentifier.getText)\n    val location = visitLocationSpecList(ctx.locationSpec())\n    val serdeInfo = getSerdeInfo(\n      ctx.rowFormat.asScala.toSeq, ctx.createFileFormat.asScala.toSeq, ctx)\n    if (provider.isDefined && serdeInfo.isDefined) {"
  },
  {
    "id" : "942166d0-a7ec-4fc7-8720-938018da7898",
    "prId" : 29421,
    "prUrl" : "https://github.com/apache/spark/pull/29421#pullrequestreview-473157948",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "df427fbb-26f1-46eb-aee9-d55e220d6818",
        "parentId" : null,
        "authorId" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "body" : "@cloud-fan @maropu\r\nCheck more  in https://github.com/apache/spark/pull/29421#issuecomment-677495619\r\nOnly in hive  default mode \r\n```\r\n > select transform(*)\r\n    > using 'cat'\r\n    > from (\r\n    > select 1 as a, 2 as b, 3 as c\r\n    > ) tmp ;\r\n```\r\nwill take rest columns for last column as default. so changed here.\r\n",
        "createdAt" : "2020-08-21T15:17:18Z",
        "updatedAt" : "2020-10-26T02:51:45Z",
        "lastEditedBy" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "tags" : [
        ]
      },
      {
        "id" : "e4a9c31e-4224-4b31-82e7-5c78140842d5",
        "parentId" : "df427fbb-26f1-46eb-aee9-d55e220d6818",
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "We don't respect `WITH SERDEPROPERTIES`?",
        "createdAt" : "2020-08-24T06:07:06Z",
        "updatedAt" : "2020-10-26T02:51:45Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "fb16f4b8-d8e3-448b-ab2b-a53deff93e95",
        "parentId" : "df427fbb-26f1-46eb-aee9-d55e220d6818",
        "authorId" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "body" : "> We don't respect `WITH SERDEPROPERTIES`?\r\n\r\n```\r\nrowFormat\r\n    : ROW FORMAT SERDE name=STRING (WITH SERDEPROPERTIES props=tablePropertyList)?  #rowFormatSerde\r\n    | ROW FORMAT DELIMITED\r\n      (FIELDS TERMINATED BY fieldsTerminatedBy=STRING (ESCAPED BY escapedBy=STRING)?)?\r\n      (COLLECTION ITEMS TERMINATED BY collectionItemsTerminatedBy=STRING)?\r\n      (MAP KEYS TERMINATED BY keysTerminatedBy=STRING)?\r\n      (LINES TERMINATED BY linesSeparatedBy=STRING)?\r\n      (NULL DEFINED AS nullDefinedAs=STRING)?                                       #rowFormatDelimited\r\n    ;\r\n```\r\n\r\n`WITH SERDEPROPERTIES` must use with ROW FORMAT SERDE, and here is for case without `ROW FORMAT SERDE` or `ROW FORMAT DELIMITED`",
        "createdAt" : "2020-08-24T06:33:32Z",
        "updatedAt" : "2020-10-26T02:51:45Z",
        "lastEditedBy" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "tags" : [
        ]
      },
      {
        "id" : "7f7c403f-3eca-470d-b64a-3c4d82e7cdd3",
        "parentId" : "df427fbb-26f1-46eb-aee9-d55e220d6818",
        "authorId" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "body" : "And if user  specify ` ROW FORMAT SERDE`  will respect `WITH SERDEPROPERTIES`. \r\nALL UT IN `\"SPARK-32388: TRANSFORM should handle schema less correctly (hive serde)\"`",
        "createdAt" : "2020-08-24T06:37:06Z",
        "updatedAt" : "2020-10-26T02:51:45Z",
        "lastEditedBy" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "tags" : [
        ]
      },
      {
        "id" : "ff8d3a6d-c71e-4e39-a5cc-cf7183b10b18",
        "parentId" : "df427fbb-26f1-46eb-aee9-d55e220d6818",
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "Ah, I see.",
        "createdAt" : "2020-08-24T06:41:47Z",
        "updatedAt" : "2020-10-26T02:51:45Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "32fef930-4fda-493e-a8bb-25ecdb122dd9",
        "parentId" : "df427fbb-26f1-46eb-aee9-d55e220d6818",
        "authorId" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "body" : "https://issues.apache.org/jira/browse/SPARK-32684\r\nhttps://issues.apache.org/jira/browse/SPARK-32685\r\nThis two issue, WDYT?",
        "createdAt" : "2020-08-24T06:44:45Z",
        "updatedAt" : "2020-10-26T02:51:45Z",
        "lastEditedBy" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "tags" : [
        ]
      }
    ],
    "commit" : "e83f6a55e20e7f4edfa11ad91e06115a5eb38c6d",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +788,792 @@        val props = Seq(\n          \"field.delim\" -> \"\\t\",\n          \"serialization.last.column.takes.rest\" -> \"true\")\n        val recordHandler = Option(conf.getConfString(configKey, defaultConfigValue))\n        (Nil, Option(name), props, recordHandler)"
  },
  {
    "id" : "91e45a27-ebf6-42c8-96e5-2f3bf842a175",
    "prId" : 29146,
    "prUrl" : "https://github.com/apache/spark/pull/29146#pullrequestreview-459723953",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "90287896-e6f3-4be4-91a8-7517b6d1f9a2",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "Will it match something like `a ###`?  Shall we use `([a-zA-Z_\\d\\\\.:]+)$`?",
        "createdAt" : "2020-08-03T03:07:56Z",
        "updatedAt" : "2020-08-03T10:05:19Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      }
    ],
    "commit" : "3065ed9aa5ce232ce4f16335cbf830bd93a73f3f",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +73,77 @@      case configKeyValueDef(key, value) =>\n        SetCommand(Some(key -> Option(value.trim)))\n      case configKeyDef(key) =>\n        SetCommand(Some(key -> None))\n      case s if s == \"-v\" =>"
  },
  {
    "id" : "6e325957-6ccf-4770-a418-ae142906b85e",
    "prId" : 29146,
    "prUrl" : "https://github.com/apache/spark/pull/29146#pullrequestreview-459814582",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "da21b991-384e-4498-bd91-7216e5c5c1d2",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "`(EQ value=.*)` we have an alias, can we use it here?",
        "createdAt" : "2020-08-03T03:09:58Z",
        "updatedAt" : "2020-08-03T10:05:19Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "191a21f6-9cce-4e9e-8179-7ee088c6a412",
        "parentId" : "da21b991-384e-4498-bd91-7216e5c5c1d2",
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "I did so first, but the added tests below failed;\r\n```\r\n     val keyStr = ctx.quotedConfigKey().getText\r\n     if (ctx.value != null) {\r\n-      SetCommand(Some(keyStr -> Option(remainder(ctx.EQ().getSymbol).trim)))\r\n+      SetCommand(Some(keyStr -> Option(ctx.value.getText)))\r\n     } else {\r\n       SetCommand(Some(keyStr -> None))\r\n     }\r\n\r\n// The failed tests\r\nassertEqual(\"SET `spark.sql.    key`=  -1\",\r\n  SetCommand(Some(\"spark.sql.    key\" -> Some(\"-1\"))))\r\n[info] - Report Error for invalid usage of SET command *** FAILED *** (104 milliseconds)\r\n[info]   == FAIL: Plans do not match ===\r\n[info]   !SetCommand (spark.sql.    key,Some(1))   SetCommand (spark.sql.    key,Some(-1)) (PlanTest.scala:157)\r\n...\r\n\r\nassertEqual(\"SET `spark.sql.    key`= v  a lu e \",\r\n  SetCommand(Some(\"spark.sql.    key\" -> Some(\"v  a lu e\"))))\r\n[info] - Report Error for invalid usage of SET command *** FAILED *** (121 milliseconds)\r\n[info]   == FAIL: Plans do not match ===\r\n[info]   !SetCommand (spark.sql.    key,Some(e))   SetCommand (spark.sql.    key,Some(v  a lu e)) (PlanTest.scala:157)\r\n[info]   org.scalatest.exceptions.TestFailedException:\r\n...\r\n```\r\nSo, I selected the current one to avoid the test failures. Do you know something about this behaivour?",
        "createdAt" : "2020-08-03T06:50:10Z",
        "updatedAt" : "2020-08-03T10:05:19Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "052c5ceb-20ba-488c-a8ea-dbc075edb323",
        "parentId" : "da21b991-384e-4498-bd91-7216e5c5c1d2",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "-      SetCommand(Some(keyStr -> Option(remainder(ctx.EQ().getSymbol).trim)))\r\n+      SetCommand(Some(keyStr -> Option(ctx.value.getText)))\r\n\r\none has trim but one doesn't. How about `ctx.value.getText.trim`?",
        "createdAt" : "2020-08-03T06:59:38Z",
        "updatedAt" : "2020-08-03T10:05:19Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "13540b25-7fca-4d5c-a019-0b986aff30ec",
        "parentId" : "da21b991-384e-4498-bd91-7216e5c5c1d2",
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "I added `.trim` and checked that the same tests failed. To tell the truth, I'm not sure about why the rule `(EQ value=.*)` parses `v  a lu e` into `e` (Probably, this is the effect of the hidden channel?);\r\n```\r\n[info]   !SetCommand (spark.sql.    key,Some(e))   SetCommand (spark.sql.    key,Some(v  a lu e)) (PlanTest.scala:157)\r\n```",
        "createdAt" : "2020-08-03T07:39:10Z",
        "updatedAt" : "2020-08-03T10:05:19Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "2a4a3cec-8eb5-4dcb-9bf6-01769595105a",
        "parentId" : "da21b991-384e-4498-bd91-7216e5c5c1d2",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "ah, seems we should use `(value+=.)*`",
        "createdAt" : "2020-08-03T07:46:48Z",
        "updatedAt" : "2020-08-03T10:05:19Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      }
    ],
    "commit" : "3065ed9aa5ce232ce4f16335cbf830bd93a73f3f",
    "line" : 42,
    "diffHunk" : "@@ -1,1 +89,93 @@    val keyStr = ctx.configKey().getText\n    if (ctx.EQ() != null) {\n      SetCommand(Some(keyStr -> Option(remainder(ctx.EQ().getSymbol).trim)))\n    } else {\n      SetCommand(Some(keyStr -> None))"
  }
]