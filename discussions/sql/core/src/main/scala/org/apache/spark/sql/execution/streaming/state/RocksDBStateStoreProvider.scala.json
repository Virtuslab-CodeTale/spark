[
  {
    "id" : "35252deb-8d1a-4547-96a5-2c51f28bedea",
    "prId" : 33455,
    "prUrl" : "https://github.com/apache/spark/pull/33455#pullrequestreview-717095098",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fdb7e5ee-8460-44b0-a5a1-fe4aaee6bcff",
        "parentId" : null,
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "Is it `nativeOpsHistograms` here?",
        "createdAt" : "2021-07-21T08:27:43Z",
        "updatedAt" : "2021-07-21T08:27:43Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      },
      {
        "id" : "805bd478-dbdc-4da8-bddd-eb7f2f48fbcb",
        "parentId" : "fdb7e5ee-8460-44b0-a5a1-fe4aaee6bcff",
        "authorId" : "56016911-ce1a-4799-a941-6dac717edd44",
        "body" : "its actually `nativeOpsMetrics` (the ticker based metrics)",
        "createdAt" : "2021-07-21T14:33:01Z",
        "updatedAt" : "2021-07-21T14:45:16Z",
        "lastEditedBy" : "56016911-ce1a-4799-a941-6dac717edd44",
        "tags" : [
        ]
      },
      {
        "id" : "e3e46537-85eb-4d47-8087-b246987d0f75",
        "parentId" : "fdb7e5ee-8460-44b0-a5a1-fe4aaee6bcff",
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "Hm, `nativeOpsMetrics` looks like counting metrics, why this is `nativeOpsLatencyMillis` which is a timing metrics?",
        "createdAt" : "2021-07-28T08:24:36Z",
        "updatedAt" : "2021-07-28T08:24:37Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      },
      {
        "id" : "d086e8d4-0295-4176-ab34-3f6f256bc076",
        "parentId" : "fdb7e5ee-8460-44b0-a5a1-fe4aaee6bcff",
        "authorId" : "56016911-ce1a-4799-a941-6dac717edd44",
        "body" : "The ticker based metrics are not just `counts` of some operations, they also capture the time. Example one is [here](https://javadoc.io/static/org.rocksdb/rocksdbjni/6.4.6/org/rocksdb/TickerType.html#STALL_MICROS). This is just a utility method to extract the time out of these ticker based metrics.",
        "createdAt" : "2021-07-28T14:41:32Z",
        "updatedAt" : "2021-07-28T14:43:21Z",
        "lastEditedBy" : "56016911-ce1a-4799-a941-6dac717edd44",
        "tags" : [
        ]
      }
    ],
    "commit" : "3a6c42b5ca95afc8e573c2e06b03282a420d23c5",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +108,112 @@      def commitLatencyMs(typ: String): Long = rocksDBMetrics.lastCommitLatencyMs.getOrElse(typ, 0L)\n      def nativeOpsLatencyMillis(typ: String): Long = {\n        rocksDBMetrics.nativeOpsMetrics.get(typ).map(_ * 1000).getOrElse(0)\n      }\n      def sumNativeOpsLatencyMillis(typ: String): Long = {"
  },
  {
    "id" : "d7d801a0-f2a6-4d28-a982-012c925d9628",
    "prId" : 33455,
    "prUrl" : "https://github.com/apache/spark/pull/33455#pullrequestreview-711398356",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fd3c4d01-5ff3-4870-a894-516fe19cea44",
        "parentId" : null,
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "Good catch.",
        "createdAt" : "2021-07-21T08:34:54Z",
        "updatedAt" : "2021-07-21T08:34:55Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      }
    ],
    "commit" : "3a6c42b5ca95afc8e573c2e06b03282a420d23c5",
    "line" : 85,
    "diffHunk" : "@@ -1,1 +260,264 @@  val CUSTOM_METRIC_FILESYNC_TIME = StateStoreCustomTimingMetric(\n    \"rocksdbCommitFileSyncLatencyMs\", \"RocksDB: commit - file sync to external storage time\")\n  val CUSTOM_METRIC_FILES_COPIED = StateStoreCustomSumMetric(\n    \"rocksdbFilesCopied\", \"RocksDB: file manager - files copied\")\n  val CUSTOM_METRIC_BYTES_COPIED = StateStoreCustomSizeMetric("
  },
  {
    "id" : "07828635-4a8f-4b03-ace8-65e3f193bba3",
    "prId" : 33455,
    "prUrl" : "https://github.com/apache/spark/pull/33455#pullrequestreview-717222083",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "168893a7-b703-49bd-84da-68b3c96fe2e2",
        "parentId" : null,
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "`nativeOpsCount` looks like more for `nativeOpsMetrics`?",
        "createdAt" : "2021-07-28T08:25:41Z",
        "updatedAt" : "2021-07-28T08:25:41Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      },
      {
        "id" : "093ec27d-0633-47d8-95e4-0c2df48453b3",
        "parentId" : "168893a7-b703-49bd-84da-68b3c96fe2e2",
        "authorId" : "56016911-ce1a-4799-a941-6dac717edd44",
        "body" : "`nativeOpsCount` is extracting the `count` from histogram based metrics. `nativeOpsMetrics` is extracting the value from ticker based metrics.",
        "createdAt" : "2021-07-28T14:43:04Z",
        "updatedAt" : "2021-07-28T14:43:21Z",
        "lastEditedBy" : "56016911-ce1a-4799-a941-6dac717edd44",
        "tags" : [
        ]
      },
      {
        "id" : "6e23a244-1355-4ea3-9458-9ee45e1adab3",
        "parentId" : "168893a7-b703-49bd-84da-68b3c96fe2e2",
        "authorId" : "56016911-ce1a-4799-a941-6dac717edd44",
        "body" : "`nativeOpsCount` is extracting the `count` from histogram based metrics. `nativeOpsMetrics` is extracting the value from ticker based metrics.",
        "createdAt" : "2021-07-28T14:43:15Z",
        "updatedAt" : "2021-07-28T14:43:21Z",
        "lastEditedBy" : "56016911-ce1a-4799-a941-6dac717edd44",
        "tags" : [
        ]
      },
      {
        "id" : "010b8ef2-1dc0-4955-97c9-575db11e8132",
        "parentId" : "168893a7-b703-49bd-84da-68b3c96fe2e2",
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "Oh, I see. Thanks for clarifying it.",
        "createdAt" : "2021-07-28T16:28:01Z",
        "updatedAt" : "2021-07-28T16:28:01Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      }
    ],
    "commit" : "3a6c42b5ca95afc8e573c2e06b03282a420d23c5",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +115,119 @@      def nativeOpsCount(typ: String): Long = {\n        rocksDBMetrics.nativeOpsHistograms.get(typ).map(_.count).getOrElse(0)\n      }\n      def nativeOpsMetrics(typ: String): Long = {\n        rocksDBMetrics.nativeOpsMetrics.get(typ).getOrElse(0)"
  }
]