[
  {
    "id" : "14290f23-0adc-4e4f-ba85-a5b217f8e0ab",
    "prId" : 28841,
    "prUrl" : "https://github.com/apache/spark/pull/28841#pullrequestreview-442116474",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4e4da2de-ffe0-4dc8-b09f-2d5c9267579f",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "`f` here is `FileStatus`. It looks inefficient to get the `FileStatus` again in https://github.com/apache/spark/pull/28841/files#diff-3c816e65d0bbdf16d46c7ea4e0b8cbaeR55",
        "createdAt" : "2020-07-02T13:29:15Z",
        "updatedAt" : "2020-11-05T10:34:15Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "5ed43420-cd30-41b4-827b-35af70f06656",
        "parentId" : "4e4da2de-ffe0-4dc8-b09f-2d5c9267579f",
        "authorId" : "e0be6955-58e9-4e7f-8132-27fdb08564c9",
        "body" : "> `f` here is `FileStatus`. It looks inefficient to get the `FileStatus` again in https://github.com/apache/spark/pull/28841/files#diff-3c816e65d0bbdf16d46c7ea4e0b8cbaeR55\r\n\r\nI agree.  I considered this in one of my earlier commits actually.  There are two places where we handle options in the *FileIndex classes, here in _PartitioningAwareFileIndex_ and _InMemoryFileIndex_.  In both places, we derive from the _PathFilter_ class which exposes an overridable method called _accept_ which takes _Path_ as its only parameter.  \r\n\r\nI could break with the abstraction and overload the method so that it would take a FileStatus directly.  I'll look into this unless there are any objections.",
        "createdAt" : "2020-07-02T20:07:19Z",
        "updatedAt" : "2020-11-05T10:34:15Z",
        "lastEditedBy" : "e0be6955-58e9-4e7f-8132-27fdb08564c9",
        "tags" : [
        ]
      },
      {
        "id" : "907f39a8-25cd-40ae-a4ef-82a931555742",
        "parentId" : "4e4da2de-ffe0-4dc8-b09f-2d5c9267579f",
        "authorId" : "e0be6955-58e9-4e7f-8132-27fdb08564c9",
        "body" : "I can put a wrapper around this to make the behavior more efficient.",
        "createdAt" : "2020-07-02T20:11:37Z",
        "updatedAt" : "2020-11-05T10:34:15Z",
        "lastEditedBy" : "e0be6955-58e9-4e7f-8132-27fdb08564c9",
        "tags" : [
        ]
      },
      {
        "id" : "09a4b7e6-40e8-4f76-b563-25479ce7af47",
        "parentId" : "4e4da2de-ffe0-4dc8-b09f-2d5c9267579f",
        "authorId" : "e0be6955-58e9-4e7f-8132-27fdb08564c9",
        "body" : "@cloud-fan This has been resolved.",
        "createdAt" : "2020-07-03T02:48:27Z",
        "updatedAt" : "2020-11-05T10:34:15Z",
        "lastEditedBy" : "e0be6955-58e9-4e7f-8132-27fdb08564c9",
        "tags" : [
        ]
      }
    ],
    "commit" : "bf2a66535c634ec68d667f3435a22220f38d29b5",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +84,88 @@            case Some(existingDir) =>\n              // Directory has children files in it, return them\n              existingDir.filter(f => matchPathPattern(f) && isNonEmptyFile(f))\n\n            case None =>"
  }
]