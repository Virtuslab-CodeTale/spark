[
  {
    "id" : "eacbaedd-d0c7-47d2-bad4-c9e789b01d58",
    "prId" : 33370,
    "prUrl" : "https://github.com/apache/spark/pull/33370#pullrequestreview-708130933",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0fc3caa9-33bf-4db7-b2e0-35b9770e37b0",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "You made this class for testing? Instead of creating an unnecessary class hierarchy, how about just creating an inner method for testing like this?\r\n```\r\n\r\n  // For testing\r\n  private[jdbc] def doCreate(\r\n    driver: Driver,\r\n    providers: Seq[JdbcConnectionProvider],\r\n    options: Map[String, String]): Connection = {\r\n    \r\n    ...\r\n  }\r\n\r\n  def create(driver: Driver, options: Map[String, String]): Connection = {\r\n    doCreate(driver, providers, options)\r\n  }\r\n```",
        "createdAt" : "2021-07-16T01:33:56Z",
        "updatedAt" : "2021-07-16T01:44:02Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "e1ab2d52-9c62-4ddc-a04c-ff715b1a6787",
        "parentId" : "0fc3caa9-33bf-4db7-b2e0-35b9770e37b0",
        "authorId" : "a8db2e87-20cc-46d2-a9f0-b5142f4fe30a",
        "body" : "I thought about it. The reason I decided to go with a separate class is ability to add new methods that rely on providers list and testing of such methods fully. My concern was adding a custom logic in `create()` method which would not be tested by `doCreate()`. Also this should mitigate a potential confusion how providers list is used in the class.",
        "createdAt" : "2021-07-16T08:27:50Z",
        "updatedAt" : "2021-07-16T16:54:42Z",
        "lastEditedBy" : "a8db2e87-20cc-46d2-a9f0-b5142f4fe30a",
        "tags" : [
        ]
      }
    ],
    "commit" : "e94cf0cc507fe31f26651587a257a36db16763fc",
    "line" : 69,
    "diffHunk" : "@@ -1,1 +101,105 @@}\n\nprivate[jdbc] object ConnectionProvider extends ConnectionProviderBase"
  }
]