[
  {
    "id" : "82971bbd-cc79-4280-98ce-e62f23fff2f0",
    "prId" : 28953,
    "prUrl" : "https://github.com/apache/spark/pull/28953#pullrequestreview-445525787",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "52795630-b0bf-4e08-8e39-1cb9a401dc26",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "The code looks weird. What's the case you're worried about here?",
        "createdAt" : "2020-07-08T07:25:53Z",
        "updatedAt" : "2020-08-20T07:17:28Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "09791604-9db2-48c4-93a2-6ee59e7856c9",
        "parentId" : "52795630-b0bf-4e08-8e39-1cb9a401dc26",
        "authorId" : "8c4501b6-dbfc-491f-80a5-f615a2311f95",
        "body" : "As I added the comments, it is for preventing duplicate execution of `preActions` in write path.\r\nThere are two methods around here.\r\na) `createRelation(SQLContext, SaveMode, Map[String, String], DataFrame)`\r\nb) `createRelation(SQLContext, Map[String, String])`\r\n\r\n(a) is called only for writes, but (b) is called for both reads and writes\r\nTo avoid duplicate execution of preActions in writes, we need to remove preActions parameter here before passing it to (b)",
        "createdAt" : "2020-07-09T11:25:16Z",
        "updatedAt" : "2020-08-20T07:17:28Z",
        "lastEditedBy" : "8c4501b6-dbfc-491f-80a5-f615a2311f95",
        "tags" : [
        ]
      },
      {
        "id" : "36d3e52e-71cd-4e77-94aa-097eec06d0b6",
        "parentId" : "52795630-b0bf-4e08-8e39-1cb9a401dc26",
        "authorId" : "8c4501b6-dbfc-491f-80a5-f615a2311f95",
        "body" : "\r\n\r\nAs I added the comments, it is for preventing duplicate execution of preActions in write path.\r\nThere are two methods around here.\r\na) `createRelation(SQLContext, SaveMode, Map[String, String], DataFrame)`\r\nb) `createRelation(SQLContext, Map[String, String])`\r\n\r\n(a) is called only for writes, but (b) is called for both reads and writes\r\nTo avoid duplicate execution of preActions in writes, we need to remove preActions parameter here before passing it to (b)\r\n",
        "createdAt" : "2020-07-09T11:26:03Z",
        "updatedAt" : "2020-08-20T07:17:28Z",
        "lastEditedBy" : "8c4501b6-dbfc-491f-80a5-f615a2311f95",
        "tags" : [
        ]
      }
    ],
    "commit" : "3244c301914219abc8721ab23c224ca99f64fbbd",
    "line" : 36,
    "diffHunk" : "@@ -1,1 +72,76 @@          // To avoid duplicate execution of preActions in writes,\n          // we need to remove preActions parameter here before passing it to (b)\n          parametersWithoutPreActions = parameters.-(JDBCOptions.JDBC_PRE_ACTIONS_STRING)\n        case None =>\n      }"
  }
]