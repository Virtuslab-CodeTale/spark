[
  {
    "id" : "3edfcc5f-c4ea-4f8b-8ea8-7d2cd3d591da",
    "prId" : 31804,
    "prUrl" : "https://github.com/apache/spark/pull/31804#pullrequestreview-609400754",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "def2e6d2-9bdf-4906-8dfa-42e66d87cce1",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Well, this seems inconsistent with the doc. The current document means `spark.sql.legacy.keepCommandOutputSchema` means the 3.1 or earlier schema, doesn't it?",
        "createdAt" : "2021-03-11T04:54:58Z",
        "updatedAt" : "2021-03-30T07:59:14Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "f2effd52-42c9-4558-91f4-996e3f34bf80",
        "parentId" : "def2e6d2-9bdf-4906-8dfa-42e66d87cce1",
        "authorId" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "body" : " Introducing a new `legacy` conf for this behavior change seems kind of trivial and might bring cognition burdens for users. So the config is reused for now and the doc will be updated if it is the right way to go ",
        "createdAt" : "2021-03-11T05:02:45Z",
        "updatedAt" : "2021-03-30T07:59:14Z",
        "lastEditedBy" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "tags" : [
        ]
      },
      {
        "id" : "0e4c31ef-0b20-4426-882d-48e9ebd2760a",
        "parentId" : "def2e6d2-9bdf-4906-8dfa-42e66d87cce1",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "This is not reused technically. If we reuse the existing conf, this should be `output.length == 4` because it disable this PR and the previous commit simultaneously.\r\n> So the config is reused for now ",
        "createdAt" : "2021-03-11T05:06:57Z",
        "updatedAt" : "2021-03-30T07:59:14Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "b898ded2-5da5-414c-a6e8-8eb73d51e8ff",
        "parentId" : "def2e6d2-9bdf-4906-8dfa-42e66d87cce1",
        "authorId" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "body" : "> this should be output.length == 4\r\n\r\nindeed, this is true.  `output.head.withName(\"database\") +: output.slice(1, 4)` will cut the `isView` off",
        "createdAt" : "2021-03-11T05:15:30Z",
        "updatedAt" : "2021-03-30T07:59:14Z",
        "lastEditedBy" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "tags" : [
        ]
      }
    ],
    "commit" : "3ef5b5f414b68ea149877eaa26618e9787252004",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +367,371 @@        output) =>\n      val newOutput = if (conf.getConf(SQLConf.LEGACY_KEEP_COMMAND_OUTPUT_SCHEMA)) {\n        assert(output.length == 5)\n        ShowTableExtended.getLegacyOutputAttrs\n      } else {"
  }
]