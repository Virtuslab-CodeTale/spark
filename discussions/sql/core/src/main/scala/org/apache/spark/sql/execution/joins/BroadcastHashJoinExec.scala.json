[
  {
    "id" : "152efbd1-2199-4074-ad2a-f03648448d62",
    "prId" : 31477,
    "prUrl" : "https://github.com/apache/spark/pull/31477#pullrequestreview-612321053",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4df9d0da-d85f-41d6-9931-c6bed6775736",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "This seems like a \"progress bar\" instead of a metrics. Most likely people don't care about it because it's usually `num output rows of left` * `num output rows of right`.\r\n\r\nHave we measured the perf overhead?",
        "createdAt" : "2021-03-02T15:41:02Z",
        "updatedAt" : "2021-03-15T15:03:56Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "81bbcf9e-5dd8-4926-b8d1-3f8f1a8d3b49",
        "parentId" : "4df9d0da-d85f-41d6-9931-c6bed6775736",
        "authorId" : "cdcefa9a-1880-4b7a-ae6a-ece33e944188",
        "body" : "I am running the TPC-DS benchmark right now. I will post the results shortly.",
        "createdAt" : "2021-03-02T18:30:32Z",
        "updatedAt" : "2021-03-15T15:03:56Z",
        "lastEditedBy" : "cdcefa9a-1880-4b7a-ae6a-ece33e944188",
        "tags" : [
        ]
      },
      {
        "id" : "6c44e33e-5412-4e5c-8139-35dd9619ef83",
        "parentId" : "4df9d0da-d85f-41d6-9931-c6bed6775736",
        "authorId" : "cdcefa9a-1880-4b7a-ae6a-ece33e944188",
        "body" : "I ran the benchmark and I see a clear performance degradation for query-16 and query-94. All the other queries seem to be fine. I will debug why there is a performance degradation for  query-16 & query-94. https://docs.google.com/document/d/16_cjk3g3_7mMH2C_T9bsFroxaH_CihJkXINYirt-mtg/edit?usp=sharing \r\ncc: @cloud-fan ",
        "createdAt" : "2021-03-02T23:05:40Z",
        "updatedAt" : "2021-03-15T15:03:56Z",
        "lastEditedBy" : "cdcefa9a-1880-4b7a-ae6a-ece33e944188",
        "tags" : [
        ]
      },
      {
        "id" : "b59f6838-3e2c-4136-a51c-94c5a6a44c8e",
        "parentId" : "4df9d0da-d85f-41d6-9931-c6bed6775736",
        "authorId" : "cdcefa9a-1880-4b7a-ae6a-ece33e944188",
        "body" : "Update: I figured out why the perf degradation is occurring for query-16 & query-94 and fixed it. I ran the benchmark for a couple of iterations and looks like my fix is working. I am running the benchmark with 25 iterations to identify if any other query has been effected.",
        "createdAt" : "2021-03-05T14:52:09Z",
        "updatedAt" : "2021-03-15T15:03:56Z",
        "lastEditedBy" : "cdcefa9a-1880-4b7a-ae6a-ece33e944188",
        "tags" : [
        ]
      },
      {
        "id" : "3110f925-5266-4902-abea-9c26cf6915bc",
        "parentId" : "4df9d0da-d85f-41d6-9931-c6bed6775736",
        "authorId" : "cdcefa9a-1880-4b7a-ae6a-ece33e944188",
        "body" : "Update: In my most recent commit I fixed a perf issue that is causing a significant degradation for query-16 & quer-94. However there still seems to be some perf degradation that I cannot fix. Maybe it is because adding the new metric itself or maybe there is something wrong with the way that I am running the tests. I will run the benchmark again on a bare metal machine and see if it makes any difference. I will also see if there is anything else that can be done to improve the performance. My most recent runs are shared in this doc. https://docs.google.com/spreadsheets/d/1A0jCx5BL0wcN28oDQDOs73QhVZ71uNbKDg9Q8S0IE6g/edit?usp=sharing",
        "createdAt" : "2021-03-15T15:21:56Z",
        "updatedAt" : "2021-03-15T15:21:57Z",
        "lastEditedBy" : "cdcefa9a-1880-4b7a-ae6a-ece33e944188",
        "tags" : [
        ]
      }
    ],
    "commit" : "4c35275fa7c670cd18c16548f36cd6184ec155ff",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +59,63 @@  override lazy val metrics = Map(\n    \"numOutputRows\" -> SQLMetrics.createMetric(sparkContext, \"number of output rows\"),\n    \"numMatchedRows\" -> SQLMetrics.createMetric(sparkContext, \"number of matched rows\"))\n\n  override def requiredChildDistribution: Seq[Distribution] = {"
  }
]