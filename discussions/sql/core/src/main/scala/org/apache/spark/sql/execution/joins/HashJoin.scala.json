[
  {
    "id" : "05acd9d5-39c5-41f5-9198-51f46ffe1fb7",
    "prId" : 31792,
    "prUrl" : "https://github.com/apache/spark/pull/31792#pullrequestreview-608324027",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "35d2df8e-fb14-44b2-b449-ce559c526e13",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "can we leave a comment here to give a reference to the actual implementation so that people understand why the order is different?",
        "createdAt" : "2021-03-10T04:30:02Z",
        "updatedAt" : "2021-03-10T04:37:41Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "204b3304-ca29-4f6a-b54b-b360e6f26566",
        "parentId" : "35d2df8e-fb14-44b2-b449-ce559c526e13",
        "authorId" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "body" : "@cloud-fan - makes sense, added comment.",
        "createdAt" : "2021-03-10T04:38:02Z",
        "updatedAt" : "2021-03-10T04:38:02Z",
        "lastEditedBy" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "tags" : [
        ]
      }
    ],
    "commit" : "dbddbd710a4fa206e9c98a59ad71330c40b0193a",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +138,142 @@\n  @transient protected[this] lazy val boundCondition = if (condition.isDefined) {\n    if (joinType == FullOuter && buildSide == BuildLeft) {\n      // Put join left side before right side. This is to be consistent with\n      // `ShuffledHashJoinExec.fullOuterJoin`."
  },
  {
    "id" : "6b261ecc-85de-4b2a-83e6-5cb9460a6793",
    "prId" : 31792,
    "prUrl" : "https://github.com/apache/spark/pull/31792#pullrequestreview-610378808",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f32b5ecd-7733-4ed3-8944-10d924f34bed",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "Nice catch!",
        "createdAt" : "2021-03-12T01:25:53Z",
        "updatedAt" : "2021-03-12T01:25:54Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      }
    ],
    "commit" : "dbddbd710a4fa206e9c98a59ad71330c40b0193a",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +141,145 @@      // Put join left side before right side. This is to be consistent with\n      // `ShuffledHashJoinExec.fullOuterJoin`.\n      Predicate.create(condition.get, buildPlan.output ++ streamedPlan.output).eval _\n    } else {\n      Predicate.create(condition.get, streamedPlan.output ++ buildPlan.output).eval _"
  },
  {
    "id" : "142f51f1-dff5-40b6-a7e5-bb7c5ae502a2",
    "prId" : 29555,
    "prUrl" : "https://github.com/apache/spark/pull/29555#pullrequestreview-476957580",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2971f423-9e10-437d-a708-2bde06fe3353",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "`zip` allows different length, we should check it explicitly.",
        "createdAt" : "2020-08-27T17:51:12Z",
        "updatedAt" : "2020-08-27T18:26:49Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "af20e322-a1fc-4bea-a3c0-37743584bf19",
        "parentId" : "2971f423-9e10-437d-a708-2bde06fe3353",
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "ok",
        "createdAt" : "2020-08-27T17:59:26Z",
        "updatedAt" : "2020-08-27T18:26:49Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      }
    ],
    "commit" : "cc832fe5b8538181a61507a1fb7626dd546ee03a",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +109,113 @@    require(leftKeys.length == rightKeys.length &&\n      leftKeys.map(_.dataType)\n        .zip(rightKeys.map(_.dataType))\n        .forall(types => types._1.sameType(types._2)),\n      \"Join keys from two sides should have same length and types\")"
  },
  {
    "id" : "04877aa6-a8bb-4404-b79a-7d7bbc78baab",
    "prId" : 29277,
    "prUrl" : "https://github.com/apache/spark/pull/29277#pullrequestreview-457193373",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "97dc9297-820b-4ca2-b22b-2d2dee2a9381",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "can you use PR comments to highlight the real changes? Seems most of the diff is just moving code around.",
        "createdAt" : "2020-07-29T04:46:05Z",
        "updatedAt" : "2020-07-30T17:47:17Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "6f0d105b-7191-4170-9ec1-43a49f73e17a",
        "parentId" : "97dc9297-820b-4ca2-b22b-2d2dee2a9381",
        "authorId" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "body" : "@cloud-fan - sorry about that. yes mostly of them is moving code around without change. Highlighted change with comments, thanks.",
        "createdAt" : "2020-07-29T05:07:03Z",
        "updatedAt" : "2020-07-30T17:47:17Z",
        "lastEditedBy" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "tags" : [
        ]
      }
    ],
    "commit" : "ac64864363891c4c942d374f227c01bd60254fce",
    "line" : 24,
    "diffHunk" : "@@ -1,1 +319,323 @@    }\n  }\n\n  override def doProduce(ctx: CodegenContext): String = {\n    streamedPlan.asInstanceOf[CodegenSupport].produce(ctx, this)"
  },
  {
    "id" : "447a5966-8152-4665-96d2-3f33d32b21f9",
    "prId" : 29277,
    "prUrl" : "https://github.com/apache/spark/pull/29277#pullrequestreview-457193373",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d9ac03be-1d51-4a82-aa00-8710795d0370",
        "parentId" : null,
        "authorId" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "body" : "this method is copied from `BroadcastHashJoinExec` without change.",
        "createdAt" : "2020-07-29T05:00:04Z",
        "updatedAt" : "2020-07-30T17:47:17Z",
        "lastEditedBy" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "tags" : [
        ]
      }
    ],
    "commit" : "ac64864363891c4c942d374f227c01bd60254fce",
    "line" : 46,
    "diffHunk" : "@@ -1,1 +341,345 @@   * has any null in it or not.\n   */\n  protected def genStreamSideJoinKey(\n      ctx: CodegenContext,\n      input: Seq[ExprCode]): (ExprCode, String) = {"
  },
  {
    "id" : "238e03d6-864a-42d0-a0f2-38689f659396",
    "prId" : 29277,
    "prUrl" : "https://github.com/apache/spark/pull/29277#pullrequestreview-457193373",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "638e574b-8462-4f84-acab-1c2cad619fca",
        "parentId" : null,
        "authorId" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "body" : "this method is copied from `BroadcastHashJoinExec` without change.",
        "createdAt" : "2020-07-29T05:00:15Z",
        "updatedAt" : "2020-07-30T17:47:17Z",
        "lastEditedBy" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "tags" : [
        ]
      }
    ],
    "commit" : "ac64864363891c4c942d374f227c01bd60254fce",
    "line" : 64,
    "diffHunk" : "@@ -1,1 +359,363 @@   * Generates the code for variable of build side.\n   */\n  private def genBuildSideVars(ctx: CodegenContext, matched: String): Seq[ExprCode] = {\n    ctx.currentVars = null\n    ctx.INPUT_ROW = matched"
  },
  {
    "id" : "e2125bc6-6b71-43ec-8795-f3a9bce6f4d3",
    "prId" : 29277,
    "prUrl" : "https://github.com/apache/spark/pull/29277#pullrequestreview-457193373",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "041350f1-44d3-4a60-8c47-52e0e416f881",
        "parentId" : null,
        "authorId" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "body" : "this method is copied from `BroadcastHashJoinExec` without change.",
        "createdAt" : "2020-07-29T05:00:28Z",
        "updatedAt" : "2020-07-30T17:47:17Z",
        "lastEditedBy" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "tags" : [
        ]
      }
    ],
    "commit" : "ac64864363891c4c942d374f227c01bd60254fce",
    "line" : 94,
    "diffHunk" : "@@ -1,1 +389,393 @@   * and Left Anti joins.\n   */\n  protected def getJoinCondition(\n      ctx: CodegenContext,\n      input: Seq[ExprCode]): (String, String, Seq[ExprCode]) = {"
  },
  {
    "id" : "577cf184-7c5d-46d9-a051-611bc377b94e",
    "prId" : 29277,
    "prUrl" : "https://github.com/apache/spark/pull/29277#pullrequestreview-457193373",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ca809691-b7cd-4fd4-ab8d-9726387f14f7",
        "parentId" : null,
        "authorId" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "body" : "added an abstract method `prepareRelation` which is implemented separately from SHJ and BHJ.",
        "createdAt" : "2020-07-29T05:03:03Z",
        "updatedAt" : "2020-07-30T17:47:17Z",
        "lastEditedBy" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "tags" : [
        ]
      }
    ],
    "commit" : "ac64864363891c4c942d374f227c01bd60254fce",
    "line" : 426,
    "diffHunk" : "@@ -1,1 +721,725 @@   * known to be unique in code-gen time.\n   */\n  protected def prepareRelation(ctx: CodegenContext): (String, Boolean)\n}\n"
  },
  {
    "id" : "53459ab7-4fab-4e05-911e-0943b9aa6283",
    "prId" : 29216,
    "prUrl" : "https://github.com/apache/spark/pull/29216#pullrequestreview-455221173",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0ecc8f8b-f182-4613-8941-81ba47817b44",
        "parentId" : null,
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "Do we already have test for inner join?",
        "createdAt" : "2020-07-24T22:12:03Z",
        "updatedAt" : "2020-07-24T22:12:03Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      },
      {
        "id" : "1177ca77-e055-4710-84cc-5cc60ee72a4d",
        "parentId" : "0ecc8f8b-f182-4613-8941-81ba47817b44",
        "authorId" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "body" : "@viirya - yes, [Existing joinSuite already covered inner join](https://github.com/apache/spark/blob/master/sql/core/src/test/scala/org/apache/spark/sql/JoinSuite.scala#L182).",
        "createdAt" : "2020-07-24T22:43:54Z",
        "updatedAt" : "2020-07-24T22:43:54Z",
        "lastEditedBy" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "tags" : [
        ]
      }
    ],
    "commit" : "09d5a0dbb7e2406011dfadd2c5cc161d5414897c",
    "line" : 11,
    "diffHunk" : "@@ -1,1 +109,113 @@    val joinRow = new JoinedRow\n    val joinKeys = streamSideKeyGenerator()\n\n    if (hashedRelation.keyIsUnique) {\n      streamIter.flatMap { srow =>"
  },
  {
    "id" : "e4fe920d-de1c-4059-8e98-c5de2b8e73d4",
    "prId" : 29216,
    "prUrl" : "https://github.com/apache/spark/pull/29216#pullrequestreview-455238445",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "348e3bbe-6059-4b31-9c33-8ecc18afecd0",
        "parentId" : null,
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "And test for existenceJoin?",
        "createdAt" : "2020-07-24T22:13:21Z",
        "updatedAt" : "2020-07-24T22:13:22Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      },
      {
        "id" : "2cfdd357-c105-4c9d-8cb2-ffd520882030",
        "parentId" : "348e3bbe-6059-4b31-9c33-8ecc18afecd0",
        "authorId" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "body" : "@viirya - existence join is tricky and I will try to add one. But besides testing, wondering what do you think of this PR? Thanks.",
        "createdAt" : "2020-07-24T22:44:42Z",
        "updatedAt" : "2020-07-24T22:44:43Z",
        "lastEditedBy" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "tags" : [
        ]
      },
      {
        "id" : "8cf1df7e-9f34-4bdd-9647-29917abd48c7",
        "parentId" : "348e3bbe-6059-4b31-9c33-8ecc18afecd0",
        "authorId" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "body" : "@viirya - I just found [`test single unique condition (equal) for left Anti join`](https://github.com/apache/spark/blob/master/sql/core/src/test/scala/org/apache/spark/sql/execution/joins/ExistenceJoinSuite.scala#L228) in `ExistenceJoinSuite` already covered [existence join](https://github.com/apache/spark/blob/master/sql/core/src/test/scala/org/apache/spark/sql/execution/joins/ExistenceJoinSuite.scala#L95-L104). So we should be good with existence join. More historical context for existence join is [this PR](https://github.com/apache/spark/pull/12820) just FYI.",
        "createdAt" : "2020-07-24T23:58:14Z",
        "updatedAt" : "2020-07-24T23:58:14Z",
        "lastEditedBy" : "8df147d9-bc9d-4fd9-bb98-5dcf9619220b",
        "tags" : [
        ]
      }
    ],
    "commit" : "09d5a0dbb7e2406011dfadd2c5cc161d5414897c",
    "line" : 142,
    "diffHunk" : "@@ -1,1 +209,213 @@    val result = new GenericInternalRow(Array[Any](null))\n    val joinedRow = new JoinedRow\n\n    if (hashedRelation.keyIsUnique) {\n      streamIter.map { current =>"
  },
  {
    "id" : "3abd5ae4-ab31-4b5f-a127-25c1072379b8",
    "prId" : 27108,
    "prUrl" : "https://github.com/apache/spark/pull/27108#pullrequestreview-339337775",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ea2cea38-7dac-44ea-a5e2-d574def8f2b2",
        "parentId" : null,
        "authorId" : "75554730-8183-463c-bf1d-7cd5b4e9f22b",
        "body" : "@srowen Here we need this line up for better visualization?",
        "createdAt" : "2020-01-07T05:51:26Z",
        "updatedAt" : "2020-01-07T05:51:26Z",
        "lastEditedBy" : "75554730-8183-463c-bf1d-7cd5b4e9f22b",
        "tags" : [
        ]
      },
      {
        "id" : "24a6bd29-307c-4d1a-9f14-5da44502b9d4",
        "parentId" : "ea2cea38-7dac-44ea-a5e2-d574def8f2b2",
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "I don't think the same logic applies, no. I don't think a change is necessary.",
        "createdAt" : "2020-01-07T14:19:23Z",
        "updatedAt" : "2020-01-07T14:19:24Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      },
      {
        "id" : "a501183d-e8a3-436a-9f0e-840b19a0e805",
        "parentId" : "ea2cea38-7dac-44ea-a5e2-d574def8f2b2",
        "authorId" : "75554730-8183-463c-bf1d-7cd5b4e9f22b",
        "body" : "Got it. Thanks @srowen ",
        "createdAt" : "2020-01-07T16:09:13Z",
        "updatedAt" : "2020-01-07T16:09:13Z",
        "lastEditedBy" : "75554730-8183-463c-bf1d-7cd5b4e9f22b",
        "tags" : [
        ]
      }
    ],
    "commit" : "6d4ed3a214fe88a170cdd55fdaf893ed95eb243d",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +52,56 @@       |Left keys      : ${leftKeys}\n       |Right keys     : ${rightKeys}\n       |Join condition : ${joinCondStr}\n     \"\"\".stripMargin\n  }"
  }
]