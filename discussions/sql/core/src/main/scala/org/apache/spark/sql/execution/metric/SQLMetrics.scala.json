[
  {
    "id" : "2ae35048-9e9d-4d94-b88d-d2b447ab8e39",
    "prId" : 32754,
    "prUrl" : "https://github.com/apache/spark/pull/32754#pullrequestreview-675570405",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d4d736cd-ac27-4bf6-b7b7-7ac98be8ebf4",
        "parentId" : null,
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "I guess `10000` is fine. I wonder if it's better to reduce the number to like 128 though. ",
        "createdAt" : "2021-06-03T02:35:54Z",
        "updatedAt" : "2021-06-03T02:35:54Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "6484722d-3efd-43ea-bb51-a2a9e665abb2",
        "parentId" : "d4d736cd-ac27-4bf6-b7b7-7ac98be8ebf4",
        "authorId" : "4da55a4a-8a34-454a-9445-fb8101f62652",
        "body" : "Do you think we wouldn't need to cache more than the top 128 metric names. It does makes sense. Just to be on the safer side, I set it to 10k. I don't think this should consume a lot of memory though. I am fine either way. Let me know your thoughts.",
        "createdAt" : "2021-06-03T17:46:01Z",
        "updatedAt" : "2021-06-03T17:46:01Z",
        "lastEditedBy" : "4da55a4a-8a34-454a-9445-fb8101f62652",
        "tags" : [
        ]
      }
    ],
    "commit" : "2cb9f8a8236d5c8b04cb4f9f50f7110b76276a33",
    "line" : 34,
    "diffHunk" : "@@ -1,1 +97,101 @@\n  private val metricsCache: LoadingCache[String, Option[String]] =\n    CacheBuilder.newBuilder().maximumSize(10000)\n    .build(new CacheLoader[String, Option[String]] {\n      override def load(name: String): Option[String] = {"
  },
  {
    "id" : "71fac13d-c653-4362-9c17-19441bff4075",
    "prId" : 28037,
    "prUrl" : "https://github.com/apache/spark/pull/28037#pullrequestreview-382311872",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "24bf8c26-9e1e-4f8c-be54-c70abda4651e",
        "parentId" : null,
        "authorId" : "3a227965-84e0-47cf-9974-11293764f028",
        "body" : "It's not obvious that this is for the case of driver so can we leave a comment for the readability?",
        "createdAt" : "2020-03-26T18:49:01Z",
        "updatedAt" : "2020-03-27T11:40:50Z",
        "lastEditedBy" : "3a227965-84e0-47cf-9974-11293764f028",
        "tags" : [
        ]
      }
    ],
    "commit" : "5838142ad2bee105af8c2c6b43d5edb45ea288a3",
    "line" : 71,
    "diffHunk" : "@@ -1,1 +182,186 @@      // common for driver-side SQL metrics.\n      if (validValues.length <= 1) {\n        toNumberFormat(validValues.headOption.getOrElse(0))\n      } else {\n        val Seq(min, med, max) = {"
  },
  {
    "id" : "820400e8-0c1d-470d-8c31-c83d57f25503",
    "prId" : 28037,
    "prUrl" : "https://github.com/apache/spark/pull/28037#pullrequestreview-382311872",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "273de51e-3cb7-4a34-8b96-80dcae38f4d6",
        "parentId" : null,
        "authorId" : "3a227965-84e0-47cf-9974-11293764f028",
        "body" : "Same as [here](https://github.com/apache/spark/pull/28037/files#diff-803f475b01acfae1c5c96807c2ea9ddcR182).",
        "createdAt" : "2020-03-26T18:50:34Z",
        "updatedAt" : "2020-03-27T11:40:50Z",
        "lastEditedBy" : "3a227965-84e0-47cf-9974-11293764f028",
        "tags" : [
        ]
      }
    ],
    "commit" : "5838142ad2bee105af8c2c6b43d5edb45ea288a3",
    "line" : 101,
    "diffHunk" : "@@ -1,1 +208,212 @@      // common for driver-side SQL metrics.\n      if (validValues.length <= 1) {\n        strFormat(validValues.headOption.getOrElse(0))\n      } else {\n        val Seq(sum, min, med, max) = {"
  },
  {
    "id" : "1c5428cf-aff8-4744-8369-02758a8fea2f",
    "prId" : 27849,
    "prUrl" : "https://github.com/apache/spark/pull/27849#pullrequestreview-373225941",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "eb96ee66-df8f-466b-85dd-10ae24bb83aa",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "The new indentation looks incorrect at this line?",
        "createdAt" : "2020-03-11T18:44:09Z",
        "updatedAt" : "2020-03-11T18:44:09Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "5903792a-87f7-4e07-9787-5d1a80693214",
        "parentId" : "eb96ee66-df8f-466b-85dd-10ae24bb83aa",
        "authorId" : "171fe41b-96df-4362-a600-2d1f030de577",
        "body" : "I also noted that, thanks.",
        "createdAt" : "2020-03-12T01:25:37Z",
        "updatedAt" : "2020-03-12T01:25:38Z",
        "lastEditedBy" : "171fe41b-96df-4362-a600-2d1f030de577",
        "tags" : [
        ]
      }
    ],
    "commit" : "a41d9c4e710539025b003e2c2f5c672f3ffb715b",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +118,122 @@    // 100GB (100MB, 1GB, 10GB)\n    val acc = new SQLMetric(SIZE_METRIC, -1)\n      acc.register(sc, name = Some(s\"$name total (min, med, ${attachTaskId(\"max\", sc.conf)})\"),\n        countFailedValues = false)\n    acc"
  },
  {
    "id" : "3bf47aee-836f-480d-acf0-37ef66261f50",
    "prId" : 27849,
    "prUrl" : "https://github.com/apache/spark/pull/27849#pullrequestreview-373307342",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0a9f1a67-f859-4ffc-b9c2-1f355c1c1e3c",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "We are attaching `stageId` and `attemptId`, too.",
        "createdAt" : "2020-03-11T18:45:13Z",
        "updatedAt" : "2020-03-11T18:45:13Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "bd926f76-78c9-4fa7-a198-0c530f9d9724",
        "parentId" : "0a9f1a67-f859-4ffc-b9c2-1f355c1c1e3c",
        "authorId" : "171fe41b-96df-4362-a600-2d1f030de577",
        "body" : "Yeah, I know. I'm thinking about a better name, while adding stageId/attemptId makes me feel too long for the method name.",
        "createdAt" : "2020-03-12T01:27:40Z",
        "updatedAt" : "2020-03-12T01:27:40Z",
        "lastEditedBy" : "171fe41b-96df-4362-a600-2d1f030de577",
        "tags" : [
        ]
      },
      {
        "id" : "ba6443bc-8420-4fcb-9cf9-3eb8ce6a659f",
        "parentId" : "0a9f1a67-f859-4ffc-b9c2-1f355c1c1e3c",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "`attachTaskInfo`? stage id is part of the task info which tells which stage the task comes from.",
        "createdAt" : "2020-03-12T06:37:53Z",
        "updatedAt" : "2020-03-12T06:37:53Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      }
    ],
    "commit" : "a41d9c4e710539025b003e2c2f5c672f3ffb715b",
    "line" : 90,
    "diffHunk" : "@@ -1,1 +230,234 @@  }\n\n  private def attachTaskId(name: String, conf: SparkConf): String = {\n    val display = conf.get(StaticSQLConf.DISPLAY_TASK_ID_FOR_MAX_METRIC)\n    if (display) {"
  },
  {
    "id" : "17816df6-b8f2-461d-9979-220485d2d345",
    "prId" : 24666,
    "prUrl" : "https://github.com/apache/spark/pull/24666#pullrequestreview-243117601",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d3b0e6d0-b8c1-41ac-9410-0c3ab4e4e315",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "we should handle stats in `stringValue`, different metrics may need to look at different stats and display different things.",
        "createdAt" : "2019-05-29T08:44:54Z",
        "updatedAt" : "2019-05-29T08:44:54Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "f7a02012-6f31-4b2b-9c2f-0c0101ab1318",
        "parentId" : "d3b0e6d0-b8c1-41ac-9410-0c3ab4e4e315",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "one example: we can also display the difference between real row count and estimated row count, e.g. `10X`, `0.01X`, etc. Something like `row count: 4, est: 40 (10X)`",
        "createdAt" : "2019-05-29T08:46:15Z",
        "updatedAt" : "2019-05-29T08:47:09Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      }
    ],
    "commit" : "aae3653e4dab751ae5bff7e3ef26ac63d4f4cc4f",
    "line" : 34,
    "diffHunk" : "@@ -1,1 +195,199 @@  }\n\n  def stringStats(value: Long): String = {\n    if (value < 0) {\n      \"\""
  }
]