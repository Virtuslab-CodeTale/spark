[
  {
    "id" : "2fa32e09-8bd8-4e1b-839a-5eac62432eeb",
    "prId" : 26361,
    "prUrl" : "https://github.com/apache/spark/pull/26361#pullrequestreview-338435756",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7e7f50f7-67bf-4cff-a13b-6b83fb71b758",
        "parentId" : null,
        "authorId" : "d19fc546-1296-40ce-befb-9eca847aeceb",
        "body" : "I think we should also provide the workaround in the error message. Instead just telling the users temp views are not allowed, we can say users can use permanent views in these cases?\r\n\r\ncc @imback82 @cloud-fan ",
        "createdAt" : "2019-12-28T02:28:02Z",
        "updatedAt" : "2019-12-28T02:28:02Z",
        "lastEditedBy" : "d19fc546-1296-40ce-befb-9eca847aeceb",
        "tags" : [
        ]
      },
      {
        "id" : "0464ebc0-c6df-4136-b9c4-b46cb09c59b2",
        "parentId" : "7e7f50f7-67bf-4cff-a13b-6b83fb71b758",
        "authorId" : "b14448be-63dd-4b59-ab38-deeb2a38de86",
        "body" : "We can add something like `Create a temporary view to reference temporary views; a permanent view can only reference permanent views`, but sounds a bit redundant with the error message?",
        "createdAt" : "2019-12-28T05:02:54Z",
        "updatedAt" : "2019-12-28T05:02:55Z",
        "lastEditedBy" : "b14448be-63dd-4b59-ab38-deeb2a38de86",
        "tags" : [
        ]
      },
      {
        "id" : "d4321201-9b8f-4f8e-a04a-cb5c0e95cf87",
        "parentId" : "7e7f50f7-67bf-4cff-a13b-6b83fb71b758",
        "authorId" : "d19fc546-1296-40ce-befb-9eca847aeceb",
        "body" : "Permanent views can also reference to tables. \r\n\r\nThere exists a general issue in our existing error messages. We do not have a message reference book. When users hit the unclear error messages, what they can do is to read the source code or try different options until it works. This is not natural to end users who have zero background about Spark SQL. We need to correct them one by one.  ",
        "createdAt" : "2019-12-28T07:21:21Z",
        "updatedAt" : "2019-12-28T07:21:22Z",
        "lastEditedBy" : "d19fc546-1296-40ce-befb-9eca847aeceb",
        "tags" : [
        ]
      },
      {
        "id" : "42998714-50c3-41b0-a9f8-50fc36790708",
        "parentId" : "7e7f50f7-67bf-4cff-a13b-6b83fb71b758",
        "authorId" : "b14448be-63dd-4b59-ab38-deeb2a38de86",
        "body" : "Got it. I will do a follow-up PR.",
        "createdAt" : "2019-12-28T08:00:26Z",
        "updatedAt" : "2019-12-28T08:00:27Z",
        "lastEditedBy" : "b14448be-63dd-4b59-ab38-deeb2a38de86",
        "tags" : [
        ]
      },
      {
        "id" : "35819e31-bbce-473b-b965-6c71b5ecb4c9",
        "parentId" : "7e7f50f7-67bf-4cff-a13b-6b83fb71b758",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "Note: this is the existing error message. This PR just extends the temp view check to subqueries. Agree that we can still improve the error message.",
        "createdAt" : "2019-12-30T04:39:43Z",
        "updatedAt" : "2019-12-30T04:39:43Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "558fec25-f6aa-497b-bd80-d7039e07ac33",
        "parentId" : "7e7f50f7-67bf-4cff-a13b-6b83fb71b758",
        "authorId" : "b14448be-63dd-4b59-ab38-deeb2a38de86",
        "body" : "Looks like this is already addressed by #26731.",
        "createdAt" : "2020-01-06T01:06:55Z",
        "updatedAt" : "2020-01-06T01:06:56Z",
        "lastEditedBy" : "b14448be-63dd-4b59-ab38-deeb2a38de86",
        "tags" : [
        ]
      }
    ],
    "commit" : "24f15f4972606241e8cc4494462586202405f3ce",
    "line" : 48,
    "diffHunk" : "@@ -1,1 +812,816 @@-- !query 71 output\norg.apache.spark.sql.AnalysisException\nNot allowed to create a permanent view `temporal5` by referencing a temporary view `tt`;\n\n"
  }
]