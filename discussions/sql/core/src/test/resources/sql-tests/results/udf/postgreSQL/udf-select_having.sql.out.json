[
  {
    "id" : "be22195f-811e-4ab7-8669-2b51429ebc39",
    "prId" : 27685,
    "prUrl" : "https://github.com/apache/spark/pull/27685#pullrequestreview-371672745",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5c91b15f-5ee1-4d8f-9cde-1514ad3aebdd",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "We need to hide ids even in error messages, too?",
        "createdAt" : "2020-03-09T07:52:10Z",
        "updatedAt" : "2020-04-09T15:06:31Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "e3c2c177-ec70-4c4b-8bd5-19abd79195dc",
        "parentId" : "5c91b15f-5ee1-4d8f-9cde-1514ad3aebdd",
        "authorId" : "c48b13f0-9ce5-4910-a8eb-aee1ac73ffcb",
        "body" : "I think the `flatArgument/flatArgumentsString` is tightly bind with `toString` of `Expression/AggregateExpression`, which will commonly affect all of them. I'll try more to eliminate the impact, thanks!",
        "createdAt" : "2020-03-09T09:45:12Z",
        "updatedAt" : "2020-04-09T15:06:31Z",
        "lastEditedBy" : "c48b13f0-9ce5-4910-a8eb-aee1ac73ffcb",
        "tags" : [
        ]
      },
      {
        "id" : "8365040d-5cf9-49b1-aab1-ec8990872dcd",
        "parentId" : "5c91b15f-5ee1-4d8f-9cde-1514ad3aebdd",
        "authorId" : "c48b13f0-9ce5-4910-a8eb-aee1ac73ffcb",
        "body" : "The error message explicitly called `map(_.sql)` instead of default `toString`. The `Alias.sql` is using `name` field which has already been formatted by `flatArguments` when constructing `Alias`. So this is also following the `flatArgument` framework.\r\nAs the error message is intended to suggest user with a sql snippet, maybe it's better to not includ `#exprId` anyway? Thanks.",
        "createdAt" : "2020-03-10T04:16:25Z",
        "updatedAt" : "2020-04-09T15:06:31Z",
        "lastEditedBy" : "c48b13f0-9ce5-4910-a8eb-aee1ac73ffcb",
        "tags" : [
        ]
      }
    ],
    "commit" : "c7daaa6543a51dbd83d56b56030d0d0b4755cb56",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +144,148 @@-- !query output\norg.apache.spark.sql.AnalysisException\ngrouping expressions sequence is empty, and 'spark_catalog.default.test_having.`a`' is not an aggregate function. Wrap '(min(spark_catalog.default.test_having.`a`) AS `min(a)`, max(spark_catalog.default.test_having.`a`) AS `max(a)`)' in windowing function(s) or wrap 'spark_catalog.default.test_having.`a`' in first() (or first_value) if you don't care which value you get.;\n\n"
  }
]