[
  {
    "id" : "872c80a0-d3ef-4ec9-9117-4f651ce54777",
    "prId" : 25716,
    "prUrl" : "https://github.com/apache/spark/pull/25716#pullrequestreview-285956459",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1cbddfc4-f986-4db8-a515-077439d29363",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "oh... wrong jira number... that must be SPARK-29012...",
        "createdAt" : "2019-09-10T00:24:44Z",
        "updatedAt" : "2019-09-10T07:47:13Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "96ed4f75-2368-419f-ab75-3efcdcd79b13",
        "parentId" : "1cbddfc4-f986-4db8-a515-077439d29363",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "This is because of it was cloned.",
        "createdAt" : "2019-09-10T07:35:52Z",
        "updatedAt" : "2019-09-10T07:47:13Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      }
    ],
    "commit" : "a4fae094e9b20a1030cbda7d5295239400717309",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +8,12 @@CREATE TABLE TIMESTAMP_TBL (d1 timestamp) USING parquet;\n\n-- Test shorthand input values\n-- We can't just \"select\" the results since they aren't constants; test for\n-- equality instead.  We can do that by running the test inside a transaction"
  },
  {
    "id" : "f63daefc-0e20-4697-91d2-7b63a2c635d5",
    "prId" : 25410,
    "prUrl" : "https://github.com/apache/spark/pull/25410#pullrequestreview-278753276",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "70af411f-056f-4318-af35-cfb6849c034f",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Oops. What I meant was backquoting for the special value like `54`.\r\nFor the other values like `year` and `month`, we don't need back quoting.\r\n\r\nSo, \r\n1. For the places where PostgreSQL uses `AS \"..\"`, we can use backquoting.\r\n2. For the places where PostgreSQL uses `AS xxx`, we don't need backquoting, too.",
        "createdAt" : "2019-08-16T06:08:53Z",
        "updatedAt" : "2019-09-06T06:56:57Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "a382fa8f-fbe3-45ab-9b5e-bc1892356513",
        "parentId" : "70af411f-056f-4318-af35-cfb6849c034f",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "Thanks. I will remove the backquoting.",
        "createdAt" : "2019-08-16T06:20:54Z",
        "updatedAt" : "2019-09-06T06:56:57Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      },
      {
        "id" : "88ec5857-d7a1-44a6-8472-7a0ebb8ac30a",
        "parentId" : "70af411f-056f-4318-af35-cfb6849c034f",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "@dongjoon-hyun When I removed them, I got the error:\r\n```\r\n-- !query 13\r\nSELECT '' AS `54`, d1 as `timestamp`,\r\n    date_part( 'year', d1) AS year, date_part( 'month', d1) AS month,\r\n    date_part( 'day', d1) AS day, date_part( 'hour', d1) AS hour,\r\n    date_part( 'minute', d1) AS minute, date_part( 'second', d1) AS second\r\n    FROM TIMESTAMP_TBL WHERE d1 BETWEEN '1902-01-01' AND '2038-01-01'\r\n-- !query 13 schema\r\nstruct<>\r\n-- !query 13 output\r\norg.apache.spark.sql.catalyst.parser.ParseException\r\n\r\nno viable alternative at input 'year'(line 2, pos 30)\r\n\r\n== SQL ==\r\nSELECT '' AS `54`, d1 as `timestamp`,\r\n    date_part( 'year', d1) AS year, date_part( 'month', d1) AS month,\r\n------------------------------^^^\r\n    date_part( 'day', d1) AS day, date_part( 'hour', d1) AS hour,\r\n    date_part( 'minute', d1) AS minute, date_part( 'second', d1) AS second\r\n    FROM TIMESTAMP_TBL WHERE d1 BETWEEN '1902-01-01' AND '2038-01-01'\r\n```",
        "createdAt" : "2019-08-16T06:24:20Z",
        "updatedAt" : "2019-09-06T06:56:57Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      },
      {
        "id" : "14e2b43d-c842-4d2a-9e27-818e02f292bd",
        "parentId" : "70af411f-056f-4318-af35-cfb6849c034f",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "I would guess, `year` belongs to a function as well. Probably, this confuses the parser?",
        "createdAt" : "2019-08-16T06:26:43Z",
        "updatedAt" : "2019-09-06T06:56:57Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      },
      {
        "id" : "98b4b1bd-65bd-4c26-8e28-a128c2d6b56b",
        "parentId" : "70af411f-056f-4318-af35-cfb6849c034f",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "@dongjoon-hyun I removed backquotes only around names that are not functions.",
        "createdAt" : "2019-08-16T06:32:47Z",
        "updatedAt" : "2019-09-06T06:56:57Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      },
      {
        "id" : "720546ea-df37-4c6d-a433-ea31ea04ce0f",
        "parentId" : "70af411f-056f-4318-af35-cfb6849c034f",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Oh. That sounds like a regression which we made recently.",
        "createdAt" : "2019-08-16T06:39:33Z",
        "updatedAt" : "2019-09-06T06:56:57Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "2a5ad0d3-416a-4d28-aded-d4d399d8b178",
        "parentId" : "70af411f-056f-4318-af35-cfb6849c034f",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Spark 2.4.3 shows the following and PostgreSQL also allows it. Let me check the logs.\r\n```\r\nspark-sql> select 1 as year;\r\n1\r\n```\r\nAlso, cc @maropu .",
        "createdAt" : "2019-08-16T06:41:46Z",
        "updatedAt" : "2019-09-06T06:56:57Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "e36025a1-ef52-428c-ae85-be96b5d4619a",
        "parentId" : "70af411f-056f-4318-af35-cfb6849c034f",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "? @MaxGekk . The master branch seems to be same. Could you push your change?\r\n```\r\nspark-sql> select 1 as year;\r\n1\r\n```",
        "createdAt" : "2019-08-16T06:44:23Z",
        "updatedAt" : "2019-09-06T06:56:57Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "76a4fc50-d81d-4cf8-a4be-99e3b95e8727",
        "parentId" : "70af411f-056f-4318-af35-cfb6849c034f",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "@dongjoon-hyun Pushed",
        "createdAt" : "2019-08-16T06:52:20Z",
        "updatedAt" : "2019-09-06T06:56:57Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      },
      {
        "id" : "1d240e62-5dde-47b1-9845-5e3c8aceed26",
        "parentId" : "70af411f-056f-4318-af35-cfb6849c034f",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "I reverted the backquotes back and opened JIRA for the issue: https://issues.apache.org/jira/browse/SPARK-28767",
        "createdAt" : "2019-08-17T13:44:50Z",
        "updatedAt" : "2019-09-06T06:56:57Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      },
      {
        "id" : "00e83263-ffaf-45c1-8643-f0cb162b29f8",
        "parentId" : "70af411f-056f-4318-af35-cfb6849c034f",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "This is because `spark.sql.parser.ansi.enabled` is set to `false` by default:\r\n```\r\nspark-sql> set spark.sql.parser.ansi.enabled=true;\r\nspark.sql.parser.ansi.enabled\ttrue\r\nspark-sql> select 1 as year;\r\nError in query: \r\nno viable alternative at input 'year'(line 1, pos 12)\r\n\r\n== SQL ==\r\nselect 1 as year\r\n------------^^^\r\n```",
        "createdAt" : "2019-08-22T17:36:14Z",
        "updatedAt" : "2019-09-06T06:56:57Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      },
      {
        "id" : "061df45c-1903-4280-a18d-c0175ec3f5aa",
        "parentId" : "70af411f-056f-4318-af35-cfb6849c034f",
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "Have you checked that? https://github.com/apache/spark/pull/25114#issuecomment-510537932\r\nI think that's an expected behaviour in the ansi mode.",
        "createdAt" : "2019-08-23T00:53:27Z",
        "updatedAt" : "2019-09-06T06:56:57Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      }
    ],
    "commit" : "600eee6d8ceef00f6554b64d03aaff404917c975",
    "line" : 20,
    "diffHunk" : "@@ -1,1 +188,192 @@--    AND timestamp '2038-01-01';\n\nSELECT '' AS `54`, d1 as `timestamp`,\n    date_part( 'year', d1) AS `year`, date_part( 'month', d1) AS `month`,\n    date_part( 'day', d1) AS `day`, date_part( 'hour', d1) AS `hour`,"
  }
]