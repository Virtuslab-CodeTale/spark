[
  {
    "id" : "167cebe9-d6f1-4caa-b00a-b4f05e8a50a0",
    "prId" : 27946,
    "prUrl" : "https://github.com/apache/spark/pull/27946#pullrequestreview-377949303",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b30a713a-4d9c-4e24-8007-cec057671edc",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "Shall we keep the pgsql test as what it is in pgsql?",
        "createdAt" : "2020-03-19T13:16:28Z",
        "updatedAt" : "2020-03-19T18:00:45Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "b4e5fab9-4d1b-44fa-91be-1e5afd45dc98",
        "parentId" : "b30a713a-4d9c-4e24-8007-cec057671edc",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Hi, @cloud-fan . We are using `CREATE TABLE USING` even in `pgsql` test. It's okay to change this.",
        "createdAt" : "2020-03-19T17:38:53Z",
        "updatedAt" : "2020-03-19T18:00:45Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "6594d841f049c95c0f0ac1f94dc58b0d2c5ebd3f",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +42,46 @@\n-- [SPARK-19842] Informational Referential Integrity Constraints Support in Spark\nCREATE TABLE view_base_table (key int /* PRIMARY KEY */, data varchar(20)) USING PARQUET;\n--\nCREATE VIEW key_dependent_view AS"
  },
  {
    "id" : "8070ecb7-0a8c-42a0-93be-bb23d10dca45",
    "prId" : 26290,
    "prUrl" : "https://github.com/apache/spark/pull/26290#pullrequestreview-308290784",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c3600c3b-2feb-41d8-863f-2b2a7a97868f",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "```\r\n// In Spark\r\norg.apache.spark.sql.AnalysisException\r\nNot allowed to create a permanent view `v1_temp` by referencing a temporary view `temp_table`;\r\n\r\n// In PostgreSQL\r\nNOTICE:  view \"v1_temp\" will be a temporary view\r\n```",
        "createdAt" : "2019-10-29T05:51:11Z",
        "updatedAt" : "2019-10-30T13:50:55Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "c02f3565-9536-4181-b921-458efc7f79dd",
        "parentId" : "c3600c3b-2feb-41d8-863f-2b2a7a97868f",
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "https://issues.apache.org/jira/browse/SPARK-29628",
        "createdAt" : "2019-10-29T06:11:47Z",
        "updatedAt" : "2019-10-30T13:50:55Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      }
    ],
    "commit" : "a9c159706ca9b71c4b8f8e6c63175500af75ff1b",
    "line" : 128,
    "diffHunk" : "@@ -1,1 +126,130 @@-- should be created in temp object schema\n-- [SPARK-29628] Forcibly create a temporary view in CREATE VIEW if referencing a temporary view\nCREATE VIEW v1_temp AS SELECT * FROM temp_table;\n-- should be created in temp object schema\nCREATE TEMP VIEW v2_temp AS SELECT * FROM base_table;"
  },
  {
    "id" : "88d0c5e0-3975-4dcb-b618-00aaeaa9f751",
    "prId" : 26290,
    "prUrl" : "https://github.com/apache/spark/pull/26290#pullrequestreview-308290663",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "876bf218-538b-4a17-9ed4-4234ed548082",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "This test should fail and throw an exception with a message `Not allowed to create a permanent view v8_temp by referencing a temporary view temp_table`, but it passes now.",
        "createdAt" : "2019-10-29T05:54:59Z",
        "updatedAt" : "2019-10-30T13:50:55Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "5f669406-4a95-4d32-86e2-d1fae1e71b51",
        "parentId" : "876bf218-538b-4a17-9ed4-4234ed548082",
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "https://issues.apache.org/jira/browse/SPARK-29630",
        "createdAt" : "2019-10-29T06:11:16Z",
        "updatedAt" : "2019-10-30T13:50:55Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      }
    ],
    "commit" : "a9c159706ca9b71c4b8f8e6c63175500af75ff1b",
    "line" : 181,
    "diffHunk" : "@@ -1,1 +179,183 @@CREATE VIEW v7_temp AS SELECT t1.id, t2.a FROM base_table t1, (SELECT * FROM temp_table) t2;\n-- [SPARK-29630] Not allowed to create a permanent view by referencing a temporary view in EXISTS\nCREATE VIEW v8_temp AS SELECT * FROM base_table WHERE EXISTS (SELECT 1 FROM temp_table);\nCREATE VIEW v9_temp AS SELECT * FROM base_table WHERE NOT EXISTS (SELECT 1 FROM temp_table);\n"
  },
  {
    "id" : "7917efbb-66ca-4e6b-8a6d-cacf14303fdd",
    "prId" : 26290,
    "prUrl" : "https://github.com/apache/spark/pull/26290#pullrequestreview-308286844",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ca3f984c-788e-4d41-a835-53bdca285a28",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "ditto",
        "createdAt" : "2019-10-29T05:55:06Z",
        "updatedAt" : "2019-10-30T13:50:55Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      }
    ],
    "commit" : "a9c159706ca9b71c4b8f8e6c63175500af75ff1b",
    "line" : 182,
    "diffHunk" : "@@ -1,1 +180,184 @@-- [SPARK-29630] Not allowed to create a permanent view by referencing a temporary view in EXISTS\nCREATE VIEW v8_temp AS SELECT * FROM base_table WHERE EXISTS (SELECT 1 FROM temp_table);\nCREATE VIEW v9_temp AS SELECT * FROM base_table WHERE NOT EXISTS (SELECT 1 FROM temp_table);\n\n-- a view should also be temporary if it references a temporary view"
  },
  {
    "id" : "97fc38cc-0c38-44c7-9d03-f266e8eede78",
    "prId" : 26290,
    "prUrl" : "https://github.com/apache/spark/pull/26290#pullrequestreview-309166516",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4dfe81e2-656a-4c41-8022-9fd43f42fb3b",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "The original file seem to assume this `emp` table as a common table. So, we don't use this in another files and this is enough to have this here instead of a common table?",
        "createdAt" : "2019-10-30T08:41:12Z",
        "updatedAt" : "2019-10-30T13:50:55Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "6e0e4196-9bb2-48c1-b327-26173f1cca8d",
        "parentId" : "4dfe81e2-656a-4c41-8022-9fd43f42fb3b",
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "Ur.. yea. I checked `emp` is only used in `create_view.sql` and `errors.sql`. Since we don't port `errors.sql`, I think its ok to put this definition.",
        "createdAt" : "2019-10-30T12:39:24Z",
        "updatedAt" : "2019-10-30T13:50:55Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      }
    ],
    "commit" : "a9c159706ca9b71c4b8f8e6c63175500af75ff1b",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +24,28 @@  salary int,\n  manager string\n) USING parquet;\n\nCREATE VIEW toyemp AS"
  },
  {
    "id" : "028e7151-2fed-4a4c-88d7-13d77bb9b883",
    "prId" : 26290,
    "prUrl" : "https://github.com/apache/spark/pull/26290#pullrequestreview-309173600",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cec73cc4-7de2-457d-92d8-0c57ab36ae7f",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Maybe, we can add `[SPARK-19842]` before line 49, too.",
        "createdAt" : "2019-10-30T08:47:26Z",
        "updatedAt" : "2019-10-30T13:50:55Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "e36bec2a-fb25-47b4-be53-a3bd11aab0fd",
        "parentId" : "cec73cc4-7de2-457d-92d8-0c57ab36ae7f",
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "ok",
        "createdAt" : "2019-10-30T12:51:57Z",
        "updatedAt" : "2019-10-30T13:50:55Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      }
    ],
    "commit" : "a9c159706ca9b71c4b8f8e6c63175500af75ff1b",
    "line" : 50,
    "diffHunk" : "@@ -1,1 +48,52 @@--\n-- [SPARK-19842] Informational Referential Integrity Constraints Support in Spark\n-- ALTER TABLE view_base_table DROP CONSTRAINT view_base_table_pkey;  -- fails\n\nCREATE VIEW key_dependent_view_no_cols AS"
  },
  {
    "id" : "6647ff6b-b52e-4f0a-b603-f5b83816ef73",
    "prId" : 26290,
    "prUrl" : "https://github.com/apache/spark/pull/26290#pullrequestreview-309038673",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b28ab378-1aec-4f0c-a3a7-cdf6155c4ff7",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "~This seems to be added by us. Shall we delete this?~",
        "createdAt" : "2019-10-30T08:52:06Z",
        "updatedAt" : "2019-10-30T13:50:55Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "a9c159706ca9b71c4b8f8e6c63175500af75ff1b",
    "line" : 125,
    "diffHunk" : "@@ -1,1 +123,127 @@-- should be created in temp_view_test schema\nCREATE VIEW v1 AS SELECT * FROM base_table;\nDESC TABLE EXTENDED v1;\n-- should be created in temp object schema\n-- [SPARK-29628] Forcibly create a temporary view in CREATE VIEW if referencing a temporary view"
  },
  {
    "id" : "2364b65b-448d-4092-9c6f-4c73629a3c3a",
    "prId" : 26290,
    "prUrl" : "https://github.com/apache/spark/pull/26290#pullrequestreview-309209970",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "09b77f02-86de-4534-9b6c-8fa5b1498b97",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Ur, maybe, is this intentional? It seems that this is added explicitly consistently. If then, okay~",
        "createdAt" : "2019-10-30T08:54:19Z",
        "updatedAt" : "2019-10-30T13:50:55Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "0f14cfbf-3afd-4f5a-91cc-c078a05f901a",
        "parentId" : "09b77f02-86de-4534-9b6c-8fa5b1498b97",
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "Yea, right. I added for checking view definitions.",
        "createdAt" : "2019-10-30T13:45:02Z",
        "updatedAt" : "2019-10-30T13:50:55Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      }
    ],
    "commit" : "a9c159706ca9b71c4b8f8e6c63175500af75ff1b",
    "line" : 131,
    "diffHunk" : "@@ -1,1 +129,133 @@-- should be created in temp object schema\nCREATE TEMP VIEW v2_temp AS SELECT * FROM base_table;\nDESC TABLE EXTENDED v2_temp;\n-- should be created in temp_views schema\nCREATE VIEW temp_view_test.v2 AS SELECT * FROM base_table;"
  },
  {
    "id" : "38b0a701-1ce4-45da-91c5-17cb3a576dd7",
    "prId" : 26290,
    "prUrl" : "https://github.com/apache/spark/pull/26290#pullrequestreview-309042625",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "35e64d6a-ecc5-451d-9992-108e6c0c60e4",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "~Shall we add explanation why we add the data because the original PostgreSQL doesn't have this?~ Never mind. I noticed we cannot create an empty view.",
        "createdAt" : "2019-10-30T08:59:23Z",
        "updatedAt" : "2019-10-30T13:50:55Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "a9c159706ca9b71c4b8f8e6c63175500af75ff1b",
    "line" : 217,
    "diffHunk" : "@@ -1,1 +215,219 @@-- CREATE TEMP TABLE tt (num2 int, value string);\nCREATE TEMP VIEW tt AS SELECT * FROM VALUES\n  (1, 'a') AS tt(num2, value);\n\nCREATE VIEW nontemp1 AS SELECT * FROM t1 CROSS JOIN t2;"
  }
]