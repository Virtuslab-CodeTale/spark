[
  {
    "id" : "c0f769bf-f958-4db2-b224-50bdc9182f9e",
    "prId" : 29608,
    "prUrl" : "https://github.com/apache/spark/pull/29608#pullrequestreview-481667263",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c26a3d9d-3eae-4103-9e41-a998b0e192aa",
        "parentId" : null,
        "authorId" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "body" : "I think should put  these assert on line 163",
        "createdAt" : "2020-09-03T06:14:52Z",
        "updatedAt" : "2020-09-03T09:34:36Z",
        "lastEditedBy" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "tags" : [
        ]
      },
      {
        "id" : "7ff22075-6beb-48f0-af21-de405b33751b",
        "parentId" : "c26a3d9d-3eae-4103-9e41-a998b0e192aa",
        "authorId" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "body" : "~`numberOfQueries == outputSize`~\r\nAh, I got it. But if a new function here, `expectedOutputs.size` must not equal to `numberOfQueries`.\r\n`expectedOutputs.size == outputSize` in fact.",
        "createdAt" : "2020-09-03T06:17:51Z",
        "updatedAt" : "2020-09-03T09:34:36Z",
        "lastEditedBy" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "tags" : [
        ]
      },
      {
        "id" : "fe587770-e17e-4f2c-a506-9d28427468ad",
        "parentId" : "c26a3d9d-3eae-4103-9e41-a998b0e192aa",
        "authorId" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "body" : "@beliefer This assert place here to verify the consistency of the file contents to avoid inconsistency caused by manual modification, and I think line 189  `assert expectedOutputs.size == outputSize` achieves the same goal as `numberOfQueries == outputSize`. Is this acceptable?\r\n",
        "createdAt" : "2020-09-03T07:04:38Z",
        "updatedAt" : "2020-09-03T09:34:36Z",
        "lastEditedBy" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "tags" : [
        ]
      },
      {
        "id" : "94c91b0f-b6b3-41e1-a19f-dca267653257",
        "parentId" : "c26a3d9d-3eae-4103-9e41-a998b0e192aa",
        "authorId" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "body" : "You can try to mock a new function with comments and test this suite.",
        "createdAt" : "2020-09-03T07:54:39Z",
        "updatedAt" : "2020-09-03T09:34:36Z",
        "lastEditedBy" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "tags" : [
        ]
      },
      {
        "id" : "3108da58-71d2-4e63-ae4c-e86e38c6f957",
        "parentId" : "c26a3d9d-3eae-4103-9e41-a998b0e192aa",
        "authorId" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "body" : "> You can try to mock a new function with comments and test this suite.\r\n\r\nYou are right,  [Spark-24884](https://github.com/apache/spark/pull/27507) already trigger this problem cause by incomplete manual modification.\r\n\r\nWith the new function add scene, I think the right way is run this case with `SPARK_GENERATE_GOLDEN_FILES = 1` to automatically regenerate the correct `sql-expression-schema.md` becasuse `sql-expression-schema.md` header said `Automatically generated by ExpressionsSchemaSuite`.",
        "createdAt" : "2020-09-03T08:18:28Z",
        "updatedAt" : "2020-09-03T09:34:36Z",
        "lastEditedBy" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "tags" : [
        ]
      },
      {
        "id" : "a835d917-5ddc-4c49-be57-3963cc9cc656",
        "parentId" : "c26a3d9d-3eae-4103-9e41-a998b0e192aa",
        "authorId" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "body" : "Therefore, if the file is manually modified instead of automatically generated,  I think the assertion failure caused by incorrect modification should be expected.\r\n\r\nDo we need to tell users clearly with `Try regenerating the result files with sys env  SPARK_GENERATE_GOLDEN_FILES = 1`?",
        "createdAt" : "2020-09-03T08:34:44Z",
        "updatedAt" : "2020-09-03T09:34:36Z",
        "lastEditedBy" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "tags" : [
        ]
      },
      {
        "id" : "e685383c-ce17-4951-85d7-511d2208e2ef",
        "parentId" : "c26a3d9d-3eae-4103-9e41-a998b0e192aa",
        "authorId" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "body" : "I got it. Thanks! Could you put these assert on line 163, so that it looks clear",
        "createdAt" : "2020-09-03T09:01:50Z",
        "updatedAt" : "2020-09-03T09:34:36Z",
        "lastEditedBy" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "tags" : [
        ]
      },
      {
        "id" : "3ac63f66-94f1-409e-b8bb-cde289e5f194",
        "parentId" : "c26a3d9d-3eae-4103-9e41-a998b0e192aa",
        "authorId" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "body" : "Address [6e6489b](https://github.com/apache/spark/pull/29608/commits/6e6489bff1291cf5d409b04b7dd21e56daf88e3c) reorder the assertions.",
        "createdAt" : "2020-09-03T09:35:27Z",
        "updatedAt" : "2020-09-03T09:35:27Z",
        "lastEditedBy" : "c7afbd1a-ab9f-4878-b837-32685ae783b0",
        "tags" : [
        ]
      }
    ],
    "commit" : "6e6489bff1291cf5d409b04b7dd21e56daf88e3c",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +172,176 @@      }\n\n      assert(numberOfQueries == expectedOutputs.size,\n        s\"expected outputs size: ${expectedOutputs.size} not same as numberOfQueries: \" +\n          s\"$numberOfQueries record in result file. Try regenerating the result files.\")"
  }
]