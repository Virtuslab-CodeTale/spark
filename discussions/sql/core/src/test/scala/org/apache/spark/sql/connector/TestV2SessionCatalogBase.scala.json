[
  {
    "id" : "fb171117-f3bd-4d43-9680-7e7c0c62a2f7",
    "prId" : 30079,
    "prUrl" : "https://github.com/apache/spark/pull/30079#pullrequestreview-515817518",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3ee3232b-fc9c-401f-8bb3-ac6199bc27f2",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "Why doesn't `!tables.isEmpty` work?",
        "createdAt" : "2020-10-23T05:00:08Z",
        "updatedAt" : "2020-10-27T21:04:52Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "0a47972d-9963-44ad-8ddb-b2f7e2ea72a2",
        "parentId" : "3ee3232b-fc9c-401f-8bb3-ac6199bc27f2",
        "authorId" : "b14448be-63dd-4b59-ab38-deeb2a38de86",
        "body" : "We have tests like the following:\r\n```scala\r\n  test(\"saveAsTable: Append mode should not fail if the table already exists \" +\r\n    \"and a same-name temp view exist\") {\r\n    withTable(\"same_name\") {\r\n      withTempView(\"same_name\") {\r\n```\r\nBefore, the table was not cleaned up correctly, so `!tables.isEmpty` was fine. But now that tables are cleaned up with this PR, we need a different way to check if this code path was executed.",
        "createdAt" : "2020-10-23T16:17:10Z",
        "updatedAt" : "2020-10-27T21:04:52Z",
        "lastEditedBy" : "b14448be-63dd-4b59-ab38-deeb2a38de86",
        "tags" : [
        ]
      }
    ],
    "commit" : "dfc44923d10fa7cbb5cd6cde4dfcffa19a9e994d",
    "line" : 46,
    "diffHunk" : "@@ -1,1 +84,88 @@  def clearTables(): Unit = {\n    assert(\n      tableCreated.get,\n      \"Tables are not created, maybe didn't use the session catalog code path?\")\n    tables.keySet().asScala.foreach(super.dropTable)"
  },
  {
    "id" : "70b6c595-f78e-4610-b58b-bbb1082736d6",
    "prId" : 30079,
    "prUrl" : "https://github.com/apache/spark/pull/30079#pullrequestreview-515329555",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c0b54be0-28f3-48eb-b3c8-32b9cdf6c6c6",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "Why doesn't `!tables.isEmpty` work?",
        "createdAt" : "2020-10-23T05:00:12Z",
        "updatedAt" : "2020-10-27T21:04:52Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      }
    ],
    "commit" : "dfc44923d10fa7cbb5cd6cde4dfcffa19a9e994d",
    "line" : 46,
    "diffHunk" : "@@ -1,1 +84,88 @@  def clearTables(): Unit = {\n    assert(\n      tableCreated.get,\n      \"Tables are not created, maybe didn't use the session catalog code path?\")\n    tables.keySet().asScala.foreach(super.dropTable)"
  }
]