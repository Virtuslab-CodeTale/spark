[
  {
    "id" : "6eb96b12-996b-4f4d-b4e0-fe6cc1263138",
    "prId" : 30482,
    "prUrl" : "https://github.com/apache/spark/pull/30482#pullrequestreview-537319805",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2856833d-cf19-4c27-b90b-08560a298403",
        "parentId" : null,
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "`'__HIVE_DEFAULT_PARTITION__'` should be handled as `null`",
        "createdAt" : "2020-11-24T09:54:30Z",
        "updatedAt" : "2020-11-24T10:55:04Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      }
    ],
    "commit" : "26b83a101f39c8d0878c96b6ffd228e040169c8b",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +253,257 @@        .loadTable(Identifier.of(Array(\"ns1\", \"ns2\"), \"tbl\"))\n        .asPartitionable\n      val expectedPartition = InternalRow.fromSeq(Seq[Any](null))\n      assert(!partTable.partitionExists(expectedPartition))\n      val partSpec = \"PARTITION (part0 = '__HIVE_DEFAULT_PARTITION__')\""
  },
  {
    "id" : "1046ad64-7b38-4fc0-b1ac-954d3417fed0",
    "prId" : 30482,
    "prUrl" : "https://github.com/apache/spark/pull/30482#pullrequestreview-537508317",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "de8dd5de-8906-41b7-a67a-d6fb92ff658f",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "I'm not sure about it. It's more like a hive specific thing and we should let v2 implementation to decide how to handle null partition values. This should be internal details and shouldn't be exposed to end users.",
        "createdAt" : "2020-11-24T11:13:50Z",
        "updatedAt" : "2020-11-24T11:13:50Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "77a6c2f0-9f32-416a-b1c3-89e8b288aafa",
        "parentId" : "de8dd5de-8906-41b7-a67a-d6fb92ff658f",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "ok. How can users specify `null` partition value?",
        "createdAt" : "2020-11-24T11:20:27Z",
        "updatedAt" : "2020-11-24T11:20:28Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      },
      {
        "id" : "8cf1e084-759a-49a3-902c-66e15b5a04b4",
        "parentId" : "de8dd5de-8906-41b7-a67a-d6fb92ff658f",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "does  `part_col = null` work?",
        "createdAt" : "2020-11-24T11:22:25Z",
        "updatedAt" : "2020-11-24T11:22:25Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "bf4e7ff6-2d64-4e2d-9996-2ea1cbfbf443",
        "parentId" : "de8dd5de-8906-41b7-a67a-d6fb92ff658f",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "For example, if we have a string partitioned column - how could we distinguish `null` from `\"null\"`?  ",
        "createdAt" : "2020-11-24T11:22:38Z",
        "updatedAt" : "2020-11-24T11:22:38Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      },
      {
        "id" : "f62aeecc-cfce-4f30-8a3c-ccf01d6f9fed",
        "parentId" : "de8dd5de-8906-41b7-a67a-d6fb92ff658f",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "The parser should recognize different literals, e.g.  `part_col = null`  and `part_col = \"null\"`",
        "createdAt" : "2020-11-24T11:26:03Z",
        "updatedAt" : "2020-11-24T11:26:04Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "92835972-062f-4fff-a807-18c5ea91982c",
        "parentId" : "de8dd5de-8906-41b7-a67a-d6fb92ff658f",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "> does part_col = null work?\r\n\r\nI have checked that. `null` is recognized  as a string `\"null\"`.",
        "createdAt" : "2020-11-24T11:28:17Z",
        "updatedAt" : "2020-11-24T11:28:17Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      },
      {
        "id" : "148dd372-6f9e-4389-8965-794af9c69b9e",
        "parentId" : "de8dd5de-8906-41b7-a67a-d6fb92ff658f",
        "authorId" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "body" : "> It's more like a hive specific thing and we should let v2 implementation to decide ...\r\n\r\nIt is already Spark specific thing too. Implementations don't see `'__HIVE_DEFAULT_PARTITION__'` at all because it is replaced by `null` at the analyzing phase. ",
        "createdAt" : "2020-11-24T13:49:50Z",
        "updatedAt" : "2020-11-24T13:49:50Z",
        "lastEditedBy" : "5c8bf89e-8bb3-4151-8b92-286da26c827e",
        "tags" : [
        ]
      }
    ],
    "commit" : "26b83a101f39c8d0878c96b6ffd228e040169c8b",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +255,259 @@      val expectedPartition = InternalRow.fromSeq(Seq[Any](null))\n      assert(!partTable.partitionExists(expectedPartition))\n      val partSpec = \"PARTITION (part0 = '__HIVE_DEFAULT_PARTITION__')\"\n      sql(s\"ALTER TABLE $t ADD $partSpec\")\n      assert(partTable.partitionExists(expectedPartition))"
  }
]