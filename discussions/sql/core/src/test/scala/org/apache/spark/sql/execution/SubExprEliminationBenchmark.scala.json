[
  {
    "id" : "446537f7-3cd3-4ce1-8ab6-9b41e8bcbbd3",
    "prId" : 32015,
    "prUrl" : "https://github.com/apache/spark/pull/32015#pullrequestreview-626029313",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9b02bd1a-846c-412e-9f2c-f4a255249eb8",
        "parentId" : null,
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "@viirya, I had to reduce the number of predicates .. otherwise it fails (only) when you run it with `spark-submit` in JDK 11. It can also be reproducible without using `Benchmarks` main.\r\n\r\nIndeterministic exception (but still StackOverFlow). Either:\r\n\r\n```\r\n\tat org.apache.spark.sql.catalyst.trees.TreeNode.$anonfun$collectFirst$2(TreeNode.scala:231)\r\n\tat scala.collection.LinearSeqOptimized.foldLeft(LinearSeqOptimized.scala:126)\r\n\tat scala.collection.LinearSeqOptimized.foldLeft$(LinearSeqOptimized.scala:122)\r\n\tat scala.collection.immutable.List.foldLeft(List.scala:89)\r\n\tat org.apache.spark.sql.catalyst.trees.TreeNode.$anonfun$collectFirst$1(TreeNode.scala:231)\r\n\tat scala.Option.orElse(Option.scala:447)\r\n\tat org.apache.spark.sql.catalyst.trees.TreeNode.collectFirst(TreeNode.scala:231)\r\n\tat org.apache.spark.sql.catalyst.trees.TreeNode.$anonfun$collectFirst$3(TreeNode.scala:231)\r\n\tat scala.Option.orElse(Option.scala:447)\r\n\tat org.apache.spark.sql.catalyst.trees.TreeNode.$anonfun$collectFirst$2(TreeNode.scala:231)\r\n\tat scala.collection.LinearSeqOptimized.foldLeft(LinearSeqOptimized.scala:126)\r\n\tat scala.collection.LinearSeqOptimized.foldLeft$(LinearSeqOptimized.scala:122)\r\n```\r\n\r\nOr\r\n\r\n```\r\n        at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1679)\r\n        at java.base/java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2464)\r\n        at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2358)\r\n        at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2196)\r\n        at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1679)\r\n        at java.base/java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2464)\r\n        at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2358)\r\n        at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2196)\r\n        at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1679)\r\n        at java.base/java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2464)\r\n        at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2358)\r\n```\r\n\r\nEven with reducing, I think it shows the performance impact with the expression elimination.\r\n\r\nI will update all the benchmark results according to the GA builds in a separate PR so I hope the current change is fine to you.",
        "createdAt" : "2021-04-01T08:38:27Z",
        "updatedAt" : "2021-04-02T14:13:41Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "ad4c68d0-14ef-4850-8d33-8a8cff71e036",
        "parentId" : "9b02bd1a-846c-412e-9f2c-f4a255249eb8",
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "Okay for me. Thanks.",
        "createdAt" : "2021-04-01T08:40:55Z",
        "updatedAt" : "2021-04-02T14:13:41Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      }
    ],
    "commit" : "e6beeb59e6aaada24b5b4faaa20410c76e3c363f",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +85,89 @@    withTempPath { path =>\n      prepareDataInfo(benchmark)\n      val numCols = 500\n      val schema = writeWideRow(path.getAbsolutePath, rowsNum, numCols)\n"
  }
]