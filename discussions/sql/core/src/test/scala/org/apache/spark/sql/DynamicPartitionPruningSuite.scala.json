[
  {
    "id" : "c3c2d5d3-8641-4c9a-8992-996896de8e8e",
    "prId" : 31984,
    "prUrl" : "https://github.com/apache/spark/pull/31984#pullrequestreview-628264393",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "eb0ab16c-3493-4879-999e-5245438fafb1",
        "parentId" : null,
        "authorId" : "b3ba992a-312c-46eb-b3c3-8d861d15ac40",
        "body" : "@wangyum Why would this PR change this test? This originally can be planned as a subquery duplicate but now it cannot.",
        "createdAt" : "2021-04-05T20:17:26Z",
        "updatedAt" : "2021-04-05T20:17:26Z",
        "lastEditedBy" : "b3ba992a-312c-46eb-b3c3-8d861d15ac40",
        "tags" : [
        ]
      },
      {
        "id" : "497e5887-8748-4430-b5a3-1457e200aa2f",
        "parentId" : "eb0ab16c-3493-4879-999e-5245438fafb1",
        "authorId" : "813f0961-9a16-4e42-a167-961d914c472c",
        "body" : "This test `set SQLConf.AUTO_BROADCASTJOIN_THRESHOLD.key -> \"-1\"`.",
        "createdAt" : "2021-04-06T00:05:02Z",
        "updatedAt" : "2021-04-06T00:05:02Z",
        "lastEditedBy" : "813f0961-9a16-4e42-a167-961d914c472c",
        "tags" : [
        ]
      },
      {
        "id" : "b01e71e2-20ae-401d-a0c6-fedf2e0d9127",
        "parentId" : "eb0ab16c-3493-4879-999e-5245438fafb1",
        "authorId" : "813f0961-9a16-4e42-a167-961d914c472c",
        "body" : "Please see https://github.com/apache/spark/pull/31984/commits/b510d7da21f8a92af69b1485b72aef6ad5901448#r603143204 for more details.",
        "createdAt" : "2021-04-06T00:11:50Z",
        "updatedAt" : "2021-04-06T00:11:51Z",
        "lastEditedBy" : "813f0961-9a16-4e42-a167-961d914c472c",
        "tags" : [
        ]
      },
      {
        "id" : "e57b4f56-5fd8-4973-9b01-c0b3651514df",
        "parentId" : "eb0ab16c-3493-4879-999e-5245438fafb1",
        "authorId" : "813f0961-9a16-4e42-a167-961d914c472c",
        "body" : "We can add hint to enable DPP:\r\n```scala\r\n    Given(\"disable broadcast hash join and enable query duplication\")\r\n    withSQLConf(SQLConf.DYNAMIC_PARTITION_PRUNING_REUSE_BROADCAST_ONLY.key -> \"false\",\r\n      SQLConf.AUTO_BROADCASTJOIN_THRESHOLD.key -> \"-1\",\r\n      SQLConf.DYNAMIC_PARTITION_PRUNING_USE_STATS.key -> \"true\") {\r\n      val df = sql(\r\n        \"\"\"\r\n          |SELECT /*+ BROADCAST(s) */ f.date_id, f.product_id, f.units_sold, f.store_id FROM fact_stats f\r\n          |JOIN dim_stats s\r\n          |ON f.store_id = s.store_id WHERE s.country = 'DE'\r\n        \"\"\".stripMargin)\r\n\r\n      checkPartitionPruningPredicate(df, false, true)\r\n\r\n      checkAnswer(df,\r\n        Row(1030, 2, 10, 3) ::\r\n        Row(1040, 2, 50, 3) ::\r\n        Row(1050, 2, 50, 3) ::\r\n        Row(1060, 2, 50, 3) :: Nil\r\n      )\r\n    }\r\n```",
        "createdAt" : "2021-04-06T00:12:25Z",
        "updatedAt" : "2021-04-06T00:12:26Z",
        "lastEditedBy" : "813f0961-9a16-4e42-a167-961d914c472c",
        "tags" : [
        ]
      }
    ],
    "commit" : "7edd25c82e3919f4d7f738f39e3f147aa5a0a849",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +869,873 @@        \"\"\".stripMargin)\n\n      checkPartitionPruningPredicate(df, false, false)\n\n      checkAnswer(df,"
  },
  {
    "id" : "a9d923bd-5d5b-4f60-80e5-a064b5ea78b9",
    "prId" : 31563,
    "prUrl" : "https://github.com/apache/spark/pull/31563#pullrequestreview-597536517",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6fcf2cf4-64a6-49ed-9ee4-d0cea5085b85",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "How about adding more tests for `LIKE ALL`, `NOT LIKE ANY`, and `NOT LIKE ALL`?",
        "createdAt" : "2021-02-24T05:25:01Z",
        "updatedAt" : "2021-02-24T05:25:02Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "0232a25e-dc37-40bb-bf78-c8ed62b7d308",
        "parentId" : "6fcf2cf4-64a6-49ed-9ee4-d0cea5085b85",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "I don't have a strong opinion. It's caused by the multi like optimization and any of these 3 can trigger this bug.",
        "createdAt" : "2021-02-24T14:27:54Z",
        "updatedAt" : "2021-02-24T14:27:55Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      }
    ],
    "commit" : "a1592d3261b837709c87f632e647465bb2c60745",
    "line" : 11,
    "diffHunk" : "@@ -1,1 +1396,1400 @@          |SELECT date_id, product_id FROM fact_sk f\n          |JOIN dim_store s\n          |ON f.store_id = s.store_id WHERE s.country LIKE ANY ('%D%E%', '%A%B%')\n        \"\"\".stripMargin)\n"
  }
]