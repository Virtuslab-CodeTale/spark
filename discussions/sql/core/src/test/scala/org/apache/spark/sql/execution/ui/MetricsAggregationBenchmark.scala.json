[
  {
    "id" : "f9e8ec09-3048-435f-8d2d-5271ed77407c",
    "prId" : 26218,
    "prUrl" : "https://github.com/apache/spark/pull/26218#pullrequestreview-306898877",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "79e91147-404e-4580-b464-9fa2ac6ad550",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Could you add the generated result(JDK8/JDK11) into this PR, please?",
        "createdAt" : "2019-10-23T06:15:46Z",
        "updatedAt" : "2019-10-25T00:52:21Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "a9f17e06-3389-405b-9797-be56de325905",
        "parentId" : "79e91147-404e-4580-b464-9fa2ac6ad550",
        "authorId" : "0b3111e2-9584-4813-8cb5-8f40e119f71c",
        "body" : "You mean add a comment in the code? What is the point?\r\n\r\nIf you modify the code again, you have to run the benchmark both with the old code and the new code and post your results. The results on my machine will be different than on anyone else's.\r\n\r\nAnd JDK8/JDK11 differences are kinda irrelevant here.",
        "createdAt" : "2019-10-23T15:48:28Z",
        "updatedAt" : "2019-10-25T00:52:21Z",
        "lastEditedBy" : "0b3111e2-9584-4813-8cb5-8f40e119f71c",
        "tags" : [
        ]
      },
      {
        "id" : "b422f54c-48fa-42d9-870a-8b2949e6170f",
        "parentId" : "79e91147-404e-4580-b464-9fa2ac6ad550",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "@vanzin . No~ What you need is just to run the benchmark with `SPARK_GENERATE_BENCHMARK_FILES=1`. It will generate the result for you.\r\n> You mean add a comment in the code? What is the point?\r\n\r\nDid you take a look at the other benchmarks recently? For example, the following.\r\n```scala\r\n/**\r\n * Benchmark for CoalescedRDD.\r\n * Measures rdd.coalesce performance under various combinations of\r\n * coalesced partitions and preferred hosts\r\n * To run this benchmark:\r\n * {{{\r\n *   1. without sbt:\r\n *      bin/spark-submit --class <this class> --jars <spark core test jar>\r\n *   2. build/sbt \"core/test:runMain <this class>\"\r\n *   3. generate result:\r\n *      SPARK_GENERATE_BENCHMARK_FILES=1 build/sbt \"core/test:runMain <this class>\"\r\n *      Results will be written to \"benchmarks/CoalescedRDD-results.txt\".\r\n * }}}\r\n * */\r\n```\r\n\r\nSince Apache Spark 3.0.0, we are tracking all the benchmark results with the generated files between Apache Spark versions. Please see https://issues.apache.org/jira/browse/SPARK-25475 .\r\n\r\ncc @cloud-fan ",
        "createdAt" : "2019-10-24T20:21:01Z",
        "updatedAt" : "2019-10-25T00:52:21Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "f4af5c9f-4cf9-4fc6-b6d3-70c9d40fe75e",
        "parentId" : "79e91147-404e-4580-b464-9fa2ac6ad550",
        "authorId" : "0b3111e2-9584-4813-8cb5-8f40e119f71c",
        "body" : "I had not seen that. Ok, I'll add the results file even though this is kind of an odd benchmark.",
        "createdAt" : "2019-10-24T20:31:55Z",
        "updatedAt" : "2019-10-25T00:52:21Z",
        "lastEditedBy" : "0b3111e2-9584-4813-8cb5-8f40e119f71c",
        "tags" : [
        ]
      },
      {
        "id" : "b7ed70b9-ac95-4461-8a9d-36bd85afcd0b",
        "parentId" : "79e91147-404e-4580-b464-9fa2ac6ad550",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Thank you, @vanzin !",
        "createdAt" : "2019-10-24T20:54:30Z",
        "updatedAt" : "2019-10-25T00:52:21Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "fa6225fc-a131-464f-8640-00e7975982fe",
        "parentId" : "79e91147-404e-4580-b464-9fa2ac6ad550",
        "authorId" : "0b3111e2-9584-4813-8cb5-8f40e119f71c",
        "body" : "I added the files but it's still rather pointless, in my view. A single measurement at some random point in time made with some random hardware is not useful for comparison.\r\n\r\nWhoever updates the code still needs to redo those measurements with both the old an new version, because the values in those files don't mean anything.\r\n\r\nAnd also you'd better hope those instructions copy & pasted into dozens of files never change.",
        "createdAt" : "2019-10-24T20:57:02Z",
        "updatedAt" : "2019-10-25T00:52:21Z",
        "lastEditedBy" : "0b3111e2-9584-4813-8cb5-8f40e119f71c",
        "tags" : [
        ]
      },
      {
        "id" : "7f57bf46-fe87-4703-879b-bad11c33bcf3",
        "parentId" : "79e91147-404e-4580-b464-9fa2ac6ad550",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Thanks. I completely agree with you, @vanzin ! I also have been noticing that those different and mixed results exists everywhere (especially Mac/Server results.)\r\n\r\n> A single measurement at some random point in time made with some random hardware is not useful for comparison.\r\n\r\nThat's the reason we recommend `r3.xlarge` EC2 instance as a standard machine for a long time and try to help to generate the result on that. All the existing result txt files are the `r3.xlarge` generated result. Additionally, I will do the regeneration before 3.0.0 release to make a baseline.\r\n\r\nAlso, the current `BenchmarkBase` is a way for us to automate in the downstream. We can track the performance by commit by commit on the same machine (if you want).",
        "createdAt" : "2019-10-24T22:21:07Z",
        "updatedAt" : "2019-10-25T00:52:21Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "0cbb6ee6-5b85-4c5b-8462-47c8192324f6",
        "parentId" : "79e91147-404e-4580-b464-9fa2ac6ad550",
        "authorId" : "0b3111e2-9584-4813-8cb5-8f40e119f71c",
        "body" : "You don't need those files to automate things. You start from somewhere to define a baseline, then compare from that. The results don't need to be committed to git. They can be managed by that automation.\r\n\r\nThe process you mention also ignores changes to the benchmarks themselves, even if those should be rarer.\r\n\r\nBut in any case, I just want to get this code in and don't really care that much about what you're doing with these files. As I said, this benchmark is different from the others and the base class was just a way to reuse code for measurements.",
        "createdAt" : "2019-10-24T22:27:24Z",
        "updatedAt" : "2019-10-25T00:52:21Z",
        "lastEditedBy" : "0b3111e2-9584-4813-8cb5-8f40e119f71c",
        "tags" : [
        ]
      }
    ],
    "commit" : "6377c701620d9c6b344993a8bf4c2c1acd267c00",
    "line" : 47,
    "diffHunk" : "@@ -1,1 +45,49 @@ * }}}\n */\nobject MetricsAggregationBenchmark extends BenchmarkBase {\n\n  private def metricTrackingBenchmark("
  },
  {
    "id" : "a2ab257a-f16c-4fc7-9312-cc2ceda21cac",
    "prId" : 26218,
    "prUrl" : "https://github.com/apache/spark/pull/26218#pullrequestreview-306840700",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bf2b19f1-916d-446c-9c2e-381d4c2928d6",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "We need an object description like the other benchmarks.",
        "createdAt" : "2019-10-24T20:23:03Z",
        "updatedAt" : "2019-10-25T00:52:21Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "6377c701620d9c6b344993a8bf4c2c1acd267c00",
    "line" : 36,
    "diffHunk" : "@@ -1,1 +34,38 @@import org.apache.spark.util.{AccumulatorMetadata, LongAccumulator, Utils}\nimport org.apache.spark.util.kvstore.InMemoryStore\n\n/**\n * Benchmark for metrics aggregation in the SQL listener."
  }
]