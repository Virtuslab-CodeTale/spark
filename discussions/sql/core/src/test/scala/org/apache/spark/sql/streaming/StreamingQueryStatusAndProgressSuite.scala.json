[
  {
    "id" : "7fe6f24c-d949-467f-9a68-b630d2f7a8c9",
    "prId" : 28040,
    "prUrl" : "https://github.com/apache/spark/pull/28040#pullrequestreview-382428907",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d8b687d0-f1c4-4edd-ae19-d2a7ed7b579c",
        "parentId" : null,
        "authorId" : "9cd657f0-37cd-41bd-908a-f2c996b95a7a",
        "body" : "this tests the original bug you wanted to solve. but I am afraid that in the no-data-batches, the correctness of numOutputRows may not be tested in the unit tests. Can you verify that? And if not can you add a few additional checks in the relevant tests?",
        "createdAt" : "2020-03-26T21:20:02Z",
        "updatedAt" : "2020-04-07T18:33:53Z",
        "lastEditedBy" : "9cd657f0-37cd-41bd-908a-f2c996b95a7a",
        "tags" : [
        ]
      }
    ],
    "commit" : "68bf14793b950f2a71f9cc61005f991577fc3774",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +242,246 @@          assert(nextProgress.stateOperators.head.numRowsTotal === 2)\n          assert(nextProgress.stateOperators.head.numRowsUpdated === 0)\n          assert(nextProgress.sink.numOutputRows === 0)\n        }\n      } finally {"
  },
  {
    "id" : "2ddc2bdf-90d7-43db-a4eb-934e5ccb1d18",
    "prId" : 26610,
    "prUrl" : "https://github.com/apache/spark/pull/26610#pullrequestreview-320712520",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "361938c1-f926-40cc-9604-15916f90d9ea",
        "parentId" : null,
        "authorId" : "0c28e5da-df9b-4076-bb67-3b6878f1f4ce",
        "body" : "The CI build fails here, and in fact this UT doesn't test the actual change. Wouldn't it pass the test with current master branch?\r\n\r\nActually it can't be tested unless modifying clock to support sub-milliseconds (say, microseconds), but it would bring too many change compared to the actual change we do.  (Still be able to test with 0 milliseconds, but that's slightly different than what we intended.)\r\n\r\nPersonally I'm OK to skip adding the UT in this case, but may need to hear others' voices as well.",
        "createdAt" : "2019-11-21T06:38:26Z",
        "updatedAt" : "2019-11-22T09:22:46Z",
        "lastEditedBy" : "0c28e5da-df9b-4076-bb67-3b6878f1f4ce",
        "tags" : [
        ]
      },
      {
        "id" : "b24bdccd-60b6-486e-bfcc-2579cda72c62",
        "parentId" : "361938c1-f926-40cc-9604-15916f90d9ea",
        "authorId" : "49d9f262-8467-4955-9309-d5e793a4e15e",
        "body" : "- The latest commit is `50baee9` and it fails PySpark unit tests. I think it is irrelevant. \r\n- In this test, the batch will end with same time with batch beginning. And it test the  actual change.\r\n- The change in PR is explicit, and there may not be a need to add UT. ",
        "createdAt" : "2019-11-21T08:06:38Z",
        "updatedAt" : "2019-11-22T09:22:46Z",
        "lastEditedBy" : "49d9f262-8467-4955-9309-d5e793a4e15e",
        "tags" : [
        ]
      },
      {
        "id" : "f3ffb16a-a3ce-4296-b4d6-92d3f558ec22",
        "parentId" : "361938c1-f926-40cc-9604-15916f90d9ea",
        "authorId" : "0c28e5da-df9b-4076-bb67-3b6878f1f4ce",
        "body" : "Thanks for explaining. I realized that the build failure was from old commit; and now I'm seeing the intention of the test - 0 milliseconds batch, which seems OK. Please follow the other comments - there's copy & paste which I would like to see it be reused.",
        "createdAt" : "2019-11-21T08:39:10Z",
        "updatedAt" : "2019-11-22T09:22:46Z",
        "lastEditedBy" : "0c28e5da-df9b-4076-bb67-3b6878f1f4ce",
        "tags" : [
        ]
      }
    ],
    "commit" : "6a3271a2596d0881f86679eae968385a5f95d28c",
    "line" : 20,
    "diffHunk" : "@@ -1,1 +219,223 @@  }\n\n  test(\"SPARK-29973: Make `processedRowsPerSecond` calculated more accurately and meaningfully\") {\n    import testImplicits._\n"
  }
]