[
  {
    "id" : "fda4fe14-1858-4c5d-8f56-966d1740bbf2",
    "prId" : 33370,
    "prUrl" : "https://github.com/apache/spark/pull/33370#pullrequestreview-708580680",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6f810410-3012-400a-9125-090252f361bc",
        "parentId" : null,
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "Could you add some tests for the case where a user setting both `DISABLED_JDBC_CONN_PROVIDER_LIST` and `connectionProvider`?",
        "createdAt" : "2021-07-16T01:40:48Z",
        "updatedAt" : "2021-07-16T01:43:29Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "960f9f98-bc9e-483d-9913-e49020c02d0e",
        "parentId" : "6f810410-3012-400a-9125-090252f361bc",
        "authorId" : "a8db2e87-20cc-46d2-a9f0-b5142f4fe30a",
        "body" : "Added",
        "createdAt" : "2021-07-16T10:10:26Z",
        "updatedAt" : "2021-07-16T10:10:27Z",
        "lastEditedBy" : "a8db2e87-20cc-46d2-a9f0-b5142f4fe30a",
        "tags" : [
        ]
      },
      {
        "id" : "96eeef12-1ecd-4b31-8a46-6eb8fb521063",
        "parentId" : "6f810410-3012-400a-9125-090252f361bc",
        "authorId" : "a8db2e87-20cc-46d2-a9f0-b5142f4fe30a",
        "body" : "Unfortunately, `DISABLED_JDBC_CONN_PROVIDER_LIST` is a static conf and `providers` is not lazy, i.e. I am not sure how to reevaluate providers in ConnectionProvider once the class has been loaded without reflection. See the comment below.",
        "createdAt" : "2021-07-16T16:51:20Z",
        "updatedAt" : "2021-07-16T16:54:50Z",
        "lastEditedBy" : "a8db2e87-20cc-46d2-a9f0-b5142f4fe30a",
        "tags" : [
        ]
      }
    ],
    "commit" : "e94cf0cc507fe31f26651587a257a36db16763fc",
    "line" : 27,
    "diffHunk" : "@@ -1,1 +47,51 @@  }\n\n  test(\"Throw an error selecting from an empty list of providers on create\") {\n    val providerBase = new ConnectionProviderBase() {\n      override val providers = Seq.empty"
  },
  {
    "id" : "efe21eb7-228a-4a91-b706-dc2962718b78",
    "prId" : 33370,
    "prUrl" : "https://github.com/apache/spark/pull/33370#pullrequestreview-708226596",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7159ef2f-6998-4db2-afda-09a43d38ae8f",
        "parentId" : null,
        "authorId" : "e6f86365-3ac2-48b4-94f9-21ce737cf1ac",
        "body" : "I have the feeling that `TestJdbcConnectionProvider(val name, val getConnectionImpl...)` class can be created in a common area. Such way several copy-paste can be eliminated, right?",
        "createdAt" : "2021-07-16T07:37:43Z",
        "updatedAt" : "2021-07-16T07:37:43Z",
        "lastEditedBy" : "e6f86365-3ac2-48b4-94f9-21ce737cf1ac",
        "tags" : [
        ]
      },
      {
        "id" : "d796c7d5-d14c-4675-aeb1-8ff1268763ad",
        "parentId" : "7159ef2f-6998-4db2-afda-09a43d38ae8f",
        "authorId" : "a8db2e87-20cc-46d2-a9f0-b5142f4fe30a",
        "body" : "IMHO, I would have to provide closures for `canHandle` and `getConnection` to the class anyway, so I am not quite sure what the test wrapper class would accomplish.",
        "createdAt" : "2021-07-16T10:23:47Z",
        "updatedAt" : "2021-07-16T10:23:47Z",
        "lastEditedBy" : "a8db2e87-20cc-46d2-a9f0-b5142f4fe30a",
        "tags" : [
        ]
      }
    ],
    "commit" : "e94cf0cc507fe31f26651587a257a36db16763fc",
    "line" : 44,
    "diffHunk" : "@@ -1,1 +64,68 @@\n  test(\"Throw an error when more than one provider is available on create\") {\n    val provider1 = new JdbcConnectionProvider() {\n      override val name: String = \"test1\"\n      override def canHandle(driver: Driver, options: Map[String, String]): Boolean = true"
  }
]