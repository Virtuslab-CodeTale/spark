[
  {
    "id" : "76df0ea5-bbde-452f-b60c-26e6d81ff8ac",
    "prId" : 33212,
    "prUrl" : "https://github.com/apache/spark/pull/33212#pullrequestreview-702723377",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f41ffe31-ad5d-498b-8b1d-b5bd1f53f932",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "It looks obvious that the nullability of the outer column doesn't matter. We probably don't need to test it.",
        "createdAt" : "2021-07-08T17:37:45Z",
        "updatedAt" : "2021-07-08T17:37:45Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "43cf3b35-7197-44c1-a232-e4ef761dea14",
        "parentId" : "f41ffe31-ad5d-498b-8b1d-b5bd1f53f932",
        "authorId" : "c12eb4aa-c39d-4fa9-8470-ed071c0be24a",
        "body" : "updated.",
        "createdAt" : "2021-07-09T06:33:37Z",
        "updatedAt" : "2021-07-09T06:33:37Z",
        "lastEditedBy" : "c12eb4aa-c39d-4fa9-8470-ed071c0be24a",
        "tags" : [
        ]
      }
    ],
    "commit" : "9fb8fbd5598eb0d80c11bf7e129ad5c9b146f837",
    "line" : 47,
    "diffHunk" : "@@ -1,1 +2936,2940 @@    }\n\n    Seq(true, false).foreach { nullable =>\n      val schema = StructType(Seq(\n        StructField(\"c1\", IntegerType, nullable = true),"
  },
  {
    "id" : "5460a64d-e803-4e3e-8b60-b0d2fd620a35",
    "prId" : 33212,
    "prUrl" : "https://github.com/apache/spark/pull/33212#pullrequestreview-703680927",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6b7f00de-18c6-4bc3-9d15-8ca404a83828",
        "parentId" : null,
        "authorId" : "c12eb4aa-c39d-4fa9-8470-ed071c0be24a",
        "body" : "@cloud-fan Since the field is non-nullable, do we still return Row(1, null) for PERMISSIVE mode? if yes, this may cause the cast struct problem as we talked about before,  the field is non-nullable but row.isNullAt(index) is true.\r\n",
        "createdAt" : "2021-07-09T06:33:47Z",
        "updatedAt" : "2021-07-09T06:33:48Z",
        "lastEditedBy" : "c12eb4aa-c39d-4fa9-8470-ed071c0be24a",
        "tags" : [
        ]
      },
      {
        "id" : "7117a503-4ee4-4594-a853-ed7a97adf4d9",
        "parentId" : "6b7f00de-18c6-4bc3-9d15-8ca404a83828",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "Yea, I think we can't apply permissive mode here. Failing looks fine to me.",
        "createdAt" : "2021-07-09T12:17:23Z",
        "updatedAt" : "2021-07-09T12:17:24Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "d9649185-9308-4d5f-af6c-60d92e386b07",
        "parentId" : "6b7f00de-18c6-4bc3-9d15-8ca404a83828",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "Actually, `PERMISSIVE` mode should not fail at runtime. Shall we fail at the very beginning if the mode is `PERMISSIVE` and schema contains non-nullable fields?",
        "createdAt" : "2021-07-09T12:37:38Z",
        "updatedAt" : "2021-07-09T12:37:38Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "dfd1f78f-e68d-41c6-851c-5cfba051dd80",
        "parentId" : "6b7f00de-18c6-4bc3-9d15-8ca404a83828",
        "authorId" : "c12eb4aa-c39d-4fa9-8470-ed071c0be24a",
        "body" : "Done, add not nullable check for PERMISSIVE mode when we initial `FailureSafeParser`.",
        "createdAt" : "2021-07-12T03:02:55Z",
        "updatedAt" : "2021-07-12T03:02:55Z",
        "lastEditedBy" : "c12eb4aa-c39d-4fa9-8470-ed071c0be24a",
        "tags" : [
        ]
      }
    ],
    "commit" : "9fb8fbd5598eb0d80c11bf7e129ad5c9b146f837",
    "line" : 71,
    "diffHunk" : "@@ -1,1 +2960,2964 @@\n          val exceptionMsg2 = intercept[SparkException] {\n            load(\"PERMISSIVE\", schema, jsonString).collect\n          }\n          val expectedMsg2 ="
  },
  {
    "id" : "ec105230-d696-4ddc-9fbe-f4601d9cbd36",
    "prId" : 33212,
    "prUrl" : "https://github.com/apache/spark/pull/33212#pullrequestreview-706301179",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bae73462-cbc3-4b12-834e-640ed11d3335",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "Can we add a migration guide for it? This is a breaking change as `PERMISSIVE` is the default mode.\r\n\r\nAlso cc @HyukjinKwon for this breaking change.",
        "createdAt" : "2021-07-14T13:50:19Z",
        "updatedAt" : "2021-07-14T13:50:19Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "c03924c1-1933-42b5-8268-4775c6420e87",
        "parentId" : "bae73462-cbc3-4b12-834e-640ed11d3335",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "Another choice is to not respect the user-given schema and always turn it into a nullable schema, if the mode is PERMISSIVE.",
        "createdAt" : "2021-07-14T13:51:24Z",
        "updatedAt" : "2021-07-14T13:51:24Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      }
    ],
    "commit" : "9fb8fbd5598eb0d80c11bf7e129ad5c9b146f837",
    "line" : 74,
    "diffHunk" : "@@ -1,1 +2963,2967 @@          }\n          val expectedMsg2 =\n            \"Field c2 is not nullable but PERMISSIVE mode only works with nullable fields.\"\n          assert(exceptionMsg2.getMessage.contains(expectedMsg2))\n        }"
  },
  {
    "id" : "d7f170b7-8229-4667-84d2-ae76c26cbd5d",
    "prId" : 32147,
    "prUrl" : "https://github.com/apache/spark/pull/32147#pullrequestreview-637551815",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3955d27e-f8be-4c33-961f-9d1e15316c2d",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "It would be great if we can have a test coverage for setting both pretty and non-ascii-as-codepoint at the same time.",
        "createdAt" : "2021-04-15T04:56:57Z",
        "updatedAt" : "2021-04-27T21:06:51Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "782a45a5-e1d4-4be6-a11c-2ce7f35427bd",
        "parentId" : "3955d27e-f8be-4c33-961f-9d1e15316c2d",
        "authorId" : "3a227965-84e0-47cf-9974-11293764f028",
        "body" : "O.K, I'll cover the case of `pretty=true`.\r\nBTW, I've noticed another issue when writing the test case for `pretty=true` (#32203).\r\nSo, I'll fix that issue first.",
        "createdAt" : "2021-04-16T06:17:32Z",
        "updatedAt" : "2021-04-27T21:06:51Z",
        "lastEditedBy" : "3a227965-84e0-47cf-9974-11293764f028",
        "tags" : [
        ]
      },
      {
        "id" : "6e730987-3915-4788-896f-1995eb285060",
        "parentId" : "3955d27e-f8be-4c33-961f-9d1e15316c2d",
        "authorId" : "3a227965-84e0-47cf-9974-11293764f028",
        "body" : "#32203 was merged and I've rebased to `master`.",
        "createdAt" : "2021-04-16T10:20:10Z",
        "updatedAt" : "2021-04-27T21:06:51Z",
        "lastEditedBy" : "3a227965-84e0-47cf-9974-11293764f028",
        "tags" : [
        ]
      }
    ],
    "commit" : "93efbb3c72edd58804d70d683de76d767eb8dc85",
    "line" : 57,
    "diffHunk" : "@@ -1,1 +2899,2903 @@    }\n    // scalastyle:on nonascii\n  }\n\n  test(\"SPARK-35104: Fix wrong indentation for multiple JSON even if `pretty` option is true\") {"
  },
  {
    "id" : "eac65bc0-4db6-44af-b948-52b4d8386eab",
    "prId" : 28874,
    "prUrl" : "https://github.com/apache/spark/pull/28874#pullrequestreview-436004911",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "98db7769-3d9a-464a-bc68-3947bd558512",
        "parentId" : null,
        "authorId" : "bea80117-7be3-4703-8d54-02b7bf73632c",
        "body" : "inconsistent on how we capitalize denyList.  I've seen it this way, DenyList, Denylist. We should try to be consistent",
        "createdAt" : "2020-06-23T17:44:53Z",
        "updatedAt" : "2020-07-14T15:31:39Z",
        "lastEditedBy" : "bea80117-7be3-4703-8d54-02b7bf73632c",
        "tags" : [
        ]
      }
    ],
    "commit" : "1ba58fb285cc0a1ff28e452a61c8521d5b308a32",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +2489,2493 @@          .count()\n      }\n      assert(exception.getMessage.contains(\"encoding must not be included in the denyList\"))\n    }\n  }"
  }
]