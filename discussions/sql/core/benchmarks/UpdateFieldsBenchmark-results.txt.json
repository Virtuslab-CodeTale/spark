[
  {
    "id" : "0b5e3bc2-f3d6-4ca3-ab82-0f34dda48896",
    "prId" : 29795,
    "prUrl" : "https://github.com/apache/spark/pull/29795#pullrequestreview-497114495",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5e3dfe74-924b-474e-87e0-f326b6c7d34d",
        "parentId" : null,
        "authorId" : "6fc88871-fca6-485c-a47e-5e17709c7b68",
        "body" : "Changed the benchmark up a little bit so that we can compare the performant and non-performant methods of updating multiple nested columns. ",
        "createdAt" : "2020-09-27T22:21:27Z",
        "updatedAt" : "2020-09-29T20:56:48Z",
        "lastEditedBy" : "6fc88871-fca6-485c-a47e-5e17709c7b68",
        "tags" : [
        ]
      }
    ],
    "commit" : "7e51f35580db72fda11153d76caf232b83e617cd",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +24,28 @@To nullable StructTypes using performant method                                 5185           5516         468          0.0      Infinity       0.9X\n\n"
  },
  {
    "id" : "aa5e0c6e-9db5-463d-bca3-a3b625669e8f",
    "prId" : 29795,
    "prUrl" : "https://github.com/apache/spark/pull/29795#pullrequestreview-497114495",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b7c76ed4-0685-4551-96b9-003f616be551",
        "parentId" : null,
        "authorId" : "6fc88871-fca6-485c-a47e-5e17709c7b68",
        "body" : "As expected, this last result isn't great (43 seconds). \r\nIt's partially because of the non-performant method and partially because the optimizer rules aren't able to perfectly optimize complex nullable StructType scenarios (I've documented these scenarios in this [commit](https://github.com/apache/spark/pull/29795/commits/4fe48b4287c81e73276165453477811211e341d9)). \r\nIt should be possible to improve the optimizer rules further in the future. I have a couple of simple ideas I'm toying around with but it will take me a while to reason/test if they are safe from a correctness point of view. ",
        "createdAt" : "2020-09-27T22:21:42Z",
        "updatedAt" : "2020-09-29T20:56:48Z",
        "lastEditedBy" : "6fc88871-fca6-485c-a47e-5e17709c7b68",
        "tags" : [
        ]
      }
    ],
    "commit" : "7e51f35580db72fda11153d76caf232b83e617cd",
    "line" : 12,
    "diffHunk" : "@@ -1,1 +10,14 @@To nullable StructTypes using performant method                                9             10           1          0.0      Infinity       1.0X\nTo non-nullable StructTypes using non-performant method                     2457           2464          10          0.0      Infinity       0.0X\nTo nullable StructTypes using non-performant method                        42641          43804        1644          0.0      Infinity       0.0X\n\n"
  }
]