[
  {
    "id" : "26a7f1e7-ff27-4ac7-b0cc-bcd47ac413ee",
    "prId" : 30270,
    "prUrl" : "https://github.com/apache/spark/pull/30270#pullrequestreview-525434001",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "14df63e6-8773-4d45-b2e6-4eb71efc9493",
        "parentId" : null,
        "authorId" : "b14448be-63dd-4b59-ab38-deeb2a38de86",
        "body" : "Note that this `def` is called as follows:\r\nhttps://github.com/apache/spark/blob/93ad26be01a47fb075310a26188e238d55110098/sql/hive/src/test/scala/org/apache/spark/sql/hive/test/TestHive.scala#L611-L619\r\n\r\nBefore this PR, it was resolved to a table in the current database, but after this PR, it will be resolved to a temporary view (if exists).",
        "createdAt" : "2020-11-06T19:29:44Z",
        "updatedAt" : "2020-11-09T18:50:13Z",
        "lastEditedBy" : "b14448be-63dd-4b59-ab38-deeb2a38de86",
        "tags" : [
        ]
      }
    ],
    "commit" : "d01a95e11896388f0978d6d102c363f3a45c28a7",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +501,505 @@    if (sessionState.catalog.getTempView(name).isEmpty &&\n        !sharedState.loadedTables.contains(name)) {\n      // Marks the table as loaded first to prevent infinite mutually recursive table loading.\n      sharedState.loadedTables += name\n      logDebug(s\"Loading test table $name\")"
  },
  {
    "id" : "cfb5adc2-e45d-47a1-b9df-4edd62bd168d",
    "prId" : 30270,
    "prUrl" : "https://github.com/apache/spark/pull/30270#pullrequestreview-526566599",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d54c88ef-ae7f-4d0f-a8e9-b249b7ef740c",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "what happens if we don't skip?",
        "createdAt" : "2020-11-09T07:48:40Z",
        "updatedAt" : "2020-11-09T18:50:13Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "edcccccd-eb50-48b8-8e8f-78cad1fbb100",
        "parentId" : "d54c88ef-ae7f-4d0f-a8e9-b249b7ef740c",
        "authorId" : "b14448be-63dd-4b59-ab38-deeb2a38de86",
        "body" : "There are test suites (full list [here](https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/130704/testReport/)) that use the same name for temporary view and table (for example, `src`) and that those predefined tables will be loaded in this `def`:\r\nhttps://github.com/apache/spark/blob/8113c88542ee282b510c7e046d64df1761a85d14/sql/hive/src/test/scala/org/apache/spark/sql/hive/test/TestHive.scala#L336-L338\r\n, leading to an exception thrown since `LOAD DATA` doesn't work with temporary views.",
        "createdAt" : "2020-11-09T19:03:04Z",
        "updatedAt" : "2020-11-09T19:03:05Z",
        "lastEditedBy" : "b14448be-63dd-4b59-ab38-deeb2a38de86",
        "tags" : [
        ]
      }
    ],
    "commit" : "d01a95e11896388f0978d6d102c363f3a45c28a7",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +498,502 @@  def loadTestTable(name: String): Unit = {\n    // LOAD DATA does not work on temporary views. Since temporary views are resolved first,\n    // skip loading if there exists a temporary view with the given name.\n    if (sessionState.catalog.getTempView(name).isEmpty &&\n        !sharedState.loadedTables.contains(name)) {"
  },
  {
    "id" : "d3e0e679-7eb9-458d-bd1f-05c6b4091abe",
    "prId" : 26096,
    "prUrl" : "https://github.com/apache/spark/pull/26096#pullrequestreview-301025284",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2bd62072-1b39-45ca-8b68-e87cabe6f638",
        "parentId" : null,
        "authorId" : "813f0961-9a16-4e42-a167-961d914c472c",
        "body" : "Since you touched this file, could you add a new line after [line 657](https://github.com/apache/spark/pull/26096/files#diff-0818c275c23a3fa4bb8441532bcd046dR657)?",
        "createdAt" : "2019-10-12T02:23:20Z",
        "updatedAt" : "2019-10-12T22:51:53Z",
        "lastEditedBy" : "813f0961-9a16-4e42-a167-961d914c472c",
        "tags" : [
        ]
      },
      {
        "id" : "cf6fbd0d-3a00-44a7-81cc-9c53247dc124",
        "parentId" : "2bd62072-1b39-45ca-8b68-e87cabe6f638",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Sure!",
        "createdAt" : "2019-10-12T22:48:57Z",
        "updatedAt" : "2019-10-12T22:51:53Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "de111511-b27b-4578-8d95-8340ec325eac",
        "parentId" : "2bd62072-1b39-45ca-8b68-e87cabe6f638",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "It's done.",
        "createdAt" : "2019-10-12T22:52:20Z",
        "updatedAt" : "2019-10-12T22:52:20Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "a32a8cfa56d9c03af6f9853fc48284939bf1f628",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +653,657 @@  private val hiveTestJarsDir = Utils.createTempDir()\n\n  def getHiveContribJar(version: String = HiveUtils.builtinHiveVersion): File =\n    getJarFromUrl(s\"${repository}org/apache/hive/hive-contrib/\" +\n      s\"$version/hive-contrib-$version.jar\")"
  }
]