[
  {
    "id" : "cc449e38-db3d-4c6b-b7f0-37c40c456c4a",
    "prId" : 31378,
    "prUrl" : "https://github.com/apache/spark/pull/31378#pullrequestreview-581100051",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5ce5e44d-2067-4f86-b137-e45b61b1ae85",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "is it a reasonable behavior change?",
        "createdAt" : "2021-02-01T13:54:08Z",
        "updatedAt" : "2021-02-08T15:01:25Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "8556943b-d51f-4884-9d1b-e87f781120a0",
        "parentId" : "5ce5e44d-2067-4f86-b137-e45b61b1ae85",
        "authorId" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "body" : "> is it a reasonable behavior change?\r\n\r\nTo be honest  I am confused that why in `ShowTablePropertiesCommand`  we don't show `key` if not specified \r\nbut we will show always show `key`  in `ShowTableProperties`\r\n\r\nKeep consistent I think is necessary.",
        "createdAt" : "2021-02-01T14:01:01Z",
        "updatedAt" : "2021-02-08T15:01:25Z",
        "lastEditedBy" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "tags" : [
        ]
      },
      {
        "id" : "6be168a1-994c-4dce-ac26-e50d693738e0",
        "parentId" : "5ce5e44d-2067-4f86-b137-e45b61b1ae85",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "Yea we need to keep consistent. The question is which side we should follow. What's the behavior in hive?",
        "createdAt" : "2021-02-01T14:17:43Z",
        "updatedAt" : "2021-02-08T15:01:25Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "7f9d2424-73b9-4640-93ac-ed6da8b6d759",
        "parentId" : "5ce5e44d-2067-4f86-b137-e45b61b1ae85",
        "authorId" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "body" : "> Yea we need to keep consistent. The question is which side we should follow. What's the behavior in hive?\r\n\r\n![image](https://user-images.githubusercontent.com/46485123/106471775-f58a5b00-64dc-11eb-9aaf-51bfa7e2d785.png)\r\n\r\n![image](https://user-images.githubusercontent.com/46485123/106471914-181c7400-64dd-11eb-9aa7-fe045e3507ec.png)\r\n\r\nSeems hive is same as ShowTablePropertiesCommand\r\n",
        "createdAt" : "2021-02-01T14:32:46Z",
        "updatedAt" : "2021-02-08T15:01:25Z",
        "lastEditedBy" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "tags" : [
        ]
      },
      {
        "id" : "e26ef79e-1c25-40de-bdd7-71473bd2807d",
        "parentId" : "5ce5e44d-2067-4f86-b137-e45b61b1ae85",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "then shall we change the schema of the v2 command?",
        "createdAt" : "2021-02-01T15:06:14Z",
        "updatedAt" : "2021-02-08T15:01:25Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "b354e2e4-873f-479f-9e2c-68b70ce51d0b",
        "parentId" : "5ce5e44d-2067-4f86-b137-e45b61b1ae85",
        "authorId" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "body" : "But seems changed in hive current master branch https://github.com/apache/hive/blob/95c7d361549272c52dfcf637eb2a0360b79b9815/ql/src/java/org/apache/hadoop/hive/ql/ddl/table/ShowTablePropertiesOperation.java",
        "createdAt" : "2021-02-01T15:12:16Z",
        "updatedAt" : "2021-02-08T15:01:25Z",
        "lastEditedBy" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "tags" : [
        ]
      },
      {
        "id" : "74fcf189-db50-4a7b-8a1c-1a170aaeae00",
        "parentId" : "5ce5e44d-2067-4f86-b137-e45b61b1ae85",
        "authorId" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "body" : "> then shall we change the schema of the v2 command?\r\n\r\nIMO,  change  `ShowTablePropertiesCommand` is correct since hive's output schema is `prpt_name` and `prpt_value`, I think hive is wrong before.",
        "createdAt" : "2021-02-01T15:15:15Z",
        "updatedAt" : "2021-02-08T15:01:25Z",
        "lastEditedBy" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "tags" : [
        ]
      },
      {
        "id" : "57ef837b-7d25-4952-bbfd-1644e5ea075e",
        "parentId" : "5ce5e44d-2067-4f86-b137-e45b61b1ae85",
        "authorId" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "body" : "![image](https://user-images.githubusercontent.com/46485123/106477773-764c5580-64e3-11eb-8536-f2c62b54d5a8.png)\r\n\r\nAdd commit `keep same as 2.x hive` as a  backup and revert it.  Don't be confused about this",
        "createdAt" : "2021-02-01T15:17:28Z",
        "updatedAt" : "2021-02-08T15:01:25Z",
        "lastEditedBy" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "tags" : [
        ]
      },
      {
        "id" : "dafe5c0c-409d-4246-ab8f-cadc8cdb4bee",
        "parentId" : "5ce5e44d-2067-4f86-b137-e45b61b1ae85",
        "authorId" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "body" : "> > then shall we change the schema of the v2 command?\r\n> \r\n> IMO, change `ShowTablePropertiesCommand` is correct since hive's output schema is `prpt_name` and `prpt_value`, I think hive is wrong before.\r\n\r\nAlso ping @wangyum @beliefer @viirya Also hope your suggestion since I believe it's a hive's bug and we don't need to follow wrong behavior in hive 1.x and 2.x",
        "createdAt" : "2021-02-02T06:31:17Z",
        "updatedAt" : "2021-02-08T15:01:25Z",
        "lastEditedBy" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "tags" : [
        ]
      },
      {
        "id" : "40d4151d-105f-4a7d-b773-0796b06e12eb",
        "parentId" : "5ce5e44d-2067-4f86-b137-e45b61b1ae85",
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "Changing the output schema looks fine to me. Could you describe this change in the PR description?",
        "createdAt" : "2021-02-02T07:30:57Z",
        "updatedAt" : "2021-02-08T15:01:25Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      },
      {
        "id" : "e8b2ef09-7056-4452-b783-d70dbe4bc3bf",
        "parentId" : "5ce5e44d-2067-4f86-b137-e45b61b1ae85",
        "authorId" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "body" : "> Changing the output schema looks fine to me. Could you describe this change in the PR description?\r\n\r\nYea, updated, Do we need to change migration guide too?",
        "createdAt" : "2021-02-02T07:43:21Z",
        "updatedAt" : "2021-02-08T15:01:25Z",
        "lastEditedBy" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "tags" : [
        ]
      },
      {
        "id" : "918456f3-657a-4056-8eba-c87d0c0cc08f",
        "parentId" : "5ce5e44d-2067-4f86-b137-e45b61b1ae85",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "Yea let's add an item in the migration guide.",
        "createdAt" : "2021-02-02T07:48:31Z",
        "updatedAt" : "2021-02-08T15:01:25Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "0b712010-0300-4895-83fd-1de0f69cc50f",
        "parentId" : "5ce5e44d-2067-4f86-b137-e45b61b1ae85",
        "authorId" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "body" : "> Yea let's add an item in the migration guide.\r\n\r\nDone.",
        "createdAt" : "2021-02-02T08:41:09Z",
        "updatedAt" : "2021-02-08T15:01:25Z",
        "lastEditedBy" : "594db420-88ec-4875-8cd3-0d8b0bec131c",
        "tags" : [
        ]
      }
    ],
    "commit" : "cc9d8ac1105a336997384eab475fc82458d92b01",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +130,134 @@    checkAnswer(\n      sql(s\"SHOW TBLPROPERTIES parquet_tab1('my_key1')\"),\n      Row(\"my_key1\", \"v1\") :: Nil\n    )\n  }"
  }
]