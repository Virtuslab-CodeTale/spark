[
  {
    "id" : "f30776f0-62ec-4e25-9121-18781dc204c2",
    "prId" : 26831,
    "prUrl" : "https://github.com/apache/spark/pull/26831#pullrequestreview-331096916",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "66558acd-8ca4-4ce4-88a2-52c44dc4fa21",
        "parentId" : null,
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "Can you point to me where we convert `UTF8String` to string or bytes according to this mode? `UTF8String` is a Spark class and I assume this part of code should be in Spark?",
        "createdAt" : "2019-12-12T08:54:02Z",
        "updatedAt" : "2019-12-16T13:43:37Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "a551fb4e-50ac-44c2-90f9-33c0744991f3",
        "parentId" : "66558acd-8ca4-4ce4-88a2-52c44dc4fa21",
        "authorId" : "baca2fab-b749-483f-8c77-c4db14eca9d9",
        "body" : "The code is at `HiveInspectors.wrapperFor()`.\r\n```\r\ncase _: StringObjectInspector if x.preferWritable() =>\r\n        withNullSafe(o => getStringWritable(o))\r\ncase _: StringObjectInspector =>\r\n        withNullSafe(o => o.asInstanceOf[UTF8String].toString())\r\n```\r\n\r\nBefore write data with hiveWriter, spark will use `HiveInspectors.wrapperFor()` to convert `UTF8String` to `Text` or `String`.",
        "createdAt" : "2019-12-12T09:18:02Z",
        "updatedAt" : "2019-12-16T13:43:37Z",
        "lastEditedBy" : "baca2fab-b749-483f-8c77-c4db14eca9d9",
        "tags" : [
        ]
      },
      {
        "id" : "242874c5-b1fe-436a-b5bd-6c53b2be5071",
        "parentId" : "66558acd-8ca4-4ce4-88a2-52c44dc4fa21",
        "authorId" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "body" : "ah I see. Can you add some comments here? Saying that the `DEFAULT` mode indicates Spark to create Text with the bytes of `UTF8String`.",
        "createdAt" : "2019-12-12T09:29:15Z",
        "updatedAt" : "2019-12-16T13:43:37Z",
        "lastEditedBy" : "b1f2cebb-db23-4759-b446-886279d07e99",
        "tags" : [
        ]
      },
      {
        "id" : "0ccbea10-2c0b-4667-b94f-e3a9c5decca5",
        "parentId" : "66558acd-8ca4-4ce4-88a2-52c44dc4fa21",
        "authorId" : "baca2fab-b749-483f-8c77-c4db14eca9d9",
        "body" : "OK. I will add it later.",
        "createdAt" : "2019-12-12T09:36:27Z",
        "updatedAt" : "2019-12-16T13:43:37Z",
        "lastEditedBy" : "baca2fab-b749-483f-8c77-c4db14eca9d9",
        "tags" : [
        ]
      }
    ],
    "commit" : "dda76f60fc029ca399d075a347def87ffc2c7b8d",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +139,143 @@    .getStandardObjectInspector(\n      tableDesc.getDeserializer(jobConf).getObjectInspector,\n      ObjectInspectorCopyOption.DEFAULT)\n    .asInstanceOf[StructObjectInspector]\n"
  }
]