[
  {
    "id" : "da5f8023-9122-4f3a-8693-952019109af9",
    "prId" : 25379,
    "prUrl" : "https://github.com/apache/spark/pull/25379#pullrequestreview-276229709",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d13d5f90-7aa4-4b13-8148-18e7ff6a5c6b",
        "parentId" : null,
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "@wangyum, https://github.com/apache/spark/pull/25480 this might be the cause. `UTF8String.toString()`.\r\n\r\n```\r\nnew String(getBytes(), StandardCharsets.UTF_8);\r\n```\r\n\r\nIt actually reads bytes with UTF-8. IIRC, Java mangles the data if it's not conformed as specified encoding.\r\nFor some protocols, it might be unable to recognise those mangled strings back to binary. It might be the cause.\r\n\r\nBTW, we should allow arbitrary binary, for instance, for the use case like images.\r\n\r\nIf you are unable to find the root cause, we can partially revert to the failed protocols for now.",
        "createdAt" : "2019-08-17T08:44:25Z",
        "updatedAt" : "2019-08-17T08:44:25Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      }
    ],
    "commit" : "7b506e8cf33ad055adcb4daeda9bd8e18d233fbe",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +199,203 @@    case BINARY_TYPE:\n      String strVal = value == null ? null : UTF8String.fromBytes((byte[])value).toString();\n      return stringValue(strVal);\n    case ARRAY_TYPE:\n    case MAP_TYPE:"
  },
  {
    "id" : "4e67362d-5558-40e9-a96c-cd7e484b63e0",
    "prId" : 25378,
    "prUrl" : "https://github.com/apache/spark/pull/25378#pullrequestreview-272090932",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a35f86fb-f589-4d9c-b033-93bd5865f795",
        "parentId" : null,
        "authorId" : "813f0961-9a16-4e42-a167-961d914c472c",
        "body" : "Hive 2.3 has fixed this issue:\r\nhttps://github.com/apache/spark/blob/3f102a82295a8b775d00d86683561a71303f3e39/sql/hive-thriftserver/v2.3.5/src/main/java/org/apache/hive/service/cli/ColumnValue.java#L209-L210",
        "createdAt" : "2019-08-07T16:42:26Z",
        "updatedAt" : "2019-08-07T16:42:27Z",
        "lastEditedBy" : "813f0961-9a16-4e42-a167-961d914c472c",
        "tags" : [
        ]
      }
    ],
    "commit" : "4c838b2504f9fca2c81d89616de85ce6b37c23ba",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +204,208 @@      return stringValue((String)value);\n    case NULL_TYPE:\n      return stringValue((String)value);\n    default:\n      return null;"
  }
]