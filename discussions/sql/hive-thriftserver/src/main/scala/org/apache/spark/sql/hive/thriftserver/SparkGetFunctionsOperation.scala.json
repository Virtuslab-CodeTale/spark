[
  {
    "id" : "28a6b469-b6c3-41ba-826a-4f1defb68ef9",
    "prId" : 25252,
    "prUrl" : "https://github.com/apache/spark/pull/25252#pullrequestreview-266432254",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3dbe81fd-8b73-4b30-a204-5bb50f28e323",
        "parentId" : null,
        "authorId" : "813f0961-9a16-4e42-a167-961d914c472c",
        "body" : "We do not support `FUNCTION_TYPE` now. Set it to Unknown:\r\n```java\r\n    // java.sql.DatabaseMetaData\r\n\r\n    /**\r\n     * Indicates that it is not known whether the function returns\r\n     * a result or a table.\r\n     * <P>\r\n     * A possible value for column <code>FUNCTION_TYPE</code> in the\r\n     * <code>ResultSet</code> object returned by the method\r\n     * <code>getFunctions</code>.\r\n     * @since 1.6\r\n     */\r\n    int functionResultUnknown   = 0;\r\n\r\n    /**\r\n     * Indicates that the function  does not return a table.\r\n     * <P>\r\n     * A possible value for column <code>FUNCTION_TYPE</code> in the\r\n     * <code>ResultSet</code> object returned by the method\r\n     * <code>getFunctions</code>.\r\n     * @since 1.6\r\n     */\r\n    int functionNoTable         = 1;\r\n\r\n    /**\r\n     * Indicates that the function  returns a table.\r\n     * <P>\r\n     * A possible value for column <code>FUNCTION_TYPE</code> in the\r\n     * <code>ResultSet</code> object returned by the method\r\n     * <code>getFunctions</code>.\r\n     * @since 1.6\r\n     */\r\n    int functionReturnsTable    = 2;\r\n```",
        "createdAt" : "2019-07-25T06:57:42Z",
        "updatedAt" : "2019-08-01T09:21:54Z",
        "lastEditedBy" : "813f0961-9a16-4e42-a167-961d914c472c",
        "tags" : [
        ]
      }
    ],
    "commit" : "c95db44f741b2c524090f7258adcd5414c8fa4af",
    "line" : 100,
    "diffHunk" : "@@ -1,1 +98,102 @@              funcIdentifier.funcName, // FUNCTION_NAME\n              info.getUsage, // REMARKS\n              DatabaseMetaData.functionResultUnknown.asInstanceOf[AnyRef], // FUNCTION_TYPE\n              info.getClassName) // SPECIFIC_NAME\n            rowSet.addRow(rowData);"
  },
  {
    "id" : "92170da8-33c0-4275-af03-de7aa015d021",
    "prId" : 25252,
    "prUrl" : "https://github.com/apache/spark/pull/25252#pullrequestreview-268122589",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b553a03d-95ac-4aa4-92cb-407d978ec99b",
        "parentId" : null,
        "authorId" : "2821208d-43c5-4475-94ad-36cbf84c14d8",
        "body" : "Shouldn't we handle other exceptions too?",
        "createdAt" : "2019-07-26T12:32:48Z",
        "updatedAt" : "2019-08-01T09:21:54Z",
        "lastEditedBy" : "2821208d-43c5-4475-94ad-36cbf84c14d8",
        "tags" : [
        ]
      },
      {
        "id" : "cef851a0-73f5-4167-95d1-5538473de59e",
        "parentId" : "b553a03d-95ac-4aa4-92cb-407d978ec99b",
        "authorId" : "813f0961-9a16-4e42-a167-961d914c472c",
        "body" : "Maybe it should be the same as `SparkExecuteStatementOperation`:\r\nhttps://github.com/apache/spark/blob/687dd4eb55739f802692b3c5457618fd6558e538/sql/hive-thriftserver/src/main/scala/org/apache/spark/sql/hive/thriftserver/SparkExecuteStatementOperation.scala#L261-L269",
        "createdAt" : "2019-07-29T12:16:38Z",
        "updatedAt" : "2019-08-01T09:21:54Z",
        "lastEditedBy" : "813f0961-9a16-4e42-a167-961d914c472c",
        "tags" : [
        ]
      },
      {
        "id" : "ab561ebd-3f94-43c4-ac10-c21dd4e70ca6",
        "parentId" : "b553a03d-95ac-4aa4-92cb-407d978ec99b",
        "authorId" : "2821208d-43c5-4475-94ad-36cbf84c14d8",
        "body" : "Or the same as GetTablesOperation and GetSchemasOperation for the sake of consistency?",
        "createdAt" : "2019-07-29T15:09:34Z",
        "updatedAt" : "2019-08-01T09:21:54Z",
        "lastEditedBy" : "2821208d-43c5-4475-94ad-36cbf84c14d8",
        "tags" : [
        ]
      },
      {
        "id" : "16dde5e6-25f9-4d80-9b51-a056bd7a0284",
        "parentId" : "b553a03d-95ac-4aa4-92cb-407d978ec99b",
        "authorId" : "813f0961-9a16-4e42-a167-961d914c472c",
        "body" : "+1 for same as `GetTablesOperation` and `GetSchemasOperation`.",
        "createdAt" : "2019-07-30T01:57:01Z",
        "updatedAt" : "2019-08-01T09:21:54Z",
        "lastEditedBy" : "813f0961-9a16-4e42-a167-961d914c472c",
        "tags" : [
        ]
      }
    ],
    "commit" : "c95db44f741b2c524090f7258adcd5414c8fa4af",
    "line" : 112,
    "diffHunk" : "@@ -1,1 +110,114 @@          statementId, e.getMessage, SparkUtils.exceptionString(e))\n        throw e\n    }\n    HiveThriftServer2.listener.onStatementFinish(statementId)\n  }"
  },
  {
    "id" : "813209d4-333f-4ede-92c5-4ece63624d21",
    "prId" : 25252,
    "prUrl" : "https://github.com/apache/spark/pull/25252#pullrequestreview-267850536",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "36e9e214-91f9-43ff-8a0d-e9b6fc989aee",
        "parentId" : null,
        "authorId" : "2821208d-43c5-4475-94ad-36cbf84c14d8",
        "body" : "This looks correct now: retrieve all functions available for all matching schemas.",
        "createdAt" : "2019-07-29T15:10:36Z",
        "updatedAt" : "2019-08-01T09:21:54Z",
        "lastEditedBy" : "2821208d-43c5-4475-94ad-36cbf84c14d8",
        "tags" : [
        ]
      }
    ],
    "commit" : "c95db44f741b2c524090f7258adcd5414c8fa4af",
    "line" : 90,
    "diffHunk" : "@@ -1,1 +88,92 @@      parentSession.getUsername)\n\n    try {\n      matchingDbs.foreach { db =>\n        catalog.listFunctions(db, functionPattern).foreach {"
  },
  {
    "id" : "ddb55bca-908a-4336-8572-56c7f571a5c6",
    "prId" : 25252,
    "prUrl" : "https://github.com/apache/spark/pull/25252#pullrequestreview-269498157",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8935f36f-5120-448a-b9ea-e174737e1c49",
        "parentId" : null,
        "authorId" : "e5beb795-ac0e-4bd6-ad66-708215b8ae58",
        "body" : "We also need the `onStatementClosed` handler like in the other ops.",
        "createdAt" : "2019-07-31T14:36:11Z",
        "updatedAt" : "2019-08-01T09:21:54Z",
        "lastEditedBy" : "e5beb795-ac0e-4bd6-ad66-708215b8ae58",
        "tags" : [
        ]
      },
      {
        "id" : "1fa18bfa-571b-4ef0-bbd4-0c18ba84bd2c",
        "parentId" : "8935f36f-5120-448a-b9ea-e174737e1c49",
        "authorId" : "813f0961-9a16-4e42-a167-961d914c472c",
        "body" : "Done",
        "createdAt" : "2019-08-01T09:24:10Z",
        "updatedAt" : "2019-08-01T09:24:11Z",
        "lastEditedBy" : "813f0961-9a16-4e42-a167-961d914c472c",
        "tags" : [
        ]
      }
    ],
    "commit" : "c95db44f741b2c524090f7258adcd5414c8fa4af",
    "line" : 113,
    "diffHunk" : "@@ -1,1 +111,115 @@        throw e\n    }\n    HiveThriftServer2.listener.onStatementFinish(statementId)\n  }\n}"
  }
]