[
  {
    "id" : "28728a2a-b57a-4bf4-8781-83338a2c7bfb",
    "prId" : 28651,
    "prUrl" : "https://github.com/apache/spark/pull/28651#pullrequestreview-425300959",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4bda572d-39b5-4327-a592-d8d3f9cd7228",
        "parentId" : null,
        "authorId" : "e5beb795-ac0e-4bd6-ad66-708215b8ae58",
        "body" : "@yaooqinn did you try to test that? For me setting hive.server2.thrift.http.port to 0 doesn't seem to work when trying to start it in http mode like that.",
        "createdAt" : "2020-06-05T13:11:34Z",
        "updatedAt" : "2020-06-05T13:11:34Z",
        "lastEditedBy" : "e5beb795-ac0e-4bd6-ad66-708215b8ae58",
        "tags" : [
        ]
      },
      {
        "id" : "e0324f10-6b76-4419-8603-0b709a0cb9be",
        "parentId" : "4bda572d-39b5-4327-a592-d8d3f9cd7228",
        "authorId" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "body" : "```\r\n kentyao@hulk  ~/Downloads/spark/spark-3.1.0-SNAPSHOT-bin-20200601  sbin/start-thriftserver.sh --conf spark.hadoop.hive.server2.thrift.http.port=0 --conf spark.hadoop.hive.server2.transport.mode=http\r\nstarting org.apache.spark.sql.hive.thriftserver.HiveThriftServer2, logging to /Users/kentyao/Downloads/spark/spark-3.1.0-SNAPSHOT-bin-20200601/logs/spark-kentyao-org.apache.spark.sql.hive.thriftserver.HiveThriftServer2-1-hulk.local.out\r\n kentyao@hulk  ~/Downloads/spark/spark-3.1.0-SNAPSHOT-bin-20200601 tail -f -2 /Users/kentyao/Downloads/spark/spark-3.1.0-SNAPSHOT-bin-20200601/logs/spark-kentyao-org.apache.spark.sql.hive.thriftserver.HiveThriftServer2-1-hulk.local.out\r\n20/06/05 21:26:20 INFO HiveThriftServer2: HiveThriftServer2 started\r\n20/06/05 21:26:20 INFO ThriftCLIService: Started ThriftHttpCLIService in http mode on port 54379 path=/cliservice/* with 5...500 worker threads\r\n```",
        "createdAt" : "2020-06-05T13:27:13Z",
        "updatedAt" : "2020-06-05T13:27:13Z",
        "lastEditedBy" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "tags" : [
        ]
      },
      {
        "id" : "4f4be841-255b-4adf-a078-4bb6d87a038b",
        "parentId" : "4bda572d-39b5-4327-a592-d8d3f9cd7228",
        "authorId" : "e5beb795-ac0e-4bd6-ad66-708215b8ae58",
        "body" : "Thanks... let me debug this more on my end why am I getting 0 back...",
        "createdAt" : "2020-06-05T13:31:51Z",
        "updatedAt" : "2020-06-05T13:31:51Z",
        "lastEditedBy" : "e5beb795-ac0e-4bd6-ad66-708215b8ae58",
        "tags" : [
        ]
      },
      {
        "id" : "40b08c72-c48f-4d16-a463-3765730531e3",
        "parentId" : "4bda572d-39b5-4327-a592-d8d3f9cd7228",
        "authorId" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "body" : "I verify this locally, it seems to be ok.\r\n\r\nbut in https://github.com/apache/spark/pull/28738, I just run into the same issue.",
        "createdAt" : "2020-06-05T13:32:02Z",
        "updatedAt" : "2020-06-05T13:32:02Z",
        "lastEditedBy" : "c62ded40-3015-4888-8e91-d671d0f615be",
        "tags" : [
        ]
      }
    ],
    "commit" : "099d261c126496ecccd3900fa902fec60e272f10",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +147,151 @@      // In case HIVE_SERVER2_THRIFT_HTTP_PORT or hive.server2.thrift.http.port is configured with\n      // 0 which represents any free port, we should set it to the actual one\n      portNum = connector.getLocalPort();\n      String msg = \"Started \" + ThriftHttpCLIService.class.getSimpleName() + \" in \" + schemeName\n          + \" mode on port \" + portNum + \" path=\" + httpPath + \" with \" + minWorkerThreads + \"...\""
  }
]