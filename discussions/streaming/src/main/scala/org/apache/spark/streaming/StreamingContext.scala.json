[
  {
    "id" : "222f4d1c-6c5e-4175-883c-75a528500893",
    "prId" : 25439,
    "prUrl" : "https://github.com/apache/spark/pull/25439#pullrequestreview-277187767",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6f2bfece-6c09-45ee-be7e-306f26b4fc7f",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "I understand you are suggesting that the unregister is important, but do we need this? This seems to be a behavior change.",
        "createdAt" : "2019-08-13T21:39:44Z",
        "updatedAt" : "2019-08-14T06:33:16Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "541fc74b-9f45-4531-a535-49a6c965873e",
        "parentId" : "6f2bfece-6c09-45ee-be7e-306f26b4fc7f",
        "authorId" : "07cfa59f-89bf-4efe-a1a5-0922270fbe08",
        "body" : "I think so. I believe``StreamingTab`` shouldn't be responsible for registering/unregistering the listener as it could be and even already used in other place (metrics). Moreover seems there is also a bug that if ui is disabled, listener isn't registered and metrics aren't reported. ",
        "createdAt" : "2019-08-14T06:29:11Z",
        "updatedAt" : "2019-08-14T06:33:16Z",
        "lastEditedBy" : "07cfa59f-89bf-4efe-a1a5-0922270fbe08",
        "tags" : [
        ]
      },
      {
        "id" : "5bec4cfe-5d69-4c1f-8dca-896631b387b7",
        "parentId" : "6f2bfece-6c09-45ee-be7e-306f26b4fc7f",
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "Yes I tend to agree. The behavior change is registering listeners when when the UI is disabled, but that seems like possibly a fix (we'd have to look deeper to figure out whether something _else_ registers it in this case, like `StreamingSource`). This seems like a better place to manage it, certainly unregistering, and if it's unregistered here it should be registered here.",
        "createdAt" : "2019-08-20T14:00:27Z",
        "updatedAt" : "2019-08-20T14:01:13Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      }
    ],
    "commit" : "4d5965ecb48685faed63a751100433a273695e5b",
    "line" : 37,
    "diffHunk" : "@@ -1,1 +578,582 @@            validate()\n\n            registerProgressListener()\n\n            // Start the streaming scheduler in a new thread, so that thread local properties"
  }
]