[
  {
    "id" : "18e14a43-04f6-4c14-b8b1-73d226f5f284",
    "prId" : 27744,
    "prUrl" : "https://github.com/apache/spark/pull/27744#pullrequestreview-369613974",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6d078654-4787-4863-8c9a-708f557b7cdd",
        "parentId" : null,
        "authorId" : "0c28e5da-df9b-4076-bb67-3b6878f1f4ce",
        "body" : "Is `DELTA_CHAIN_LENGTH_THRESHOLD` used other than this?",
        "createdAt" : "2020-03-02T05:33:35Z",
        "updatedAt" : "2020-03-05T14:57:52Z",
        "lastEditedBy" : "0c28e5da-df9b-4076-bb67-3b6878f1f4ce",
        "tags" : [
        ]
      },
      {
        "id" : "f36ff50b-1783-4dfe-9c20-434dd43498a4",
        "parentId" : "6d078654-4787-4863-8c9a-708f557b7cdd",
        "authorId" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "body" : "~~Only here `DELTA_CHAIN_LENGTH_THRESHOLD`.~~",
        "createdAt" : "2020-03-02T06:47:02Z",
        "updatedAt" : "2020-03-05T14:57:52Z",
        "lastEditedBy" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "tags" : [
        ]
      },
      {
        "id" : "7c4fc2da-627b-458d-9406-5fc1574085bc",
        "parentId" : "6d078654-4787-4863-8c9a-708f557b7cdd",
        "authorId" : "0c28e5da-df9b-4076-bb67-3b6878f1f4ce",
        "body" : "OK, then could we remove `DELTA_CHAIN_LENGTH_THRESHOLD`?",
        "createdAt" : "2020-03-02T06:50:33Z",
        "updatedAt" : "2020-03-05T14:57:52Z",
        "lastEditedBy" : "0c28e5da-df9b-4076-bb67-3b6878f1f4ce",
        "tags" : [
        ]
      },
      {
        "id" : "9babf17b-2687-4ab4-89e4-f672fecf8428",
        "parentId" : "6d078654-4787-4863-8c9a-708f557b7cdd",
        "authorId" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "body" : "I'm sorry, I read it wrong.`DELTA_CHAIN_LENGTH_THRESHOLD` used in two place.\r\nhttps://github.com/apache/spark/blob/5c29613428bffad5b0aae7cbcec85123a1ef4819/streaming/src/main/scala/org/apache/spark/streaming/util/StateMap.scala#L87\r\nhttps://github.com/apache/spark/blob/5c29613428bffad5b0aae7cbcec85123a1ef4819/streaming/src/main/scala/org/apache/spark/streaming/util/StateMap.scala#L102",
        "createdAt" : "2020-03-02T09:07:26Z",
        "updatedAt" : "2020-03-05T14:57:52Z",
        "lastEditedBy" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "tags" : [
        ]
      },
      {
        "id" : "caf2ad3c-7fad-453b-ae4f-9b659bfaed01",
        "parentId" : "6d078654-4787-4863-8c9a-708f557b7cdd",
        "authorId" : "e6f86365-3ac2-48b4-94f9-21ce737cf1ac",
        "body" : "Do the newly defined config's default value and the mentioned other places have to keep the same value? I mean if one change the one should the others be changed? (now the value defined in 2 distinct places)",
        "createdAt" : "2020-03-04T13:15:06Z",
        "updatedAt" : "2020-03-05T14:57:52Z",
        "lastEditedBy" : "e6f86365-3ac2-48b4-94f9-21ce737cf1ac",
        "tags" : [
        ]
      },
      {
        "id" : "c67b6e6e-2589-47d7-acc3-e09b05303f5e",
        "parentId" : "6d078654-4787-4863-8c9a-708f557b7cdd",
        "authorId" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "body" : "I'm not sure about this, I hope someone will be more clear about this.\r\nMaybe we need move `DELTA_CHAIN_LENGTH_THRESHOLD`  form `StateMap.scala` to `StreamingConf.scala`?",
        "createdAt" : "2020-03-04T15:16:03Z",
        "updatedAt" : "2020-03-05T14:57:52Z",
        "lastEditedBy" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "tags" : [
        ]
      },
      {
        "id" : "a839ab7c-81b1-4a9a-8b1b-014231073b60",
        "parentId" : "6d078654-4787-4863-8c9a-708f557b7cdd",
        "authorId" : "e6f86365-3ac2-48b4-94f9-21ce737cf1ac",
        "body" : "I've had a deeper look and `DELTA_CHAIN_LENGTH_THRESHOLD` is `OpenHashMapBasedStateMap` specific default value. I don't think we have to move it but I think the newly extracted configuration must use the constant.",
        "createdAt" : "2020-03-05T12:05:02Z",
        "updatedAt" : "2020-03-05T14:57:52Z",
        "lastEditedBy" : "e6f86365-3ac2-48b4-94f9-21ce737cf1ac",
        "tags" : [
        ]
      },
      {
        "id" : "21ef4798-2efc-463b-8b32-e84978b9d60c",
        "parentId" : "6d078654-4787-4863-8c9a-708f557b7cdd",
        "authorId" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "body" : "OK.",
        "createdAt" : "2020-03-05T14:30:03Z",
        "updatedAt" : "2020-03-05T14:57:52Z",
        "lastEditedBy" : "f26e51a2-ed90-47c7-9856-a6cc134b7f39",
        "tags" : [
        ]
      }
    ],
    "commit" : "00fde50a7d3144927cbc133709b270dee9397ced",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +63,67 @@\n  def create[K: ClassTag, S: ClassTag](conf: SparkConf): StateMap[K, S] = {\n    val deltaChainThreshold = conf.get(SESSION_BY_KEY_DELTA_CHAIN_THRESHOLD)\n    new OpenHashMapBasedStateMap[K, S](deltaChainThreshold)\n  }"
  }
]