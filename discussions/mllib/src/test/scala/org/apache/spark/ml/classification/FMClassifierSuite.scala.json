[
  {
    "id" : "ae33ac3e-7732-4b6a-84fa-16fb5b6ace22",
    "prId" : 26124,
    "prUrl" : "https://github.com/apache/spark/pull/26124#pullrequestreview-330277644",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d737b8bb-d574-460a-a7f7-dbf240436e9c",
        "parentId" : null,
        "authorId" : "685f805b-e4fa-4f21-b066-58afcecf9ce6",
        "body" : "Can we compare the fitted coefficients with libFM?\r\n  ",
        "createdAt" : "2019-11-01T03:26:50Z",
        "updatedAt" : "2019-12-20T03:05:30Z",
        "lastEditedBy" : "685f805b-e4fa-4f21-b066-58afcecf9ce6",
        "tags" : [
        ]
      },
      {
        "id" : "86594660-71e0-42b2-8486-a78775a1ed13",
        "parentId" : "d737b8bb-d574-460a-a7f7-dbf240436e9c",
        "authorId" : "aad32568-effa-4b60-806a-3eba48b592f7",
        "body" : "I want to compare with libFM, but randomly generate a binary dataset, FM can't fit the dataset perfectly. Generally, I get very small loss value, but the parameters are not exactly same every time (also in libFM).\r\n\r\nMy current test method is that for mse to generate a feature-interaction dataset by bias/linearVector/factorMatrix, FMRegressor needs to fit this dataset perfectly, bias/linearVector needs same with real bias/linearVector, every `<v_i, v_j>` needs same that calculates by factorMatrix.\r\n\r\nHowever, for FMClassifier, it is difficult to generate a binary feature-interaction dataset, so for the FMClassifier, I don't verify the correctness of interaction logic (that is verify in mse), only verify the correctness of logloss logic.",
        "createdAt" : "2019-11-05T03:44:51Z",
        "updatedAt" : "2019-12-20T03:05:30Z",
        "lastEditedBy" : "aad32568-effa-4b60-806a-3eba48b592f7",
        "tags" : [
        ]
      },
      {
        "id" : "6398d677-1036-4fb0-9345-6770840bb70b",
        "parentId" : "d737b8bb-d574-460a-a7f7-dbf240436e9c",
        "authorId" : "685f805b-e4fa-4f21-b066-58afcecf9ce6",
        "body" : "I still doubt whether existing testsuite is enough. \r\n1, I suggest to add several testsuites to check whether `FMClassifier` and `FMRegressor` can learn the intercept correctly. \r\nLike '// Test if we can correctly learn Y = 0.1 + 1.2*X1 - 1.3*X2 + 20*X1*X2' in https://github.com/apache/spark/pull/5591/files\r\n\r\n2, I suggest to add some testcases with `fitBias==false` or/and `fitLinear==false`\r\n",
        "createdAt" : "2019-11-25T10:35:21Z",
        "updatedAt" : "2019-12-20T03:05:30Z",
        "lastEditedBy" : "685f805b-e4fa-4f21-b066-58afcecf9ce6",
        "tags" : [
        ]
      },
      {
        "id" : "e6de83d2-d317-4442-8535-3e6b41c923ab",
        "parentId" : "d737b8bb-d574-460a-a7f7-dbf240436e9c",
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "Is this resolved? I'd also love to have at least one test that compares output to some other library, even if the test can only assert some approximate match in loss, etc.",
        "createdAt" : "2019-12-10T16:52:27Z",
        "updatedAt" : "2019-12-20T03:05:30Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      },
      {
        "id" : "f1797c56-e5c5-4af7-b3ff-59927a4888c5",
        "parentId" : "d737b8bb-d574-460a-a7f7-dbf240436e9c",
        "authorId" : "aad32568-effa-4b60-806a-3eba48b592f7",
        "body" : "> Is this resolved? I'd also love to have at least one test that compares output to some other library, even if the test can only assert some approximate match in loss, etc.\r\n\r\nNow, test method is FM fit a dataset perfectly (loss closed to zero and model's weights closed to real weights), the dataset is generated by a group weight (include bias/linear/factor weights). I think it is enough.",
        "createdAt" : "2019-12-11T03:16:16Z",
        "updatedAt" : "2019-12-20T03:05:30Z",
        "lastEditedBy" : "aad32568-effa-4b60-806a-3eba48b592f7",
        "tags" : [
        ]
      }
    ],
    "commit" : "8212e0324ad839702115ad8d0eb7fb8a87b131c3",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +26,30 @@import org.apache.spark.sql.{DataFrame, Row}\n\nclass FMClassifierSuite extends MLTest with DefaultReadWriteTest {\n\n  import testImplicits._"
  }
]