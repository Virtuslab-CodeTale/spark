[
  {
    "id" : "3a467610-7afc-4b0c-a28e-85a6d1e70ab1",
    "prId" : 30548,
    "prUrl" : "https://github.com/apache/spark/pull/30548#pullrequestreview-543380692",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e5ebb552-032b-41b3-8b64-a360890c01b5",
        "parentId" : null,
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "Is this actually more efficient than slice? Likewise above.",
        "createdAt" : "2020-11-30T15:32:04Z",
        "updatedAt" : "2020-12-03T02:34:43Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      },
      {
        "id" : "68333bd2-26bb-4849-8bce-71b2ff537c23",
        "parentId" : "e5ebb552-032b-41b3-8b64-a360890c01b5",
        "authorId" : "685f805b-e4fa-4f21-b066-58afcecf9ce6",
        "body" : "I guess so, I will do a simple test.",
        "createdAt" : "2020-12-03T01:52:23Z",
        "updatedAt" : "2020-12-03T02:34:43Z",
        "lastEditedBy" : "685f805b-e4fa-4f21-b066-58afcecf9ce6",
        "tags" : [
        ]
      }
    ],
    "commit" : "3ba4fda47dd7627014b0aacfcbdc1b0a93fd924a",
    "line" : 40,
    "diffHunk" : "@@ -1,1 +537,541 @@        val array = Array.ofDim[Double](size)\n        var i = 0\n        while (i < size) { array(i) = wordVectors(offset + i); i += 1 }\n        Vectors.dense(array)\n      case None =>"
  },
  {
    "id" : "9d294021-fdbd-43b2-8106-7245cd90da86",
    "prId" : 30548,
    "prUrl" : "https://github.com/apache/spark/pull/30548#pullrequestreview-543407406",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "142c7603-d1a6-46e2-9282-947cd33231c6",
        "parentId" : null,
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "How much does this save, if it only happens once and has to happen to use the model?",
        "createdAt" : "2020-11-30T15:34:21Z",
        "updatedAt" : "2020-12-03T02:34:43Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      },
      {
        "id" : "b07771c3-dcc6-457e-9a88-21d7b786d0fe",
        "parentId" : "142c7603-d1a6-46e2-9282-947cd33231c6",
        "authorId" : "685f805b-e4fa-4f21-b066-58afcecf9ce6",
        "body" : "this var `wordVecNorms` is only used in method `findSynonyms` in the .mllib.w2v; however, this `findSynonyms`  is never used in the .ml side. So I think we can make it lazy.",
        "createdAt" : "2020-12-03T01:55:09Z",
        "updatedAt" : "2020-12-03T02:34:43Z",
        "lastEditedBy" : "685f805b-e4fa-4f21-b066-58afcecf9ce6",
        "tags" : [
        ]
      },
      {
        "id" : "2351dadb-0565-4743-8676-6b8dad0b3c32",
        "parentId" : "142c7603-d1a6-46e2-9282-947cd33231c6",
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "OK fair enough. There are use cases here that would never need this calculated?",
        "createdAt" : "2020-12-03T02:49:12Z",
        "updatedAt" : "2020-12-03T02:49:12Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      },
      {
        "id" : "08306eb1-8d60-4962-83b4-23d89241af78",
        "parentId" : "142c7603-d1a6-46e2-9282-947cd33231c6",
        "authorId" : "685f805b-e4fa-4f21-b066-58afcecf9ce6",
        "body" : "`however, this findSynonyms is never used in the .ml side. So I think we can make it lazy.`\r\n\r\nI am wrong. this var `wordVecNorms` is used in methods `findSynonyms` and `findSynonymsArray` in the .ml side. Since it is not used in `transform`, so we can still mark it lazy",
        "createdAt" : "2020-12-03T03:05:15Z",
        "updatedAt" : "2020-12-03T03:05:16Z",
        "lastEditedBy" : "685f805b-e4fa-4f21-b066-58afcecf9ce6",
        "tags" : [
        ]
      }
    ],
    "commit" : "3ba4fda47dd7627014b0aacfcbdc1b0a93fd924a",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +509,513 @@  // wordVecNorms: Array of length numWords, each value being the Euclidean norm\n  //               of the wordVector.\n  private lazy val wordVecNorms: Array[Float] = {\n    val size = vectorSize\n    Array.tabulate(numWords)(i => blas.snrm2(size, wordVectors, i * size, 1))"
  }
]