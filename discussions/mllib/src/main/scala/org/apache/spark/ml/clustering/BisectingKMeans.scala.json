[
  {
    "id" : "4401a95b-9877-467c-8342-4b21e9db3012",
    "prId" : 27035,
    "prUrl" : "https://github.com/apache/spark/pull/27035#pullrequestreview-340260910",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "df744afc-eda8-4454-9699-433bff779e16",
        "parentId" : null,
        "authorId" : "685f805b-e4fa-4f21-b066-58afcecf9ce6",
        "body" : "Maybe we no longer need to (or should not) handlePersistence in the .ml sides? for KMeans & BisectingKMeans?  @srowen \r\n\r\nNo matter whether input dataset is cached, we always cache a training rdd (`Vector`s in .ml, or `VectorWithNorm`s in .mlllib). So we should cache the one with norms for better performace.\r\n",
        "createdAt" : "2020-01-07T10:44:23Z",
        "updatedAt" : "2020-01-07T19:10:27Z",
        "lastEditedBy" : "685f805b-e4fa-4f21-b066-58afcecf9ce6",
        "tags" : [
        ]
      },
      {
        "id" : "f3aa02f6-1f31-4229-be6d-3e56f74d49ab",
        "parentId" : "df744afc-eda8-4454-9699-433bff779e16",
        "authorId" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "body" : "The persistence strategy is inconsistent. I'd prefer to standardize it more than change it though. We want to avoid silently taking a big performance hit by not caching. Either that means warning the user or caching internal RDDs for the user.",
        "createdAt" : "2020-01-07T14:27:06Z",
        "updatedAt" : "2020-01-07T19:10:27Z",
        "lastEditedBy" : "707cf6e1-750c-4aea-8774-f79c13fb7add",
        "tags" : [
        ]
      },
      {
        "id" : "1585ce8e-f89d-4e50-a475-1962678810b3",
        "parentId" : "df744afc-eda8-4454-9699-433bff779e16",
        "authorId" : "685f805b-e4fa-4f21-b066-58afcecf9ce6",
        "body" : "I guess we should suggest end uers NOT to cache input DFs/RDDs, and the impls should always cache necessary internal DFs/RDDs.\r\nSome time user caching DFs outside of impl will not help performance too much, for example in decision tree, vectors will be convert to treepoints, and then the cached vectors are not used any more.",
        "createdAt" : "2020-01-09T02:35:54Z",
        "updatedAt" : "2020-01-09T02:35:54Z",
        "lastEditedBy" : "685f805b-e4fa-4f21-b066-58afcecf9ce6",
        "tags" : [
        ]
      }
    ],
    "commit" : "6ca078ec59b1818500d5b86dd2ca7a80eb670808",
    "line" : 56,
    "diffHunk" : "@@ -1,1 +290,294 @@      case Row(point: Vector, weight: Double) => (OldVectors.fromML(point), weight)\n    }\n    if (handlePersistence) {\n      instances.persist(StorageLevel.MEMORY_AND_DISK)\n    }"
  }
]