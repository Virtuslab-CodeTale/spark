[
  {
    "id" : "7ee27723-ea26-4a59-9bbf-669c3e3f1f74",
    "prId" : 24851,
    "prUrl" : "https://github.com/apache/spark/pull/24851#pullrequestreview-307005523",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "43b0dbf7-4843-46a7-9d7a-764c17830ec4",
        "parentId" : null,
        "authorId" : "0c812942-02cb-4975-9748-394d1387affa",
        "body" : "Does it compile into a Java interface? Having `object` and `trait` of the same name, Scala compiler might create abstract class instead.",
        "createdAt" : "2019-07-16T18:07:52Z",
        "updatedAt" : "2019-10-29T08:54:44Z",
        "lastEditedBy" : "0c812942-02cb-4975-9748-394d1387affa",
        "tags" : [
        ]
      },
      {
        "id" : "68e05af3-20ce-4f78-b70d-1c0849951a01",
        "parentId" : "43b0dbf7-4843-46a7-9d7a-764c17830ec4",
        "authorId" : "0c812942-02cb-4975-9748-394d1387affa",
        "body" : "Btw, do you think `GraphSession` is a better name here? Cypher is an implementation. `GraphSession.cypher` and `GraphSession.gql` (future extension) seem more nature than `CypherSession.gql`.",
        "createdAt" : "2019-07-18T23:35:25Z",
        "updatedAt" : "2019-10-29T08:54:44Z",
        "lastEditedBy" : "0c812942-02cb-4975-9748-394d1387affa",
        "tags" : [
        ]
      },
      {
        "id" : "9e824d6c-23db-4f33-952d-ffb81ecfe8a9",
        "parentId" : "43b0dbf7-4843-46a7-9d7a-764c17830ec4",
        "authorId" : "cf7f0cf3-88a3-4a5f-87f7-04ccf6a74f3b",
        "body" : "> Does it compile into a Java interface? Having `object` and `trait` of the same name, Scala compiler might create abstract class instead.\r\n\r\nI tested it on the PoC branch. Works fine so far: https://github.com/apache/spark/pull/24297/commits/4d3363802246ac3dde80910cc9cfea2510b6801b",
        "createdAt" : "2019-07-25T11:39:17Z",
        "updatedAt" : "2019-10-29T08:54:44Z",
        "lastEditedBy" : "cf7f0cf3-88a3-4a5f-87f7-04ccf6a74f3b",
        "tags" : [
        ]
      },
      {
        "id" : "2dc301ee-ec33-4bd3-be1a-30fb0ccc6d63",
        "parentId" : "43b0dbf7-4843-46a7-9d7a-764c17830ec4",
        "authorId" : "cf7f0cf3-88a3-4a5f-87f7-04ccf6a74f3b",
        "body" : "> Btw, do you think `GraphSession` is a better name here? Cypher is an implementation. `GraphSession.cypher` and `GraphSession.gql` (future extension) seem more nature than `CypherSession.gql`.\r\n\r\nIf we want to provide a session that offers `cypher` and `gql`, I would prefer extending the `CypherSession` trait to not enforce implementations to care about both. However, I think that question also depends on how we access the graph algorithms. If they are accessible via the session, renaming it to `GraphSession` sounds reasonable to me. I think we can postpone that decision and change it later if necessary.",
        "createdAt" : "2019-07-25T11:43:17Z",
        "updatedAt" : "2019-10-29T08:54:44Z",
        "lastEditedBy" : "cf7f0cf3-88a3-4a5f-87f7-04ccf6a74f3b",
        "tags" : [
        ]
      },
      {
        "id" : "8bb1f279-5df4-4186-ad3f-8288f6e4afb2",
        "parentId" : "43b0dbf7-4843-46a7-9d7a-764c17830ec4",
        "authorId" : "cf7f0cf3-88a3-4a5f-87f7-04ccf6a74f3b",
        "body" : "> Does it compile into a Java interface? Having `object` and `trait` of the same name, Scala compiler might create abstract class instead.\r\n\r\nAlso, the constants are available in Java via e.g. `CypherSession.ID_COLUMN();`",
        "createdAt" : "2019-07-25T11:50:40Z",
        "updatedAt" : "2019-10-29T08:54:44Z",
        "lastEditedBy" : "cf7f0cf3-88a3-4a5f-87f7-04ccf6a74f3b",
        "tags" : [
        ]
      },
      {
        "id" : "73cea724-7c33-4017-a929-c6f32d882bd3",
        "parentId" : "43b0dbf7-4843-46a7-9d7a-764c17830ec4",
        "authorId" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "body" : "btw, I like `GraphSession`, too. I think the name would be better not to depend on implementations.",
        "createdAt" : "2019-10-25T06:56:59Z",
        "updatedAt" : "2019-10-29T08:54:44Z",
        "lastEditedBy" : "044062b3-9d96-4ec3-a1e2-3a2f595bbc02",
        "tags" : [
        ]
      }
    ],
    "commit" : "44a955bdbe7f9ef88b69193635e1678668584ea3",
    "line" : 168,
    "diffHunk" : "@@ -1,1 +166,170 @@ */\n@Evolving\ntrait CypherSession {\n\n  def sparkSession: SparkSession"
  },
  {
    "id" : "0a04742f-32fe-4499-a038-be9001c636e5",
    "prId" : 24851,
    "prUrl" : "https://github.com/apache/spark/pull/24851#pullrequestreview-266585030",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9e6c6ae3-2f0f-4571-b3b2-bc8eddd2dd2e",
        "parentId" : null,
        "authorId" : "0c812942-02cb-4975-9748-394d1387affa",
        "body" : "Could you add a `seealso` link to Cypher definition?",
        "createdAt" : "2019-07-16T18:20:52Z",
        "updatedAt" : "2019-10-29T08:54:44Z",
        "lastEditedBy" : "0c812942-02cb-4975-9748-394d1387affa",
        "tags" : [
        ]
      },
      {
        "id" : "16ecf8e8-ff4a-48f8-820b-4a6109a7e886",
        "parentId" : "9e6c6ae3-2f0f-4571-b3b2-bc8eddd2dd2e",
        "authorId" : "cf7f0cf3-88a3-4a5f-87f7-04ccf6a74f3b",
        "body" : "I added `@see <a href=\"https://neo4j.com/docs/cypher-manual/current/\">` to all `cypher` methods.",
        "createdAt" : "2019-07-25T12:17:19Z",
        "updatedAt" : "2019-10-29T08:54:44Z",
        "lastEditedBy" : "cf7f0cf3-88a3-4a5f-87f7-04ccf6a74f3b",
        "tags" : [
        ]
      }
    ],
    "commit" : "44a955bdbe7f9ef88b69193635e1678668584ea3",
    "line" : 177,
    "diffHunk" : "@@ -1,1 +175,179 @@   * @param graph [[PropertyGraph]] on which the query is executed\n   * @param query Cypher query to execute\n   * @since 3.0.0\n   */\n  def cypher(graph: PropertyGraph, query: String): CypherResult"
  },
  {
    "id" : "54eb6dc4-5bef-4312-b81a-72a71a1abba2",
    "prId" : 24851,
    "prUrl" : "https://github.com/apache/spark/pull/24851#pullrequestreview-301451280",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "27e95f36-e949-4b73-869e-c950eabbabf6",
        "parentId" : null,
        "authorId" : "0c812942-02cb-4975-9748-394d1387affa",
        "body" : "What is it? Could you provide some examples?",
        "createdAt" : "2019-07-16T18:32:50Z",
        "updatedAt" : "2019-10-29T08:54:44Z",
        "lastEditedBy" : "0c812942-02cb-4975-9748-394d1387affa",
        "tags" : [
        ]
      },
      {
        "id" : "b45a69ba-aacc-4388-8f69-4c93687df96c",
        "parentId" : "27e95f36-e949-4b73-869e-c950eabbabf6",
        "authorId" : "cf7f0cf3-88a3-4a5f-87f7-04ccf6a74f3b",
        "body" : "Cypher queries can take a map of parameters as input, e.g. to avoid manual string building. I added `@see <a href=\"https://neo4j.com/docs/cypher-manual/current/syntax/parameters/\">` to each `cypher` method.",
        "createdAt" : "2019-07-25T12:20:20Z",
        "updatedAt" : "2019-10-29T08:54:44Z",
        "lastEditedBy" : "cf7f0cf3-88a3-4a5f-87f7-04ccf6a74f3b",
        "tags" : [
        ]
      },
      {
        "id" : "a3048f54-2c13-4c7f-8cd5-0120cd8f1c25",
        "parentId" : "27e95f36-e949-4b73-869e-c950eabbabf6",
        "authorId" : "0c812942-02cb-4975-9748-394d1387affa",
        "body" : "Don't see the `@see` link.",
        "createdAt" : "2019-10-14T17:55:45Z",
        "updatedAt" : "2019-10-29T08:54:44Z",
        "lastEditedBy" : "0c812942-02cb-4975-9748-394d1387affa",
        "tags" : [
        ]
      }
    ],
    "commit" : "44a955bdbe7f9ef88b69193635e1678668584ea3",
    "line" : 202,
    "diffHunk" : "@@ -1,1 +200,204 @@   * @param graph      [[PropertyGraph]] on which the query is executed\n   * @param query      Cypher query to execute\n   * @param parameters parameters used by the Cypher query\n   * @since 3.0.0\n   */"
  },
  {
    "id" : "906a1d17-aea9-45b8-9ba9-ebf4c26ac66a",
    "prId" : 24851,
    "prUrl" : "https://github.com/apache/spark/pull/24851#pullrequestreview-266611766",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a92a2057-03fd-4dd0-b745-d2c018da7a22",
        "parentId" : null,
        "authorId" : "0c812942-02cb-4975-9748-394d1387affa",
        "body" : "Is this column optional for relationships?",
        "createdAt" : "2019-07-16T19:01:23Z",
        "updatedAt" : "2019-10-29T08:54:44Z",
        "lastEditedBy" : "0c812942-02cb-4975-9748-394d1387affa",
        "tags" : [
        ]
      },
      {
        "id" : "0e00d2e5-aead-42ff-ba72-61a72deab077",
        "parentId" : "a92a2057-03fd-4dd0-b745-d2c018da7a22",
        "authorId" : "cf7f0cf3-88a3-4a5f-87f7-04ccf6a74f3b",
        "body" : "No, relationships have their own identifier to allow for multiple edges between the same pair of nodes.",
        "createdAt" : "2019-07-25T13:07:25Z",
        "updatedAt" : "2019-10-29T08:54:44Z",
        "lastEditedBy" : "cf7f0cf3-88a3-4a5f-87f7-04ccf6a74f3b",
        "tags" : [
        ]
      }
    ],
    "commit" : "44a955bdbe7f9ef88b69193635e1678668584ea3",
    "line" : 259,
    "diffHunk" : "@@ -1,1 +257,261 @@   *\n   * {{{\n   *     Id column:        `$ID`            (nodes and relationships)\n   *     SourceId column:  `$SOURCE_ID`     (relationships)\n   *     TargetId column:  `$TARGET_ID`     (relationships)"
  },
  {
    "id" : "85629a51-aa6b-4f35-ab42-c5e1f05233ba",
    "prId" : 24851,
    "prUrl" : "https://github.com/apache/spark/pull/24851#pullrequestreview-266652505",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cb3553ec-485d-4ee4-b348-5e1be7efa287",
        "parentId" : null,
        "authorId" : "0c812942-02cb-4975-9748-394d1387affa",
        "body" : "Should mention the expected type here and verify the types in the implementation.",
        "createdAt" : "2019-07-18T23:04:41Z",
        "updatedAt" : "2019-10-29T08:54:44Z",
        "lastEditedBy" : "0c812942-02cb-4975-9748-394d1387affa",
        "tags" : [
        ]
      },
      {
        "id" : "6c0e45bb-0391-47e4-a34c-462b981c9448",
        "parentId" : "cb3553ec-485d-4ee4-b348-5e1be7efa287",
        "authorId" : "cf7f0cf3-88a3-4a5f-87f7-04ccf6a74f3b",
        "body" : "I added validation for the label columns. The DataType for id columns depends on the implementation.",
        "createdAt" : "2019-07-25T14:10:54Z",
        "updatedAt" : "2019-10-29T08:54:44Z",
        "lastEditedBy" : "cf7f0cf3-88a3-4a5f-87f7-04ccf6a74f3b",
        "tags" : [
        ]
      }
    ],
    "commit" : "44a955bdbe7f9ef88b69193635e1678668584ea3",
    "line" : 263,
    "diffHunk" : "@@ -1,1 +261,265 @@   *     TargetId column:  `$TARGET_ID`     (relationships)\n   *\n   *     Label columns:    `:{LABEL_NAME}`  (nodes)\n   *     RelType columns:  `:{REL_TYPE}`    (relationships)\n   *"
  },
  {
    "id" : "7bec7075-ab5d-4878-a71e-451f4338994f",
    "prId" : 24851,
    "prUrl" : "https://github.com/apache/spark/pull/24851#pullrequestreview-301001410",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c8055749-1941-4cfa-beff-ce961e451af0",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Let's move the most of function logic (line 168 ~229) to `object CyperSession` by making an explicit helper function.",
        "createdAt" : "2019-10-11T14:51:32Z",
        "updatedAt" : "2019-10-29T08:54:44Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "e08cd2a1-b2e9-4fab-98c7-b8fe683767cc",
        "parentId" : "c8055749-1941-4cfa-beff-ce961e451af0",
        "authorId" : "23eb82aa-4e11-441d-968f-aee66e7aac69",
        "body" : "How do you propose we inject the `Logging` instance to still be able to log the warning?",
        "createdAt" : "2019-10-11T16:01:07Z",
        "updatedAt" : "2019-10-29T08:54:44Z",
        "lastEditedBy" : "23eb82aa-4e11-441d-968f-aee66e7aac69",
        "tags" : [
        ]
      },
      {
        "id" : "116ad2bf-4869-4e46-8c9f-5c69d0d4fc10",
        "parentId" : "c8055749-1941-4cfa-beff-ce961e451af0",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "That is not the main reason to ask this. The logic is really helper logic. We had better move that out to this `trait`.",
        "createdAt" : "2019-10-11T16:13:31Z",
        "updatedAt" : "2019-10-29T08:54:44Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "50841cda-0d8f-4b1b-beca-157509aa8323",
        "parentId" : "c8055749-1941-4cfa-beff-ce961e451af0",
        "authorId" : "23eb82aa-4e11-441d-968f-aee66e7aac69",
        "body" : "I agree.",
        "createdAt" : "2019-10-12T11:32:13Z",
        "updatedAt" : "2019-10-29T08:54:44Z",
        "lastEditedBy" : "23eb82aa-4e11-441d-968f-aee66e7aac69",
        "tags" : [
        ]
      }
    ],
    "commit" : "44a955bdbe7f9ef88b69193635e1678668584ea3",
    "line" : 277,
    "diffHunk" : "@@ -1,1 +275,279 @@   * @since 3.0.0\n   */\n  def createGraph(nodes: Dataset[Row], relationships: Dataset[Row]): PropertyGraph = {\n    val nodeFrames = CypherSession.extractNodeDatasets(nodes)\n    val relationshipFrames = CypherSession.extractRelationshipDatasets(relationships)"
  }
]