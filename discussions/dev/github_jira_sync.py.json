[
  {
    "id" : "70a014d3-eaed-4d61-869e-0f5bb9a66784",
    "prId" : 25289,
    "prUrl" : "https://github.com/apache/spark/pull/25289#pullrequestreview-272640898",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b5520e2c-67a8-4876-9401-474b70c857e3",
        "parentId" : null,
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "@WeichenXu123, can use `u'{\"labels\":[%s]}' % labels).encode('utf-8')` so that it's always an unicode in both Python 2 and Python 3, and always executes same code path?\r\n\r\nCurrently,\r\n- In Python 2, it will be bytes -> unicodes -> bytes (by implicit conversion)\r\n- in Python 3, unicodes -> bytes.\r\n\r\nAfter using `u`, \r\n\r\nBoth will do unicodes -> bytes.",
        "createdAt" : "2019-08-08T15:00:41Z",
        "updatedAt" : "2019-08-08T15:00:41Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "0b381ce0-93f4-45ab-b3e9-04a9eae44bc5",
        "parentId" : "b5520e2c-67a8-4876-9401-474b70c857e3",
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "Ah, hm, there are multiple places like this.\r\nOkay, NVM. Components won't likely be out of ascii (which might be happen during implicit conversion bytes -> unicodes in Python 2)",
        "createdAt" : "2019-08-08T15:07:34Z",
        "updatedAt" : "2019-08-08T15:07:34Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      }
    ],
    "commit" : "d26140d5ab67231c1f36578c08f9cef62a3d69b9",
    "line" : 51,
    "diffHunk" : "@@ -1,1 +130,134 @@    labels = ', '.join(('\"%s\"' % c) for c in jira_components)\n    try:\n        request = Request(url, data=('{\"labels\":[%s]}' % labels).encode('utf-8'))\n        request.add_header('Content-Type', 'application/json')\n        request.add_header('Authorization', 'token %s' % GITHUB_OAUTH_KEY)"
  },
  {
    "id" : "afb5df99-91dd-4845-8387-9ffa1e7d4fb9",
    "prId" : 24874,
    "prUrl" : "https://github.com/apache/spark/pull/24874#pullrequestreview-249746407",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "83b76058-391c-4a01-8b0c-e70a7b37f11a",
        "parentId" : null,
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "Just wanted to leave a note that `filter` returns a generator from Python 3... in fact this whole script should be fixed anyway as of SPARK-27889 separately.\r\n\r\n```python\r\n>>> filter(lambda x: x, ['a'])[0]\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nTypeError: 'filter' object is not subscriptable\r\n>>> list(filter(lambda x: x, ['a']))[0]\r\n'a'\r\n```",
        "createdAt" : "2019-06-14T07:28:20Z",
        "updatedAt" : "2019-06-14T07:28:20Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      }
    ],
    "commit" : "bcecc49b15a8382d35fa12232cb0b25b13e6bffb",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +78,82 @@\n        # Check if there is another page\n        link_headers = filter(lambda k: k.startswith(\"Link\"), page.info().headers)\n        if not link_headers or \"next\" not in link_headers[0]:\n            has_next_page = False"
  },
  {
    "id" : "da20d8ef-7bdb-480c-ba24-9297aa3b639a",
    "prId" : 24874,
    "prUrl" : "https://github.com/apache/spark/pull/24874#pullrequestreview-249760002",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b0cc160b-39a7-4c75-8678-f85335a83249",
        "parentId" : null,
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "`not link_headers` is an idiomatic to check if the list is empty. I personally encourage people to use explicit `len(...) > 0` comparison (and arguably other projects do too more (?)). But I guess it's my preference just for now. It might be fine.",
        "createdAt" : "2019-06-14T07:30:33Z",
        "updatedAt" : "2019-06-14T07:30:55Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "1fa3b403-369c-4b07-b5b2-b4e4a32bb72d",
        "parentId" : "b0cc160b-39a7-4c75-8678-f85335a83249",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "I'll use `len(...) > 0` for the next time~",
        "createdAt" : "2019-06-14T08:02:44Z",
        "updatedAt" : "2019-06-14T08:02:44Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "bcecc49b15a8382d35fa12232cb0b25b13e6bffb",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +79,83 @@        # Check if there is another page\n        link_headers = filter(lambda k: k.startswith(\"Link\"), page.info().headers)\n        if not link_headers or \"next\" not in link_headers[0]:\n            has_next_page = False\n        else:"
  }
]