[
  {
    "id" : "d52beba0-938f-4add-a7b5-fcd777c48339",
    "prId" : 27242,
    "prUrl" : "https://github.com/apache/spark/pull/27242#pullrequestreview-344282613",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b7228c5a-a10c-43f4-887a-a9dffa77cc09",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "This came from `lint-java`.",
        "createdAt" : "2020-01-16T23:26:11Z",
        "updatedAt" : "2020-01-16T23:35:28Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "9c8e204ccbd08127e457f5507b1eaf41b78e222b",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +18,22 @@#\n\nSCRIPT_DIR=\"$( cd \"$( dirname \"$0\" )\" && pwd )\"\n\nSPARK_PROFILES=${1:-\"-Pmesos -Pkubernetes -Pyarn -Pspark-ganglia-lgpl -Pkinesis-asl -Phive-thriftserver -Phive -Pdocker-integration-tests -Pkubernetes-integration-tests\"}"
  },
  {
    "id" : "53b8dd49-0bf9-41f5-b570-bd4b525708a2",
    "prId" : 27242,
    "prUrl" : "https://github.com/apache/spark/pull/27242#pullrequestreview-345698168",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "950920d6-af8d-4dee-80fd-88d8506da6d8",
        "parentId" : null,
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "So, I guess this is a temp fix and we should fix SBT build to use HTTPs correctly .. am I correct?\r\n\r\nIf this was a non-temp fix, we should rather have another script like `lint-java` vs `sbt-checkstyle`. Ideally we should use SBT in PR builder to save times.",
        "createdAt" : "2020-01-21T07:07:42Z",
        "updatedAt" : "2020-01-21T07:07:43Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "761e87f5-b507-4137-806f-bb473d8a6556",
        "parentId" : "950920d6-af8d-4dee-80fd-88d8506da6d8",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "? This is a permanent fix for `GitHub Action` and this is not for PR Builder.\r\nFor SBT, if you want, you can make a PR~",
        "createdAt" : "2020-01-21T07:15:56Z",
        "updatedAt" : "2020-01-21T07:15:56Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "2342130b-af66-4865-900c-b2e5973c0105",
        "parentId" : "950920d6-af8d-4dee-80fd-88d8506da6d8",
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "The problem is it affects PR builder:\r\n\r\nhttps://github.com/apache/spark/blob/32af7004a254107340df908e8dd91a0bc22e068e/dev/run-tests.py#L182-L187\r\n\r\nand switching to Maven wasn't encouraged in PR builder; so I had to add such script to use SBT `sbt-checkstyle`.",
        "createdAt" : "2020-01-21T07:22:19Z",
        "updatedAt" : "2020-01-21T07:23:45Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "ecfc6736-4254-42b4-b8c0-82f97fb7a41a",
        "parentId" : "950920d6-af8d-4dee-80fd-88d8506da6d8",
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "I would like to make a fix for SBT but wasn't able to reproduce. I removed all `.m2` and `.ivy2` but it still works and uses `[info] downloading https://repo1.maven.org/maven2`.\r\n\r\nIf I am not wrong SBT uses HTTPs:\r\n\r\nhttps://github.com/apache/spark/blob/a3357dfccacadfb40ab103ba1ff3c0927e806dd2/project/SparkBuild.scala#L227\r\n\r\nhttps://www.scala-sbt.org/0.13/docs/Resolvers.html\r\n\r\nSo, I was wondering how to reproduce.",
        "createdAt" : "2020-01-21T07:26:22Z",
        "updatedAt" : "2020-01-21T07:26:23Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "4a36aa2a-532a-4535-9aba-d69f67cc37d4",
        "parentId" : "950920d6-af8d-4dee-80fd-88d8506da6d8",
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "Why don't we simply copy this new file as `mvn-scalastyle` and old file as `scalastyle` as are?\r\n\r\nAnd, Github Actions calls `mvn-scalastyle` and Jenkins PR builder calls `scalastyle`.\r\n\r\nFYI, currently Jenkins PR builder directly calls `sbt-checkstyle ` https://github.com/apache/spark/blob/32af7004a254107340df908e8dd91a0bc22e068e/dev/run-tests.py#L190-L196 for Java style instead of `lint-java` for similar reason.",
        "createdAt" : "2020-01-21T07:34:13Z",
        "updatedAt" : "2020-01-21T07:34:37Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "514ba663-bcb8-45bd-8dc0-733271630040",
        "parentId" : "950920d6-af8d-4dee-80fd-88d8506da6d8",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "I'm +1 for any suggestion if you make a PR and pass all system (including GitHub Action). :)\r\n\r\nBTW, did you try to checkout one of older commits than this, @HyukjinKwon ?\r\n\r\nIf it works in your environment even in that case, it sounds weird to me because of the following.\r\n\r\nAs you can see on the mailing list, this was reported by @tgravescs and I confirmed the situation. Then, I made this PR at that time. Also, GitHub Action log still shows the whole situation (the **failures** before this commit and the **successes** after this commit).\r\n\r\n<img width=\"593\" alt=\"Screen Shot 2020-01-20 at 11 48 50 PM\" src=\"https://user-images.githubusercontent.com/9700541/72785186-7b43ad00-3bdf-11ea-9ca4-084b7a4b8a58.png\">\r\n\r\nFor now, I don't have any clue about the difference (code side? or Maven server side? or your environment?).\r\n\r\nIn any way, you can move forward whiling keeping our system **green**. We had better discuss on your PR.",
        "createdAt" : "2020-01-21T08:04:29Z",
        "updatedAt" : "2020-01-21T08:04:59Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "2535cd1b-22f6-450a-8a21-3240ccc5475b",
        "parentId" : "950920d6-af8d-4dee-80fd-88d8506da6d8",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "I checked this with dca838058ffd0e2c01591fd9ab0f192de446d606 again. It still fails before this commit. Please try to checkout old commit in your environment, @HyukjinKwon .\r\n```\r\n[error] [FATAL] Non-resolvable parent POM: \r\nCould not transfer artifact org.apache:apache:pom:18 from/to central (\r\nhttp://repo.maven.apache.org/maven2): Failed to look for file:\r\nhttp://repo.maven.apache.org/maven2/org/apache/apache/18/apache-18.pom. Return code is: 501 and 'parent.relativePath' points at wrong local POM @ line 22, column 11\r\n```",
        "createdAt" : "2020-01-21T08:10:12Z",
        "updatedAt" : "2020-01-21T08:11:47Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      },
      {
        "id" : "119f4d75-eddf-4f8b-8789-de7cb0680e6f",
        "parentId" : "950920d6-af8d-4dee-80fd-88d8506da6d8",
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "Thanks for pointer, @dongjoon-hyun!",
        "createdAt" : "2020-01-21T08:25:02Z",
        "updatedAt" : "2020-01-21T08:25:03Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      }
    ],
    "commit" : "9c8e204ccbd08127e457f5507b1eaf41b78e222b",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +21,25 @@\nSPARK_PROFILES=${1:-\"-Pmesos -Pkubernetes -Pyarn -Pspark-ganglia-lgpl -Pkinesis-asl -Phive-thriftserver -Phive -Pdocker-integration-tests -Pkubernetes-integration-tests\"}\nERRORS=$($SCRIPT_DIR/../build/mvn $SPARK_PROFILES scalastyle:check | grep \"^error file\")\n\nif test ! -z \"$ERRORS\"; then"
  }
]