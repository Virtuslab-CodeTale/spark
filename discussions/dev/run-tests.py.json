[
  {
    "id" : "1211f521-78ca-4df4-bfcf-9e032b2b86c2",
    "prId" : 33410,
    "prUrl" : "https://github.com/apache/spark/pull/33410#pullrequestreview-712198205",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "68f7c89d-e59a-41bd-bb48-9ddea38096c1",
        "parentId" : null,
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "Ah the changes here should be backported too. I'll make a pr later today.",
        "createdAt" : "2021-07-21T21:15:22Z",
        "updatedAt" : "2021-07-21T21:15:22Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      }
    ],
    "commit" : "48bfb39f0d3a8d15614998297ba56addf3b756b5",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +694,698 @@    excluded_tags = []\n    if should_only_test_modules:\n        # We're likely in the forked repository\n        is_apache_spark_ref = os.environ.get(\"APACHE_SPARK_REF\", \"\") != \"\"\n        # We're likely in the main repo build."
  },
  {
    "id" : "fa08efbf-cb78-4095-91a9-aa1767a5c67b",
    "prId" : 29306,
    "prUrl" : "https://github.com/apache/spark/pull/29306#pullrequestreview-458479278",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "04254514-2435-4f83-a147-4cb2eed60c3b",
        "parentId" : null,
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "I piggyback this change together. We don't need to install SparkR when `--modules` is specified except that it includes `sparkr`.",
        "createdAt" : "2020-07-30T14:52:32Z",
        "updatedAt" : "2020-07-30T15:54:34Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      }
    ],
    "commit" : "8ff181e0fd0433fbc721c99e6f5aefbf2de58d6d",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +616,620 @@        test_modules = [m for m in modules.all_modules if m.name in str_test_modules]\n\n    if not should_only_test_modules or modules.sparkr in test_modules:\n        # If tests modules are specified, we will not run R linter.\n        # SparkR needs the manual SparkR installation."
  },
  {
    "id" : "8b870240-3404-4657-8972-0792c0225daa",
    "prId" : 29086,
    "prUrl" : "https://github.com/apache/spark/pull/29086#pullrequestreview-447360590",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9c7a440b-1c9c-41b5-afff-723f5c19294c",
        "parentId" : null,
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "`GITHUB_BASE_REF` is only set in the PR builder; otherwise, it's an empty string.",
        "createdAt" : "2020-07-13T11:07:40Z",
        "updatedAt" : "2020-07-13T11:07:41Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "5de6b34d-f529-43ca-9196-d12a3c051ec8",
        "parentId" : "9c7a440b-1c9c-41b5-afff-723f5c19294c",
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "~Do you mean Jenkins PR Builder?~",
        "createdAt" : "2020-07-13T15:30:08Z",
        "updatedAt" : "2020-07-13T15:30:27Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "9d8555a44d8157791e8140236a6eba9c09b2d5d8",
    "line" : 108,
    "diffHunk" : "@@ -1,1 +654,658 @@        # only the affected modules.\n        if test_env == \"github_actions\":\n            if os.environ[\"GITHUB_BASE_REF\"] != \"\":\n                # Pull requests\n                changed_files = identify_changed_files_from_git_commits("
  },
  {
    "id" : "ac08107b-ba50-4e88-991e-6180799366f9",
    "prId" : 29086,
    "prUrl" : "https://github.com/apache/spark/pull/29086#pullrequestreview-447846572",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c2eec916-629a-4ac9-901c-b7aaaffc54e9",
        "parentId" : null,
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "`GITHUB_SHA` is the commit in PR. `GITHUB_BASE_REF` is the target repo's branch.",
        "createdAt" : "2020-07-13T11:08:52Z",
        "updatedAt" : "2020-07-13T11:08:52Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "fa1ba9f3-7919-4b11-98b6-513730329729",
        "parentId" : "c2eec916-629a-4ac9-901c-b7aaaffc54e9",
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "For many commits in a PR, each time `changed_files` is different? If a previous commit changed two modules but later one changes only one, will this only run test for the later module?",
        "createdAt" : "2020-07-14T06:33:01Z",
        "updatedAt" : "2020-07-14T06:33:02Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      },
      {
        "id" : "842394c0-806d-43eb-b8a2-590c916d7830",
        "parentId" : "c2eec916-629a-4ac9-901c-b7aaaffc54e9",
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "From my testing, it combines all commits and `changed_files` is based on all commits always.\r\n\r\nSeems like `GITHUB_SHA` became a merge commit internally in Github Actions, and `GITHUB_BASE_REF` becomes the branch which PR opens against.\r\n\r\nFor example, if a PR has commits 1, 2 and 3, GitHub Actions looks creates a merge commit 4 for commits 1, 2 and 3. And, it calculates the diff from the branch, for example, `master` in the original repo, Apache Spark.\r\n\r\n```bash\r\ngit diff 4 master\r\n```\r\n",
        "createdAt" : "2020-07-14T06:58:39Z",
        "updatedAt" : "2020-07-14T06:58:39Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "d7cff1bc-26c3-410e-9d5d-1aeda70d899b",
        "parentId" : "c2eec916-629a-4ac9-901c-b7aaaffc54e9",
        "authorId" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "body" : "This is an example of the merge commit: https://github.com/HyukjinKwon/spark/commit/8f36ec455e19dbfb10195d872a9ccaeb2de8ceca at https://github.com/HyukjinKwon/spark/pull/7",
        "createdAt" : "2020-07-14T07:04:36Z",
        "updatedAt" : "2020-07-14T07:04:36Z",
        "lastEditedBy" : "5e07d5ab-b4b3-41e4-beca-fefd635980c6",
        "tags" : [
        ]
      },
      {
        "id" : "9f588b27-3a3a-4808-bc8d-88a021955379",
        "parentId" : "c2eec916-629a-4ac9-901c-b7aaaffc54e9",
        "authorId" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "body" : "Okay. Thanks for clarifying. Looks good.",
        "createdAt" : "2020-07-14T07:14:29Z",
        "updatedAt" : "2020-07-14T07:14:30Z",
        "lastEditedBy" : "5e28de51-305c-4276-b3a0-78bcc74eb6f2",
        "tags" : [
        ]
      }
    ],
    "commit" : "9d8555a44d8157791e8140236a6eba9c09b2d5d8",
    "line" : 111,
    "diffHunk" : "@@ -1,1 +657,661 @@                # Pull requests\n                changed_files = identify_changed_files_from_git_commits(\n                    os.environ[\"GITHUB_SHA\"], target_branch=os.environ[\"GITHUB_BASE_REF\"])\n            else:\n                # Build for each commit."
  },
  {
    "id" : "338fa973-6623-460c-b287-62a324713c79",
    "prId" : 29086,
    "prUrl" : "https://github.com/apache/spark/pull/29086#pullrequestreview-447361273",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "036d1845-e7c0-4d94-ae51-f30359571c45",
        "parentId" : null,
        "authorId" : "7694af3d-5af2-4788-8413-c0558915c452",
        "body" : "Thanks. This looks safe.",
        "createdAt" : "2020-07-13T15:30:53Z",
        "updatedAt" : "2020-07-13T15:30:53Z",
        "lastEditedBy" : "7694af3d-5af2-4788-8413-c0558915c452",
        "tags" : [
        ]
      }
    ],
    "commit" : "9d8555a44d8157791e8140236a6eba9c09b2d5d8",
    "line" : 107,
    "diffHunk" : "@@ -1,1 +653,657 @@        # If we're running the tests in Github Actions, attempt to detect and test\n        # only the affected modules.\n        if test_env == \"github_actions\":\n            if os.environ[\"GITHUB_BASE_REF\"] != \"\":\n                # Pull requests"
  },
  {
    "id" : "2e7e1b88-0b9c-469c-896e-c407a0a31887",
    "prId" : 28578,
    "prUrl" : "https://github.com/apache/spark/pull/28578#pullrequestreview-414158195",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e31015bd-59d0-46ad-8d86-519c7471d96a",
        "parentId" : null,
        "authorId" : "3a227965-84e0-47cf-9974-11293764f028",
        "body" : "For environments where Chrome and Chrome driver is not installed, including CI environment, tests tagged as `ChromeUITest` is filtered out when tests are run through `run-tests.py`.",
        "createdAt" : "2020-05-19T07:09:01Z",
        "updatedAt" : "2020-05-21T08:31:41Z",
        "lastEditedBy" : "3a227965-84e0-47cf-9974-11293764f028",
        "tags" : [
        ]
      }
    ],
    "commit" : "6ccbc391067995205127425ef59c4a9f1fe40520",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +610,614 @@          \", \".join(x.name for x in changed_modules))\n\n    excluded_tags.extend(always_excluded_tags)\n\n    # setup environment variables"
  }
]